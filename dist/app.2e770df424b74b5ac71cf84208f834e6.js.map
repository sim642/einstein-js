{"version":3,"sources":["webpack:///app.2e770df424b74b5ac71cf84208f834e6.js","webpack:///./src/web/icons/original/large/large-c1.png","webpack:///./src/web/icons/original/large/large-b3.png","webpack:///./src/web/icons/original/large/large-d5.png","webpack:///./src/puzzle/hint/AdjacentHint.ts","webpack:///./src/web/icons/original/small/small-c6.png","webpack:///./src/web/icons/original/small/small-b1.png","webpack:///./src/Timer.ts","webpack:///./src/web/icons/original/large/large-a3.png","webpack:///./src/storage/Wasm.ts","webpack:///./src/time.ts","webpack:///./src/puzzle/generate/ExtraHintsGenerator.ts","webpack:///./src/web/icons/original/small/small-b2.png","webpack:///./src/web \\.png$","webpack:///./src/storage/EinsteinDatabase.ts","webpack:///./src/storage/Counts.ts","webpack:///./package.json","webpack:///./src/web/rain-light.png","webpack:///./src/web/icons/original/small/small-c4.png","webpack:///./src/web/icons/original/large/large-e3.png","webpack:///./src/math/statistics.ts","webpack:///./src/web/icons/original/small/small-c5.png","webpack:///./src/storage/db.ts","webpack:///./src/web/helper/MessageUnloadListener.ts","webpack:///./src/web/icons/original/large/large-b4.png","webpack:///./src/web/icons/original/small/small-d1.png","webpack:///./src/puzzle/board/MultiBoard.ts","webpack:///./src/web/icons/original/large/large-d4.png","webpack:///./src/puzzle/hint/BetweenHint.ts","webpack:///./src/web/icons/original/small/small-d3.png","webpack:///./src/web/icons/original/small/small-e3.png","webpack:///./src/web/icons/original/tile.png","webpack:///./src/puzzle/generate/DifficultyHintsGenerator.ts","webpack:///./src/storage/Config.ts","webpack:///./src/web/icons/original/small/small-f3.png","webpack:///./src/web/icons/original/small/small-a4.png","webpack:///./src/puzzle/hint/OpenHint.ts","webpack:///./src/math/sortedStatistics.ts","webpack:///./src/web/icons/original/hint-between.png","webpack:///./src/web/HighscoreComponent.tsx","webpack:///./src/puzzle/hint/SameColumnHint.ts","webpack:///./src/puzzle/board/SingleBoard.ts","webpack:///./src/web/HintsComponent.tsx","webpack:///./src/wasm.ts","webpack:///./src/web/icons/original/small/small-f5.png","webpack:///./src/web/icons/original/large/large-a6.png","webpack:///./src/puzzle/generate/Z3HintsGenerator.ts","webpack:///./src/web/icons/original/large/large-a2.png","webpack:///./src/web/IconComponents.tsx","webpack:///./src/function.ts","webpack:///./src/web/icons/original/hint-direction.png","webpack:///./src/web/icons/original/small/small-e5.png","webpack:///./src/web/icons/original/large/large-d3.png","webpack:///./src/puzzle/generate/ApplyHintsGenerator.ts","webpack:///./src/web/icons/original/large/large-a1.png","webpack:///./src/web/icons/original/small/small-f6.png","webpack:///./src/web/icons/original/hint-adjacent.png","webpack:///./src/web/icons/original/small/small-b3.png","webpack:///./src/puzzle/generate/HintsGenerator.ts","webpack:///./src/web/icons/original/large/large-e4.png","webpack:///./src/web/icons/original/small/small-e1.png","webpack:///./src/web/AppComponent.tsx","webpack:///./src/math/PairsDistribution.ts","webpack:///./src/web/icons/original/large/large-a5.png","webpack:///./src/web/icons/original/large/large-b1.png","webpack:///./src/puzzle/hint/DirectionHint.ts","webpack:///./src/web/icons/original/large/large-c3.png","webpack:///./src/web/icons/original/small/small-e4.png","webpack:///./src/web/icons/original/large/large-e6.png","webpack:///./src/web/icons/original/large/large-b5.png","webpack:///./src/web/icons/original/small/small-b6.png","webpack:///./src/web/icons/original/large/large-f1.png","webpack:///./src/web/icons/original/large/large-e1.png","webpack:///./src/z3/Z3.ts","webpack:///./src/web/OptionsComponent.tsx","webpack:///./src/puzzle/board/Board.ts","webpack:///./src/math/AbstractDistribution.ts","webpack:///./src/web/icons/original/large/large-d1.png","webpack:///./src/puzzle/PuzzleGenerator.ts","webpack:///./src/web/icons/original/small/small-d5.png","webpack:///./src/web/icons/original/large/large-f6.png","webpack:///./src/web/icons/original/large/large-e2.png","webpack:///./src/web/TimerComponent.tsx","webpack:///./src/web/helper/LongTouchContextMenuHandler.ts","webpack:///./src/web/icons/original/small/small-b5.png","webpack:///./src/web/PuzzleOptionsUtils.ts","webpack:///./src/web/icons/original/small/small-c2.png","webpack:///./src/web/icons/original/large/large-f3.png","webpack:///./src/puzzle/RandomHint.ts","webpack:///./src/web/icons/original/small/small-d6.png","webpack:///./src/web/icons/original/large/large-e5.png","webpack:///./src/puzzle/Puzzle.ts","webpack:///./src/web/icons/original/small/small-d4.png","webpack:///./src/web/rain.png","webpack:///./src/web/icons/original/small/small-c1.png","webpack:///./src/web/icons/original/small/small-e6.png","webpack:///./src/web/icons/original/large/large-c4.png","webpack:///./src/web/icons/original/large/large-b6.png","webpack:///./src/web/icons/original/small/small-c3.png","webpack:///./src/puzzle/generate/NonApplyHintsGenerator.ts","webpack:///./src/web/icons/original/small/small-a2.png","webpack:///./src/web/icons/original/large/large-d2.png","webpack:///./src/web/icons/original/large/large-c6.png","webpack:///./src/web/icons/original/large/large-c2.png","webpack:///./src/web/BirthdayComponent.tsx","webpack:///./src/web/icons/original/small/small-a6.png","webpack:///./src/web/icons/original/large/large-d6.png","webpack:///./src/index.tsx","webpack:///./src/web/icons/original/small/small-a1.png","webpack:///./src/web/icons/original/hint-tile.png","webpack:///./src/web/icons/original/small/small-b4.png","webpack:///./src/web/icons/original/large/large-c5.png","webpack:///./src/web/icons/original/large/large-f5.png","webpack:///./src/web/icons/original/small/small-e2.png","webpack:///./src/web/icons/original/small/small-a5.png","webpack:///./src/storage/Times.ts","webpack:///./src/web/icons/original/small/small-f1.png","webpack:///./src/web/icons/original/large/large-b2.png","webpack:///./src/web/icons/original/small/small-a3.png","webpack:///./src/web/icons/original/small/small-d2.png","webpack:///./src/web/icons/original/small/small-f2.png","webpack:///./src/web/icons/original/large/large-f4.png","webpack:///./src/web/helper/VisibilityChangeListener.ts","webpack:///./src/web/icons/original/small/small-f4.png","webpack:///./src/web/icons/original/large/large-a4.png","webpack:///./src/web/icons/original/large/large-f2.png","webpack:///./src/web/MultiBoardComponent.tsx"],"names":["webpackJsonp","+bsQ","module","exports","__webpack_require__","p","/BPU","1Tjk","2+Yo","Object","defineProperty","value","_","AdjacentHint","row1","variant1","row2","variant2","this","prototype","applyTo","board","changed","applyToCol","col","thisRow","thisVariant","adjRow","adjVariant","hasLeft","isPossible","hasRight","cols","remove","getType","AdjacentHintFactory","supports","options","rows","random","colDelta","col1","col2","get","20Ho","27d+","2JYO","32Ag","Timer","reset","start","startTime","now","pause","runningTime","getRunningTime","totalTime","getTotalTime","4I4A","4mO9","db_1","Wasm","getCached","url","db","wasm","wasmItem","console","log","debug","undefined","cache","transaction","clear","then","put","5AqA","formatDuration","diffMs","diffSec","sec","Math","floor","min","hr","padStart","toString","6RO1","tslib_1","RandomHint_1","HintsGenerator_1","ExtraHintsGenerator","_super","apply","arguments","__extends","call","hintFactory","generate","__awaiter","hints","__generator","_a","label","delegate","sent","generateExtraHints","clone","extraHints","round","extraHintsPercent","length","i","hint","push","RandomHintFactory","DelegateHintsGenerator","6b+j","7PiI","webpackContext","req","webpackContextResolve","id","map","Error","./icons/original/hint-adjacent.png","./icons/original/hint-between.png","./icons/original/hint-direction.png","./icons/original/hint-tile.png","./icons/original/large/large-a1.png","./icons/original/large/large-a2.png","./icons/original/large/large-a3.png","./icons/original/large/large-a4.png","./icons/original/large/large-a5.png","./icons/original/large/large-a6.png","./icons/original/large/large-b1.png","./icons/original/large/large-b2.png","./icons/original/large/large-b3.png","./icons/original/large/large-b4.png","./icons/original/large/large-b5.png","./icons/original/large/large-b6.png","./icons/original/large/large-c1.png","./icons/original/large/large-c2.png","./icons/original/large/large-c3.png","./icons/original/large/large-c4.png","./icons/original/large/large-c5.png","./icons/original/large/large-c6.png","./icons/original/large/large-d1.png","./icons/original/large/large-d2.png","./icons/original/large/large-d3.png","./icons/original/large/large-d4.png","./icons/original/large/large-d5.png","./icons/original/large/large-d6.png","./icons/original/large/large-e1.png","./icons/original/large/large-e2.png","./icons/original/large/large-e3.png","./icons/original/large/large-e4.png","./icons/original/large/large-e5.png","./icons/original/large/large-e6.png","./icons/original/large/large-f1.png","./icons/original/large/large-f2.png","./icons/original/large/large-f3.png","./icons/original/large/large-f4.png","./icons/original/large/large-f5.png","./icons/original/large/large-f6.png","./icons/original/small/small-a1.png","./icons/original/small/small-a2.png","./icons/original/small/small-a3.png","./icons/original/small/small-a4.png","./icons/original/small/small-a5.png","./icons/original/small/small-a6.png","./icons/original/small/small-b1.png","./icons/original/small/small-b2.png","./icons/original/small/small-b3.png","./icons/original/small/small-b4.png","./icons/original/small/small-b5.png","./icons/original/small/small-b6.png","./icons/original/small/small-c1.png","./icons/original/small/small-c2.png","./icons/original/small/small-c3.png","./icons/original/small/small-c4.png","./icons/original/small/small-c5.png","./icons/original/small/small-c6.png","./icons/original/small/small-d1.png","./icons/original/small/small-d2.png","./icons/original/small/small-d3.png","./icons/original/small/small-d4.png","./icons/original/small/small-d5.png","./icons/original/small/small-d6.png","./icons/original/small/small-e1.png","./icons/original/small/small-e2.png","./icons/original/small/small-e3.png","./icons/original/small/small-e4.png","./icons/original/small/small-e5.png","./icons/original/small/small-e6.png","./icons/original/small/small-f1.png","./icons/original/small/small-f2.png","./icons/original/small/small-f3.png","./icons/original/small/small-f4.png","./icons/original/small/small-f5.png","./icons/original/small/small-f6.png","./icons/original/tile.png","./rain-light.png","./rain.png","keys","resolve","7Pv6","dexie_1","EinsteinDatabase","_this","version","stores","times","config","counts","countsTmp","upgrade","tx","countsItems","table","toArray","bulkAdd","countsItemsTmp","default","Promise","all","toCollection","modify","difficulty","update","value.difficulty","7Stf","Counts","__assign","countsItem","solved","solvedCheated","over","getTopCounts","orderBy","increase","count","newCountsItem","merge","7YgM","name","description","author","keywords","repository","type","bugs","homepage","scripts","build:dev","build:prod","coverage","deploy","test","watch:dev","watch:test","dependencies","classnames","dexie","lodash","preact","tslib","z3em","devDependencies","@types/chai","@types/lodash","@types/mocha","@types/webassembly-js-api","@types/webpack-env","autoprefixer","chai","chi-squared","chunk-manifest-webpack-plugin","clean-webpack-plugin","copy-webpack-plugin","css-loader","css-mqpacker","extract-text-webpack-plugin","file-loader","html-webpack-plugin","istanbul-instrumenter-loader","less","less-loader","mocha","mocha-webpack","nyc","offline-plugin","postcss-loader","style-loader","ts-loader","typescript","webpack","webpack-chunk-hash","webpack-merge","webpack-node-externals","extension","instrument","sourceMap","8OvN","90E6","91Mv","99qC","9OCd","mean","arr","sum","variance","knownMean","sumBy","x","pow","stdDev","sqrt","AQov","ATbC","EinsteinDatabase_1","Agl8","MessageUnloadListener","callback","onBeforeUnload","e","message","returnValue","add","window","addEventListener","removeEventListener","BRDO","C7Cf","CBd9","Board_1","MultiBoard","full","row","constant","numberVariants","rowCells","cell","variants","_i","cell_1","variant","pruneSingles","set","variant_1","col_1","isSingle","getSingle","findIndex","colCnt","variantCnt","colVariant","variantCol","applyHint","applyHints","changed2","hints_1","applySingleHint","hints_2","isSolved","singleBoard","isSingleBoard","contains","applySingleBoard","singleVariant","Board","D3DT","DAXx","BetweenHint","rowMiddle","variantMiddle","leftPossible","rightPossible","BetweenHintFactory","colMiddle","Dvz/","E9CV","FslU","GgXB","DifficultyHintsGenerator","generators","HZR3","Config","getKey","key","configItem","configItems","fromPairs","setKey","newConfig","bulkPut","toPairs","pair","Hoba","Htyr","HwaM","OpenHint","OpenHintFactory","I4NM","median","n","lowerQuartile","end","slice","upperQuartile","IJZH","In3e","preact_1","Counts_1","Times_1","time_1","PuzzleOptionsUtils_1","statistics","sortedStatistics","HighscoreItemComponent","render","props","h","class","title","item","date","time","Component","HighscoreTableComponent","top10","timesItem","colSpan","StatsComponent","state","fetchCounts","componentWillReceiveProps","nextProps","setState","stats","total_1","countWithPercentage","percentage","toFixed","max","HighscoreComponent","fetchTimes","calculateStats","timesItems","sortedTimes","Times","getSortedTimes","take","formatOptions","JIJM","SameColumnHint","possible1","possible2","SameColumnHintFactory","JMRT","MultiBoard_1","SingleBoard","shuffle","range","getCol","isSolvable","multiBoard","Jd+4","JpXf","KBc0","classNames","AdjacentHint_1","BetweenHint_1","DirectionHint_1","SameColumnHint_1","LongTouchContextMenuHandler_1","IconComponents_1","HintComponent","contextMenuHandler","LongTouchContextMenuHandler","onToggle","visible","renderTbody","LargeVariantIconComponent","IconComponent","DirectionHint","rowLeft","variantLeft","rowRight","variantRight","hint-outer","hint-visible","hint-hidden","HintsComponent","onClick","hints-horizontal","hints-visible","hints-hidden","filter","MZjJ","isWasmSupported","WebAssembly","MjYr","N7YA","Nf2I","Z3_1","OpenHint_1","Z3HintsGenerator","_b","getZ3","z3","makeContext","assertBoard","generateHints","pruneHints","deleteContext","global_param_set","cfg","mk_config","ctx","mk_context","set_error_handler","errorHandler","del_config","ask","smtlib2","eval_smtlib2_string","trim","del_context","isUniqueSolvable","constraint","getHintConstraint","getUnsatCore","coreIs","match","parseInt","includes","xs","ds","x1","x2","xMiddle","NhLW","NsAh","r","forEach","src","SmallVariantIconComponent","NsPZ","memoizeSupplier","supplier","Op0r","P2+R","PWPq","PvcG","ApplyHintsGenerator","SolvableHintsGenerator","QP0S","QfaF","Qj03","RUP8","S+P+","splice","SAo3","SCQN","SLpm","Package","PuzzleGenerator_1","Config_1","Timer_1","GameState","HighscoreComponent_1","HintsComponent_1","MultiBoardComponent_1","TimerComponent_1","VisibilityChangeListener_1","MessageUnloadListener_1","BirthdayComponent_1","OptionsComponent_1","AppComponent","timer","puzzleGenerator","mainPuzzleGenerator","onClickNewGame","gameState","Options","cheated","onClickPause","Playing","ManualPaused","onClickResume","AutoPaused","onClickCheat","puzzle","refresh","onVisibilityChange","onMessageUnload","submitOptions","configOptions","Generating","requestAnimationFrame","setTimeout","e_1","trys","canCheat","alert","highscoreOptions","Highscore","puzzle_1","time_2","Solved","cheatedText","isInTop10","defaultName","prompt","isOver","Over","canApplySingleHint","defaultOptions","visibilityChange","VisibilityChangeListener","messageUnload","componentDidMount","componentWillUnmount","solvedOrOver","showBoard","app","paused","href","button-highlight","disabled","TimerComponent","BirthdayComponent","month","day","OptionsComponent","submit","highscore","generating","MultiBoardComponent","Seff","AbstractDistribution_1","PairsDistribution","pairs","find","enumerable","configurable","mapFreqs","f","freq","monteCarlo","generator","observed","AbstractDistribution","TeOI","TjjG","UBU4","X9r5","DirectionHintFactory","colLeft","colRight","XjqR","XnXw","YFuY","YKaq","Z31m","ZNit","ZvN9","aDup","createZ3Em","z3emOptions","reject","Z3Em","onRuntimeInitialized","ResolveWrapper","z3emWasm","function_1","Wasm_1","wasm_1","instantiateWasm","importObject","receiveInstance","instantiate","instance","locateFile","onReceiveInstance","resolveWrapper","Z3","addFunction","error","cwrap","b/H4","InputRangeComponent","onChange","preventDefault","target","listId","list","onInput","for","unit","step","RadioChoiceComponent","choices","checked","TopOptionsComponent","topCounts","fetchTopCounts","className","onSubmit","onReset","hasTimes","fetchHasTimes","onHighscore","setOptions","eq","field","bWR4","bwb8","scale","targetN","sourceN","scaleTo","targetDist","cumFreq","cgSM","cnN+","SingleBoard_1","ApplyHintsGenerator_1","DifficultyHintsGenerator_1","ExtraHintsGenerator_1","NonApplyHintsGenerator_1","Z3HintsGenerator_1","Puzzle_1","HintsPuzzleGenerator","hintsGenerator","Puzzle","normal","hard","NonApplyHintsGenerator","d6hy","dSmd","dcOB","etg9","interval","setTimer","clearTimer","clearInterval","setInterval","euc6","onTouchStart","touching","timeout","longTouchTime","onTouchMove","clearTimeout","onTouchEnd","onTouchCancel","onContextMenu","fZOX","fdQW","difficultyText","extraHintsText","gBE2","gVWB","gYeE","PairsDistribution_1","defaultDist","classes","hFVX","hli+","hmo1","cloneDeep","iXl1","kCQN","kbZK","lgdU","mGEC","mPGt","mcFw","n1vv","nVYH","oD70","oJmq","oXIE","ouBu","Date","getMonth","getDate","pJA7","pqg3","q9gS","qMEF","AppComponent_1","OfflinePluginRuntime","install","document","body","qpPT","qwlA","romA","rxGk","t+UZ","uLm8","uVvn","uyRy","vO/K","addItem","where","sortBy","getTop10","sortedIndexBy","voAe","w35o","x5BK","xDob","xFS2","xToJ","yFfv","yFiT","focused","unfocused","hidden","mozHidden","webkitHidden","msHidden","onfocusin","onfocusout","onpageshow","onfocus","onpagehide","onblur","yNUn","ytF8","zU+P","ziB5","SingleCellComponent","VariantVariantMultiCellComponent","EmptyVariantMultiCellComponent","VariantMultiCellComponent","MultiCellComponent","variantCols","ceil","variantRows","variantRow","CellComponent","correct","cell-correct","cell-incorrect","RowComponent","forceUpdate","data","data-rows","data-cols"],"mappings":"AAAAA,cAAc,QAERC,OACA,SAAUC,EAAQC,EAASC,GCHjCF,EAAAC,QAAAC,EAAAC,EAAA,sEDSMC,OACA,SAAUJ,EAAQC,EAASC,GEVjCF,EAAAC,QAAAC,EAAAC,EAAA,sEFgBME,OACA,SAAUL,EAAQC,EAASC,GGjBjCF,EAAAC,QAAAC,EAAAC,EAAA,sEHuBMG,OACA,SAAUN,EAAQC,EAASC,GAEjC,YAEAK,QAAOC,eAAeP,EAAS,cAAgBQ,OAAO,GI5BtD,IAAAC,GAAAR,EAAA,QAMAS,EAAA,WACI,QAAAA,GAAmBC,EAAqBC,EAAyBC,EAAqBC,GAAnEC,KAAAJ,OAAqBI,KAAAH,WAAyBG,KAAAF,OAAqBE,KAAAD,WA+B1F,MA3BIJ,GAAAM,UAAAC,QAAA,SAAQC,GAaJ,IAAK,GAZDC,IAAU,EAEVC,EAAa,SAACC,EAAaC,EAAiBC,EAAqBC,EAAgBC,GACjF,GAAMC,GAAUL,GAAO,GAAIH,EAAMS,WAAWH,EAAQH,EAAM,EAAGI,GACvDG,EAAWP,EAAMH,EAAMW,KAAO,GAAIX,EAAMS,WAAWH,EAAQH,EAAM,EAAGI,EAErEC,IAAYE,IAAYV,EAAMS,WAAWL,EAASD,EAAKE,KACxDL,EAAMY,OAAOR,EAASD,EAAKE,GAC3BJ,GAAU,IAITE,EAAM,EAAGA,EAAMH,EAAMW,KAAMR,IAChCD,EAAWC,EAAKN,KAAKJ,KAAMI,KAAKH,SAAUG,KAAKF,KAAME,KAAKD,UAC1DM,EAAWC,EAAKN,KAAKF,KAAME,KAAKD,SAAUC,KAAKJ,KAAMI,KAAKH,SAM9D,OAHIO,IACAJ,KAAKE,QAAQC,GAEVC,GAGXT,EAAAM,UAAAe,QAAA,WACI,MAAM,IAEdrB,IAhCaV,GAAAU,cAkCb,IAAAsB,GAAA,mBAAAA,MAmBA,MAlBIA,GAAAhB,UAAAiB,SAAA,SAASC,GACL,MAAOA,GAAQC,MAAQ,GAAKD,EAAQL,MAAQ,GAGhDG,EAAAhB,UAAAoB,OAAA,SAAOlB,GACH,GAGImB,GAHA1B,EAAOF,EAAE2B,OAAO,EAAGlB,EAAMiB,KAAO,GAChCG,EAAO7B,EAAE2B,OAAO,EAAGlB,EAAMW,KAAO,GAChChB,EAAOJ,EAAE2B,OAAO,EAAGlB,EAAMiB,KAAO,EAGhCE,GADQ,GAARC,EACW,EACNA,GAAQpB,EAAMW,KAAO,GACd,EAEiB,GAAlBpB,EAAE2B,OAAO,EAAG,GAAU,GAAK,CAC1C,IAAIG,GAAOD,EAAOD,CAClB,OAAO,IAAI3B,GAAaC,EAAMO,EAAMsB,IAAI7B,EAAM2B,GAAOzB,EAAMK,EAAMsB,IAAI3B,EAAM0B,KAEnFP,IAnBahC,GAAAgC,uBJgDPS,OACA,SAAU1C,EAAQC,EAASC,GKzFjCF,EAAAC,QAAAC,EAAAC,EAAA,sEL+FMwC,OACA,SAAU3C,EAAQC,EAASC,GMhGjCF,EAAAC,QAAAC,EAAAC,EAAA,sENsGMyC,OACA,SAAU5C,EAAQC,KAMlB4C,OACA,SAAU7C,EAAQC,EAASC,GAEjC,YAEAK,QAAOC,eAAeP,EAAS,cAAgBQ,OAAO,GOlHtD,IAAAC,GAAAR,EAAA,QAEA4C,EAAA,WAII,QAAAA,KACI9B,KAAK+B,QA4Bb,MAzBID,GAAA7B,UAAA+B,MAAA,WAC2B,OAAnBhC,KAAKiC,YACLjC,KAAKiC,UAAYvC,EAAEwC,QAG3BJ,EAAA7B,UAAAkC,MAAA,WACI,GAAIC,GAAcpC,KAAKqC,gBACH,QAAhBD,IACApC,KAAKsC,WAAaF,EAClBpC,KAAKiC,UAAY,OAIzBH,EAAA7B,UAAAoC,eAAA,WACI,MAA0B,QAAnBrC,KAAKiC,UAAqBvC,EAAEwC,MAAQlC,KAAKiC,UAAY,MAGhEH,EAAA7B,UAAAsC,aAAA,WACI,MAAOvC,MAAKsC,WAAatC,KAAKqC,kBAAoB,IAGtDP,EAAA7B,UAAA8B,MAAA,WACI/B,KAAKsC,UAAY,EACjBtC,KAAKiC,UAAY,MAEzBH,IAjCa7C,GAAA6C,SPkJPU,OACA,SAAUxD,EAAQC,EAASC,GQrJjCF,EAAAC,QAAAC,EAAAC,EAAA,sER2JMsD,OACA,SAAUzD,EAAQC,EAASC,GAEjC,YAEAK,QAAOC,eAAeP,EAAS,cAAgBQ,OAAO,GShKtD,IAAAiD,GAAAxD,EAAA,SAOA,SAAiByD,GACb,QAAAC,GAA0BC,GACtB,MAAOH,GAAAI,GAAGC,KAAKtB,IAAIoB,EAAK,SAAAG,GAGpB,MAFAC,SAAQC,IAAI,iBACZD,QAAQE,MAAMH,OACMI,KAAbJ,EAAyBA,EAAShE,WAASoE,KAI1D,QAAAC,GAAsBR,EAAa7D,GAC/B,GAAIgE,IACAH,IAAKA,EACL7D,OAAQA,EAEZiE,SAAQC,IAAI,eACZD,QAAQE,MAAMH,GACdN,EAAAI,GAAGQ,YAAY,KAAMZ,EAAAI,GAAGC,KAAM,WAC1B,MAAAL,GAAAI,GAAGC,KAAKQ,QAAQC,KAAK,WACjB,MAAAd,GAAAI,GAAGC,KAAKU,IAAIT,OAElBQ,KAAK,WAAM,MAAAP,SAAQC,IAAI,iBAnBbP,EAAAC,UAASA,EAQTD,EAAAU,MAAKA,GATRpE,EAAA0D,OAAA1D,EAAA0D,WTwLXe,OACA,SAAU1E,EAAQC,EAASC,GAEjC,YUhMA,SAAAyE,GAA+BC,GAC3B,GAAIC,GAAUD,EAAS,IACnBE,EAAMC,KAAKC,MAAMH,GAAW,GAC5BI,EAAMF,KAAKC,MAAMH,EAAU,IAAM,GACjCK,EAAKH,KAAKC,MAAMH,EAAU,GAAK,GAEnC,OAAUnE,GAAEyE,SAASD,EAAGE,WAAY,EAAG,KAAI,IAAI1E,EAAEyE,SAASF,EAAIG,WAAY,EAAG,KAAI,IAAI1E,EAAEyE,SAASL,EAAIM,WAAY,EAAG,KV4LvH7E,OAAOC,eAAeP,EAAS,cAAgBQ,OAAO,GUpMtD,IAAAC,GAAAR,EAAA,OAEAD,GAAA0E,kBVkNMU,OACA,SAAUrF,EAAQC,EAASC,GAEjC,YAEAK,QAAOC,eAAeP,EAAS,cAAgBQ,OAAO,GACtD,IAAI6E,GAAUpF,EAAoB,QW1NlCQ,EAAAR,EAAA,QAIAqF,EAAArF,EAAA,QACAsF,EAAAtF,EAAA,QAEAuF,EAAA,SAAAC,GAAA,QAAAD,KX0NQ,MAAkB,QAAXC,GAAmBA,EAAOC,MAAM3E,KAAM4E,YAAc5E,KWnMnE,MAvByCsE,GAAAO,UAAAJ,EAAAC,GAIrCD,EAAAxE,UAAAiB,SAAA,SAASC,GACL,MAAOuD,GAAAzE,UAAMiB,SAAQ4D,KAAA9E,KAACmB,IAAYsD,EAAoBM,YAAY7D,SAASC,IAGzEsD,EAAAxE,UAAA+E,SAAN,SAAe7D,EAAwBhB,GXwNnC,MAAOmE,GAAQW,UAAUjF,SAAM,OAAQ,GAAQ,WAC3C,GAAIkF,EACJ,OAAOZ,GAAQa,YAAYnF,KAAM,SAAUoF,GACvC,OAAQA,EAAGC,OACP,IAAK,GW3NL,SAAMrF,KAAKsF,SAASN,SAAS7D,EAAShB,GX4NtC,KAAK,GW3NjB,MADI+E,GAAQE,EAAAG,QACZ,EAAOd,EAAoBe,mBAAmBrE,EAAShB,EAAO+E,UAGnDT,EAAAe,mBAAf,SAAkCrE,EAAwBhB,EAAoB+E,GAC1EA,EAAQxF,EAAE+F,MAAMP,EAChB,IAAIQ,GAAa3B,KAAK4B,MAAOxE,EAAQyE,kBAAoB,IAAOV,EAAMW,OACtE5C,SAAQE,MAAM,uBAAuBuC,EACrC,KAAK,GAAII,GAAI,EAAGA,EAAIJ,EAAYI,IAAK,CACjC,GAAIC,GAAOtB,EAAoBM,YAAY1D,OAAOlB,EAClD+E,GAAMc,KAAKD,GAEf,MAAOb,IAnBIT,EAAAM,YAA2B,GAAIR,GAAA0B,kBAqBlDxB,GAvByCD,EAAA0B,uBAA5BjH,GAAAwF,uBX8PP0B,OACA,SAAUnH,EAAQC,EAASC,GYtQjCF,EAAAC,QAAAC,EAAAC,EAAA,sEZ4QMiH,OACA,SAAUpH,EAAQC,EAASC,Ga5LjC,QAAAmH,GAAAC,GACA,MAAApH,GAAAqH,EAAAD,IAEA,QAAAC,GAAAD,GACA,GAAAE,GAAAC,EAAAH,EACA,MAAAE,EAAA,GACA,SAAAE,OAAA,uBAAAJ,EAAA,KACA,OAAAE,GAxFA,GAAAC,IACAE,qCAAA,OACAC,oCAAA,OACAC,sCAAA,OACAC,iCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,sCAAA,OACAC,4BAAA,OACAC,mBAAA,OACAC,aAAA,OAWApF,GAAAqF,KAAA,WACA,MAAAnM,QAAAmM,KAAAjF,IAEAJ,EAAAsF,QAAApF,EACAvH,EAAAC,QAAAoH,EACAA,EAAAG,GAAA,QbmRMoF,OACA,SAAU5M,EAAQC,EAASC,GAEjC,YAEAK,QAAOC,eAAeP,EAAS,cAAgBQ,OAAO,GACtD,IAAI6E,GAAUpF,EAAoB,QcxXlC2M,EAAA3M,EAAA,QAOA4M,EAAA,SAAApH,GAMI,QAAAoH,KAAA,GAAAC,GACIrH,EAAAI,KAAA9E,KAAM,qBAAmBA,IdwbzB,OctbA+L,GAAKC,QAAQ,GAAGC,QACZC,MAAO,sCAGXH,EAAKC,QAAQ,GAAGC,QACZE,OAAQ,QAGZJ,EAAKC,QAAQ,GAAGC,QACZG,OAAQ,kCAUZL,EAAKC,QAAQ,GAAGC,QACZI,UAAW,kCACZC,QAAQ,SAAMC,GAAE,MAAAjI,GAAAW,UAAA8G,MAAA,qBd2Wf,GAAIS,EACJ,OAAOlI,GAAQa,YAAYnF,KAAM,SAAUoF,GACvC,OAAQA,EAAGC,OACP,IAAK,Gc7WK,SAAMkH,EAAGE,MAAM,UAAUC,Ud8WnC,KAAK,Gc7Wb,MADIF,GAAcpH,EAAAG,QAClB,EAAMgH,EAAGE,MAAM,aAAaE,QAAQH,GdgX5B,KAAK,GAED,MclXZpH,GAAAG,QdkXoB,Uc/WxBwG,EAAKC,QAAQ,GAAGC,QACZG,OAAQ,OAGZL,EAAKC,QAAQ,GAAGC,QACZG,OAAQ,wCACTE,QAAQ,SAAMC,GAAE,MAAAjI,GAAAW,UAAA8G,MAAA,qBdmXf,GAAIa,EACJ,OAAOtI,GAAQa,YAAYnF,KAAM,SAAUoF,GACvC,OAAQA,EAAGC,OACP,IAAK,GcrXQ,SAAMkH,EAAGE,MAAM,aAAaC,UdsXzC,KAAK,GcrXb,MADIE,GAAiBxH,EAAAG,QACrB,EAAMgH,EAAGE,MAAM,UAAUE,QAAQC,GdwXzB,KAAK,GAED,Mc1XZxH,GAAAG,Qd0XoB,UcvXxBwG,EAAKC,QAAQ,GAAGC,QACZI,UAAW,OAGfN,EAAKC,QAAQ,GAAGC,QACZC,MAAO,+CACPE,OAAQ,mDACTE,QAAQ,SAAAC,GACP,MAAAV,GAAAgB,QAAMC,QAAQC,KACVR,EAAGE,MAAiB,SAASO,eAAeC,QACxCC,WAAY,WAEhBX,EAAGE,MAA0B,UAAUU,OAAO,WAC1CC,mBAAoB,WAExBb,EAAGE,MAAkB,UAAUO,eAAeC,QAC1CC,WAAY,eAKxBnB,EAAKC,QAAQ,GAAGC,QACZlJ,KAAM,Qd2XHgJ,EcxXf,MAvEsCzH,GAAAO,UAAAiH,EAAApH,GAuEtCoH,GAvEsCD,EAAAgB,QAAzB5N,GAAA6M,oBdwcPuB,OACA,SAAUrO,EAAQC,EAASC,GAEjC,YAEAK,QAAOC,eAAeP,EAAS,cAAgBQ,OAAO,GACtD,IAAI6E,GAAUpF,EAAoB,QerdlCQ,EAAAR,EAAA,QAEAwD,EAAAxD,EAAA,SAYA,SAAiBoO,GACb,QAAA7L,GAAoBN,GAChB,MAAOuB,GAAAI,GAAGsJ,OAAO3K,IAAG6C,EAAAiJ,YAAKpM,GAAU,SAAAqM,GAC/B,OAAmBpK,KAAfoK,EAA0B,CAO1B,MANelJ,GAAAiJ,YACRpM,GACHsM,OAAQ,EACRC,cAAe,EACfC,KAAM,IAKV,MAAOH,KAInB,QAAAI,KACI,MAAOlL,GAAAI,GAAGsJ,OAAOM,UAAUlJ,KAAK,SAAAgJ,GAC5B,MAAA9M,GAAEmO,QAAQrB,EAAa,SAAAgB,GACnB,MAAAA,GAAWC,OAASD,EAAWE,cAAgBF,EAAWG,OACzD,WAIb,QAAAG,GAAyB3M,EAAwB4M,GAC7C,MAAOrL,GAAAI,GAAGQ,YAAY,KAAMZ,EAAAI,GAAGsJ,OAAQ,WACnC,MAAA3K,GAAIN,GAASqC,KAAK,SAAAgK,GACd,GAAIQ,GAA4BtO,EAAEuO,MAAMT,GAAUpI,KAC9CA,EAAC2I,GAAQP,EAAWO,GAAS,Efuc7B3I,GercJ,OAAO1C,GAAAI,GAAGsJ,OAAO3I,IAAIuK,EfucrB,IAAI5I,OereAkI,EAAA7L,IAAGA,EAgBH6L,EAAAM,aAAYA,EAQZN,EAAAQ,SAAQA,GAzBX7O,EAAAqO,SAAArO,EAAAqO,afgfXY,OACA,SAAUlP,EAAQC,GgB/fxBD,EAAAC,SAAkBkP,KAAA,WAAAnC,QAAA,QAAAoC,YAAA,wDAAAC,OAAA,aAAAC,UAAA,qEAAAC,YAA+NC,KAAA,MAAA3L,IAAA,iDAAmE4L,MAAS5L,IAAA,gDAAqD6L,SAAA,4BAAAC,SAAmDC,YAAA,kDAAAC,aAAA,mDAAAC,SAAA,+CAAAC,OAAA,6EAAAC,KAAA,gBAAAC,YAAA,0DAAAC,aAAA,yBAAgZC,cAAiBC,WAAA,SAAAC,MAAA,iBAAAC,OAAA,WAAAC,OAAA,SAAAC,MAAA,SAAAC,KAAA,UAAsHC,iBAAoBC,cAAA,SAAAC,gBAAA,YAAAC,eAAA,SAAAC,4BAAA,QAAAC,qBAAA,UAAAC,aAAA,SAAAC,KAAA,SAAAC,cAAA,SAAAC,gCAAA,QAAAC,uBAAA,UAAAC,sBAAA,SAAAC,aAAA,UAAAC,eAAA,SAAAC,8BAAA,SAAAC,cAAA,UAAAC,sBAAA,UAAAC,+BAAA,SAAAC,KAAA,SAAAC,cAAA,SAAAC,MAAA,SAAAC,gBAAA,SAAAC,IAAA,UAAAC,iBAAA,SAAAC,iBAAA,SAAAC,eAAA,UAAAC,YAAA,SAAAC,WAAA,SAAAC,QAAA,SAAAC,qBAAA,SAAAC,gBAAA,SAAAC,yBAAA,UAAgzBT,KAAQU,WAAA,qBAAAC,YAAA,EAAAC,WAAA,KhBqgBlwDC,OACA,SAAU7S,EAAQC,EAASC,GiBtgBjCF,EAAAC,QAAAC,EAAAC,EAAA,qDjB4gBM2S,OACA,SAAU9S,EAAQC,EAASC,GkB7gBjCF,EAAAC,QAAAC,EAAAC,EAAA,sElBmhBM4S,OACA,SAAU/S,EAAQC,EAASC,GmBphBjCF,EAAAC,QAAAC,EAAAC,EAAA,sEnB0hBM6S,OACA,SAAUhT,EAAQC,KAMlBgT,OACA,SAAUjT,EAAQC,EAASC,GAEjC,YoBliBA,SAAAgT,GAAqBC,GACjB,MAAOzS,GAAE0S,IAAID,GAAOA,EAAItM,OAG5B,QAAAwM,GAAyBF,EAAeG,GACpC,WADoC,KAAAA,MAAoBJ,EAAKC,IACtDzS,EAAE6S,MAAMJ,EAAK,SAAAK,GAAK,MAAAzO,MAAK0O,IAAID,EAAIF,EAAW,KAAMH,EAAItM,OAG/D,QAAA6M,GAAuBP,EAAeG,GAClC,WADkC,KAAAA,MAAoBJ,EAAKC,IACpDpO,KAAK4O,KAAKN,EAASF,EAAKG,IpB2hBnC/S,OAAOC,eAAeP,EAAS,cAAgBQ,OAAO,GoBtiBtD,IAAAC,GAAAR,EAAA,OAEAD,GAAAiT,OAIAjT,EAAAoT,WAIApT,EAAAyT,UpBgjBME,KACA,SAAU5T,EAAQC,EAASC,GqB3jBjCF,EAAAC,QAAAC,EAAAC,EAAA,sErBikBM0T,KACA,SAAU7T,EAAQC,EAASC,GAEjC,YAEAK,QAAOC,eAAeP,EAAS,cAAgBQ,OAAO,GsBtkBtD,IAAAqT,GAAA5T,EAAA,OAEWD,GAAA6D,GAAK,GAAIgQ,GAAAhH,kBtB2kBdiH,KACA,SAAU/T,EAAQC,EAASC,GAEjC,YAEAK,QAAOC,eAAeP,EAAS,cAAgBQ,OAAO,GuBhlBtD,IAAAuT,GAAA,WACI,QAAAA,GAAmBC,GAAnB,GAAAlH,GAAA/L,IAAmBA,MAAAiT,WAIXjT,KAAAkT,eAAiB,SAACC,GACtB,GAAIC,GAAUrH,EAAKkH,UACnB,OAAgB,QAAZG,EACOD,EAAEE,YAAcD,MAEvB,IAUZ,MAPIJ,GAAA/S,UAAAqT,IAAA,WACIC,OAAOC,iBAAiB,eAAgBxT,KAAKkT,iBAGjDF,EAAA/S,UAAAc,OAAA,WACIwS,OAAOE,oBAAoB,eAAgBzT,KAAKkT,iBAExDF,IApBa/T,GAAA+T,yBvB0mBPU,KACA,SAAU1U,EAAQC,EAASC,GwB7mBjCF,EAAAC,QAAAC,EAAAC,EAAA,sExBmnBMwU,KACA,SAAU3U,EAAQC,EAASC,GyBpnBjCF,EAAAC,QAAAC,EAAAC,EAAA,sEzB0nBMyU,KACA,SAAU5U,EAAQC,EAASC,GAEjC,YAEAK,QAAOC,eAAeP,EAAS,cAAgBQ,OAAO,GACtD,IAAI6E,GAAUpF,EAAoB,Q0BhoBlCQ,EAAAR,EAAA,QAEA2U,EAAA3U,EAAA,QAMA4U,EAAA,SAAApP,GAAA,QAAAoP,K1B8nBQ,MAAkB,QAAXpP,GAAmBA,EAAOC,MAAM3E,KAAM4E,YAAc5E,K0BpenE,MA1JgCsE,GAAAO,UAAAiP,EAAApP,GACrBoP,EAAAC,KAAP,SAAY5S,GACR,MAAO,IAAI2S,GAAWpU,EAAEwM,MAAM/K,EAAQC,KAAM,SAAA4S,GAAO,MAAAtU,GAAEwM,MAAM/K,EAAQL,KAAM,SAAAR,GAAO,MAAAZ,GAAEwM,MAAM/K,EAAQL,KAAMpB,EAAEuU,UAAS,QAAU9S,IAGxH2S,EAAAI,eAAP,SAAsBzH,EAA2BtL,GAC7C,MAAO,IAAI2S,GAAWpU,EAAE+G,IAAIgG,EAAO,SAAA0H,GAAY,MAAAzU,GAAE+G,IAAI0N,EAAU,SAAAC,GAE3D,IAA0B,GADtBC,GAAW3U,EAAEwM,MAAMiI,EAAStO,OAAQnG,EAAEuU,UAAS,IACzBK,EAAA,EAAAC,EAAAH,EAAAE,EAAAC,EAAA1O,OAAAyO,IAAI,CAC1BD,EADkBE,EAAAD,KACQ,EAC9B,MAAOD,OACNlT,IAGT2S,EAAA7T,UAAAc,OAAA,SAAOiT,EAAa1T,EAAakU,GACzBxU,KAAKyB,IAAIuS,EAAK1T,GAAKkU,KACnBxU,KAAKyB,IAAIuS,EAAK1T,GAAKkU,IAAW,EAC9BxU,KAAKyU,aAAaT,KAI1BF,EAAA7T,UAAAyU,IAAA,SAAIV,EAAa1T,EAAakU,GAC1B,IAAK,GAAIG,GAAU,EAAGA,EAAU3U,KAAKqU,SAAUM,IAC3C3U,KAAKyB,IAAIuS,EAAK1T,GAAKqU,IAAW,CAClC,KAAK,GAAIC,GAAM,EAAGA,EAAM5U,KAAKc,KAAM8T,IAC/B5U,KAAKyB,IAAIuS,EAAKY,GAAKJ,IAAW,CAClCxU,MAAKyB,IAAIuS,EAAK1T,GAAKkU,IAAW,EAC9BxU,KAAKyU,aAAaT,IAGtBF,EAAA7T,UAAAW,WAAA,SAAWoT,EAAa1T,EAAakU,GACjC,MAAOxU,MAAKyB,IAAIuS,EAAK1T,GAAKkU,IAG9BV,EAAA7T,UAAA8N,MAAA,SAAMiG,EAAa1T,GACf,MAAOZ,GAAE6S,MAAMvS,KAAKyB,IAAIuS,EAAK1T,GAAM,SAAAkU,GAAW,MAAAA,GAAU,EAAI,KAGhEV,EAAA7T,UAAA4U,SAAA,SAASb,EAAa1T,GAClB,MAA+B,IAAxBN,KAAK+N,MAAMiG,EAAK1T,IAG3BwT,EAAA7T,UAAA6U,UAAA,SAAUd,EAAa1T,GACnB,MAAOZ,GAAEqV,UAAU/U,KAAKyB,IAAIuS,EAAK1T,KAG7BwT,EAAA7T,UAAAwU,aAAR,SAAqBT,GAMjB,IAAK,GALDgB,GAAStV,EAAEwM,MAAMlM,KAAKc,KAAMpB,EAAEuU,SAAS,IACvCgB,EAAavV,EAAEwM,MAAMlM,KAAKqU,SAAU3U,EAAEuU,SAAS,IAC/CiB,EAAaxV,EAAEwM,MAAMlM,KAAKc,KAAMpB,EAAEuU,SAAS,IAC3CkB,EAAazV,EAAEwM,MAAMlM,KAAKqU,SAAU3U,EAAEuU,SAAS,IAE1C3T,EAAM,EAAGA,EAAMN,KAAKc,KAAMR,IAC/B,IAAK,GAAIkU,GAAU,EAAGA,EAAUxU,KAAKqU,SAAUG,IACvCxU,KAAKyB,IAAIuS,EAAK1T,GAAKkU,KACnBQ,EAAO1U,KACP2U,EAAWT,KACXU,EAAW5U,GAAOkU,EAClBW,EAAWX,GAAWlU,EAOlC,KAAK,GAFDF,IAAU,EAELE,EAAM,EAAGA,EAAMN,KAAKc,KAAMR,IAC/B,GAAmB,GAAf0U,EAAO1U,IAA4C,GAA/B2U,EAAWC,EAAW5U,IAAY,CAEtD,IAAK,GADCkU,GAAUU,EAAW5U,GAClBkB,EAAO,EAAGA,EAAOxB,KAAKc,KAAMU,IAC7BA,GAAQlB,IACRN,KAAKyB,IAAIuS,EAAKxS,GAAMgT,IAAW,EAEvCpU,IAAU,EAIlB,IAAK,GAAIoU,GAAU,EAAGA,EAAUxU,KAAKqU,SAAUG,IAC3C,GAA2B,GAAvBS,EAAWT,IAAgD,GAA/BQ,EAAOG,EAAWX,IAAgB,CAE9D,IAAK,GADClU,GAAM6U,EAAWX,GACdzU,EAAW,EAAGA,EAAWC,KAAKqU,SAAUtU,IACzCA,GAAYyU,IACZxU,KAAKyB,IAAIuS,EAAK1T,GAAKP,IAAY,EAEvCK,IAAU,EAIdA,GACAJ,KAAKyU,aAAaT,IAG1BF,EAAA7T,UAAAmV,UAAA,SAAUrP,GACN,MAAOA,GAAK7F,QAAQF,OAGxB8T,EAAA7T,UAAAoV,WAAA,SAAWnQ,GACP,GACIoQ,GADAlV,GAAU,CAEd,GAAG,CACCkV,GAAW,CACX,KAAiB,GAAAhB,GAAA,EAAAiB,EAAArQ,EAAAoP,EAAAiB,EAAA1P,OAAAyO,IAAK,CAAjB,GAAIvO,GAAIwP,EAAAjB,EACLtU,MAAKoV,UAAUrP,KACf3F,EAAUkV,GAAW,UAExBA,EACT,OAAOlV,IAGX0T,EAAA7T,UAAAuV,gBAAA,SAAgBtQ,GACZ,IAAiB,GAAAoP,GAAA,EAAAmB,EAAAvQ,EAAAoP,EAAAmB,EAAA5P,OAAAyO,IAAK,CAAjB,GAAIvO,GAAI0P,EAAAnB,EACT,IAAItU,KAAKoV,UAAUrP,GACf,OAAO,EAEf,OAAO,GAGX+N,EAAA7T,UAAAyV,SAAA,SAASC,GACL,MAAO3V,MAAK4V,iBAAmB5V,KAAK6V,SAASF,IAGjD7B,EAAA7T,UAAA2V,cAAA,WACI,IAAK,GAAI5B,GAAM,EAAGA,EAAMhU,KAAKoB,KAAM4S,IAC/B,IAAK,GAAI1T,GAAM,EAAGA,EAAMN,KAAKc,KAAMR,IAC/B,IAAKN,KAAK6U,SAASb,EAAK1T,GACpB,OAAO,CAGnB,QAAO,GAGXwT,EAAA7T,UAAA4V,SAAA,SAASF,GACL,IAAK,GAAI3B,GAAM,EAAGA,EAAMhU,KAAKoB,KAAM4S,IAC/B,IAAK,GAAI1T,GAAM,EAAGA,EAAMN,KAAKc,KAAMR,IAC/B,IAAKN,KAAKY,WAAWoT,EAAK1T,EAAKqV,EAAYlU,IAAIuS,EAAK1T,IAChD,OAAO,CAGnB,QAAO,GAGXwT,EAAA7T,UAAA6V,iBAAA,SAAiBH,GACb,GAAI3V,KAAK0V,SAASC,GACd,OAAO,CAEP,KAAK,GAAI3B,GAAM,EAAGA,EAAMhU,KAAKoB,KAAM4S,IAC/B,IAAK,GAAI1T,GAAM,EAAGA,EAAMN,KAAKc,KAAMR,IAE/B,IAAK,GADDyV,GAAgBJ,EAAYlU,IAAIuS,EAAK1T,GAChCkU,EAAU,EAAGA,EAAUxU,KAAKqU,SAAUG,IAC3CxU,KAAKyB,IAAIuS,EAAK1T,GAAKkU,GAAWA,GAAWuB,CAGrD,QAAO,GAGnBjC,GA1JgCD,EAAAmC,MAAnB/W,GAAA6U,c1BgxBPmC,KACA,SAAUjX,EAAQC,EAASC,G2BzxBjCF,EAAAC,QAAAC,EAAAC,EAAA,sE3B+xBM+W,KACA,SAAUlX,EAAQC,EAASC,GAEjC,YAEAK,QAAOC,eAAeP,EAAS,cAAgBQ,OAAO,G4BpyBtD,IAAAC,GAAAR,EAAA,QAMAiX,EAAA,WACI,QAAAA,GAAmBvW,EAAqBC,EAAyBuW,EAA0BC,EAA8BvW,EAAqBC,GAA3HC,KAAAJ,OAAqBI,KAAAH,WAAyBG,KAAAoW,YAA0BpW,KAAAqW,gBAA8BrW,KAAAF,OAAqBE,KAAAD,WA4DlJ,MAxDIoW,GAAAlW,UAAAC,QAAA,SAAQC,GACJ,GAAIC,IAAU,CAEVD,GAAMS,WAAWZ,KAAKoW,UAAW,EAAGpW,KAAKqW,iBACzClW,EAAMY,OAAOf,KAAKoW,UAAW,EAAGpW,KAAKqW,eACrCjW,GAAU,GAGVD,EAAMS,WAAWZ,KAAKoW,UAAWjW,EAAMW,KAAO,EAAGd,KAAKqW,iBACtDlW,EAAMY,OAAOf,KAAKoW,UAAWjW,EAAMW,KAAO,EAAGd,KAAKqW,eAClDjW,GAAU,EAGd,IAAIkV,EACJ,GAAG,CACCA,GAAW,CAEX,KAAK,GAAIhV,GAAM,EAAGA,EAAMH,EAAMW,KAAO,EAAGR,IAChCH,EAAMS,WAAWZ,KAAKoW,UAAW9V,EAAKN,KAAKqW,kBACzClW,EAAMS,WAAWZ,KAAKJ,KAAMU,EAAM,EAAGN,KAAKH,WAAaM,EAAMS,WAAWZ,KAAKF,KAAMQ,EAAM,EAAGN,KAAKD,WACjGI,EAAMS,WAAWZ,KAAKF,KAAMQ,EAAM,EAAGN,KAAKD,WAAaI,EAAMS,WAAWZ,KAAKJ,KAAMU,EAAM,EAAGN,KAAKH,aACnGM,EAAMY,OAAOf,KAAKoW,UAAW9V,EAAKN,KAAKqW,eACvCf,GAAW,EAInB,KAAK,GAAIhV,GAAM,EAAGA,EAAMH,EAAMW,KAAMR,IAAO,CACvC,GAAIH,EAAMS,WAAWZ,KAAKJ,KAAMU,EAAKN,KAAKH,UAAW,CACjD,GAAMyW,GAAehW,GAAO,IAAIH,EAAMS,WAAWZ,KAAKoW,UAAW9V,EAAM,EAAGN,KAAKqW,gBAAkBlW,EAAMS,WAAWZ,KAAKF,KAAMQ,EAAM,EAAGN,KAAKD,WACrIwW,EAAgBjW,EAAMH,EAAMW,KAAO,IAAIX,EAAMS,WAAWZ,KAAKoW,UAAW9V,EAAM,EAAGN,KAAKqW,gBAAkBlW,EAAMS,WAAWZ,KAAKF,KAAMQ,EAAM,EAAGN,KAAKD,UACnJuW,IAAiBC,IAClBpW,EAAMY,OAAOf,KAAKJ,KAAMU,EAAKN,KAAKH,UAClCyV,GAAW,GAInB,GAAInV,EAAMS,WAAWZ,KAAKF,KAAMQ,EAAKN,KAAKD,UAAW,CACjD,GAAMuW,GAAehW,GAAO,IAAIH,EAAMS,WAAWZ,KAAKoW,UAAW9V,EAAM,EAAGN,KAAKqW,gBAAkBlW,EAAMS,WAAWZ,KAAKJ,KAAMU,EAAM,EAAGN,KAAKH,WACrI0W,EAAgBjW,EAAMH,EAAMW,KAAO,IAAIX,EAAMS,WAAWZ,KAAKoW,UAAW9V,EAAM,EAAGN,KAAKqW,gBAAkBlW,EAAMS,WAAWZ,KAAKJ,KAAMU,EAAM,EAAGN,KAAKH,UACnJyW,IAAiBC,IAClBpW,EAAMY,OAAOf,KAAKF,KAAMQ,EAAKN,KAAKD,UAClCuV,GAAW,IAKnBA,IACAlV,GAAU,SACTkV,EAET,OAAOlV,IAGX+V,EAAAlW,UAAAe,QAAA,WACI,MAAM,IAEdmV,IA7DalX,GAAAkX,aA+Db,IAAAK,GAAA,mBAAAA,MAeA,MAdIA,GAAAvW,UAAAiB,SAAA,SAASC,GACL,MAAOA,GAAQC,MAAQ,GAAKD,EAAQL,MAAQ,GAGhD0V,EAAAvW,UAAAoB,OAAA,SAAOlB,GACH,GAAIP,GAAOF,EAAE2B,OAAO,EAAGlB,EAAMiB,KAAO,GAChCgV,EAAY1W,EAAE2B,OAAO,EAAGlB,EAAMiB,KAAO,GACrCqV,EAAY/W,EAAE2B,OAAO,EAAGlB,EAAMW,KAAO,GACrChB,EAAOJ,EAAE2B,OAAO,EAAGlB,EAAMiB,KAAO,GAChCE,EAA6B,GAAlB5B,EAAE2B,OAAO,EAAG,GAAU,GAAK,EACtCE,EAAOkV,EAAYnV,EACnBE,EAAOiV,EAAYnV,CACvB,OAAO,IAAI6U,GAAYvW,EAAMO,EAAMsB,IAAI7B,EAAM2B,GAAO6U,EAAWjW,EAAMsB,IAAI2U,EAAWK,GAAY3W,EAAMK,EAAMsB,IAAI3B,EAAM0B,KAE9HgV,IAfavX,GAAAuX,sB5BmzBPE,OACA,SAAU1X,EAAQC,EAASC,G6Bz3BjCF,EAAAC,QAAAC,EAAAC,EAAA,sE7B+3BMwX,KACA,SAAU3X,EAAQC,EAASC,G8Bh4BjCF,EAAAC,QAAAC,EAAAC,EAAA,sE9Bs4BMyX,KACA,SAAU5X,EAAQC,EAASC,G+Bv4BjCF,EAAAC,QAAAC,EAAAC,EAAA,4D/B64BM0X,KACA,SAAU7X,EAAQC,EAASC,GAEjC,YAEAK,QAAOC,eAAeP,EAAS,cAAgBQ,OAAO,GgC74BtD,IAAAqX,GAAA,WACI,QAAAA,GAAoBC,GAAA/W,KAAA+W,aAWxB,MAPID,GAAA7W,UAAAiB,SAAA,SAASC,GACL,MAAOnB,MAAK+W,WAAW5V,EAAQ+L,YAAYhM,SAASC,IAGxD2V,EAAA7W,UAAA+E,SAAA,SAAS7D,EAAwBhB,GAC7B,MAAOH,MAAK+W,WAAW5V,EAAQ+L,YAAYlI,SAAS7D,EAAShB,IAErE2W,IAZa7X,GAAA6X,4BhC+5BPE,KACA,SAAUhY,EAAQC,EAASC,GAEjC,YAEAK,QAAOC,eAAeP,EAAS,cAAgBQ,OAAO,GiCz6BtD,IAAAC,GAAAR,EAAA,QAEAwD,EAAAxD,EAAA,SAYA,SAAiB+X,GACb,QAAAC,GAA+CC,GAC3C,MAAOzU,GAAAI,GAAGqJ,OAAO1K,IAAI0V,EAAK,SAAAC,GAAc,WAAehU,KAAfgU,EAA2BA,EAAW3X,UAAQ2D,KAG1F,QAAA3B,KACI,MAAOiB,GAAAI,GAAGqJ,OAAOO,QAAQ,SAAA2K,GACrB,MAAA3X,GAAE4X,UAAU5X,EAAE+G,IAAI4Q,EAAa,SAAAD,GAAc,OAACA,EAAWD,IAAKC,EAAW3X,YAIjF,QAAA8X,GAA+CJ,EAAQ1X,GACnD,MAAOiD,GAAAI,GAAGqJ,OAAO1I,KACb0T,IAAKA,EACL1X,MAAOA,IAIf,QAAAiV,GAAoB8C,GAChB,MAAO9U,GAAAI,GAAGqJ,OAAOsL,QAAQ/X,EAAE+G,IAAI/G,EAAEgY,QAAQF,GAAY,SAAAG,GAAQ,OAAER,IAAKQ,EAAK,GAAIlY,MAAOkY,EAAK,OAlB7EV,EAAAC,OAAMA,EAIND,EAAAxV,IAAGA,EAMHwV,EAAAM,OAAMA,EAONN,EAAAvC,IAAGA,GAlBNzV,EAAAgY,SAAAhY,EAAAgY,ajC07BXW,KACA,SAAU5Y,EAAQC,EAASC,GkCz8BjCF,EAAAC,QAAAC,EAAAC,EAAA,sElC+8BM0Y,KACA,SAAU7Y,EAAQC,EAASC,GmCh9BjCF,EAAAC,QAAAC,EAAAC,EAAA,sEnCs9BM2Y,KACA,SAAU9Y,EAAQC,EAASC,GAEjC,YAEAK,QAAOC,eAAeP,EAAS,cAAgBQ,OAAO,GoC39BtD,IAAAC,GAAAR,EAAA,QAMA6Y,EAAA,WACI,QAAAA,GAAmB/D,EAAoB1T,EAAoBkU,GAAxCxU,KAAAgU,MAAoBhU,KAAAM,MAAoBN,KAAAwU,UAgB/D,MAZIuD,GAAA9X,UAAAC,QAAA,SAAQC,GACJ,OAAKA,EAAM0U,SAAS7U,KAAKgU,IAAKhU,KAAKM,OAC/BH,EAAMuU,IAAI1U,KAAKgU,IAAKhU,KAAKM,IAAKN,KAAKwU,UAC5B,IAMfuD,EAAA9X,UAAAe,QAAA,WACI,MAAM,IAEd+W,IAjBa9Y,GAAA8Y,UAmBb,IAAAC,GAAA,mBAAAA,MAUA,MATIA,GAAA/X,UAAAiB,SAAA,SAASC,GACL,MAAOA,GAAQC,MAAQ,GAAKD,EAAQL,MAAQ,GAGhDkX,EAAA/X,UAAAoB,OAAA,SAAOlB,GACH,GAAI6T,GAAMtU,EAAE2B,OAAO,EAAGlB,EAAMiB,KAAO,GAC/Bd,EAAMZ,EAAE2B,OAAO,EAAGlB,EAAMW,KAAO,EACnC,OAAO,IAAIiX,GAAS/D,EAAK1T,EAAKH,EAAMsB,IAAIuS,EAAK1T,KAErD0X,IAVa/Y,GAAA+Y,mBpC0+BPC,KACA,SAAUjZ,EAAQC,EAASC,GAEjC,YqCtgCA,SAAAgZ,GAAuB/F,GACnB,GAAIgG,GAAIhG,EAAItM,MACZ,OAAIsS,GAAI,GAAM,GACFhG,EAAIgG,EAAI,EAAI,GAAKhG,EAAIgG,EAAI,IAAM,EAEhChG,GAAKgG,EAAI,GAAK,GAI7B,QAAAC,GAA8BjG,GAC1B,GAAIgG,GAAIhG,EAAItM,OACRwS,EAAMF,EAAI,GAAM,EAAIA,EAAI,GAAKA,EAAI,GAAK,CAC1C,OAAOD,GAAO/F,EAAImG,MAAM,EAAGD,IAG/B,QAAAE,GAA8BpG,GAC1B,GAAIgG,GAAIhG,EAAItM,OACR7D,EAAQmW,EAAI,GAAM,EAAIA,EAAI,GAAKA,EAAI,GAAK,CAC5C,OAAOD,GAAO/F,EAAImG,MAAMtW,IrCs/B5BzC,OAAOC,eAAeP,EAAS,cAAgBQ,OAAO,IqCxgCtDR,EAAAiZ,SASAjZ,EAAAmZ,gBAMAnZ,EAAAsZ,iBrCmhCMC,KACA,SAAUxZ,EAAQC,EAASC,GsCniCjCF,EAAAC,QAAAC,EAAAC,EAAA,oEtCyiCMsZ,KACA,SAAUzZ,EAAQC,EAASC,GAEjC,YAEAK,QAAOC,eAAeP,EAAS,cAAgBQ,OAAO,GACtD,IAAI6E,GAAUpF,EAAoB,QuC/iClCQ,EAAAR,EAAA,QACAwZ,EAAAxZ,EAAA,OACAA,GAAA,QACAA,EAAA,OACA,IAAAyZ,GAAAzZ,EAAA,QACA0Z,EAAA1Z,EAAA,QAEA2Z,EAAA3Z,EAAA,QACA4Z,EAAA5Z,EAAA,QACA6Z,EAAA7Z,EAAA,QACA8Z,EAAA9Z,EAAA,QAOA+Z,EAAA,SAAAvU,GAAA,QAAAuU,KvC4iCQ,MAAkB,QAAXvU,GAAmBA,EAAOC,MAAM3E,KAAM4E,YAAc5E,KuCliCnE,MAVqCsE,GAAAO,UAAAoU,EAAAvU,GACjCuU,EAAAhZ,UAAAiZ,OAAA,SAAOC,GACH,MACIT,GAAAU,EAAA,UACIV,EAAAU,EAAA,MAAIC,MAAM,eAAkBF,EAAMrT,EAAI,EAAC,KACvC4S,EAAAU,EAAA,MAAIC,MAAM,iBAAiBC,MAAOH,EAAMI,KAAKC,KAAKpV,YAAa+U,EAAMI,KAAKpL,MAC1EuK,EAAAU,EAAA,MAAIC,MAAM,kBAAkBR,EAAAlV,eAAewV,EAAMI,KAAKE,SAItER,GAVqCP,EAAAgB,WAiBrCC,EAAA,SAAAjV,GAAA,QAAAiV,KvCwiCQ,MAAkB,QAAXjV,GAAmBA,EAAOC,MAAM3E,KAAM4E,YAAc5E,KuCxgCnE,MAhCsCsE,GAAAO,UAAA8U,EAAAjV,GAClCiV,EAAA1Z,UAAAiZ,OAAA,SAAOC,GACH,MACIT,GAAAU,EAAA,SAAOC,MAAM,aACTX,EAAAU,EAAA,aACAV,EAAAU,EAAA,UACIV,EAAAU,EAAA,MAAIC,MAAM,eAAa,MACvBX,EAAAU,EAAA,MAAIC,MAAM,kBAAgB,QAC1BX,EAAAU,EAAA,MAAIC,MAAM,kBAAgB,UAI9BX,EAAAU,EAAA,iBAEoBhW,KAAhB+V,EAAMS,OAAuBT,EAAMS,MAAM/T,OAAS,EAC9CnG,EAAE+G,IAAI0S,EAAMS,MAAO,SAACC,EAAW/T,GAC3B,MAAA4S,GAAAU,EAACH,GAAuBnT,EAAGA,EAAGyT,KAAMM,MAExCnB,EAAAU,EAAA,MAAIC,MAAM,kBACNX,EAAAU,EAAA,MAAIU,QAAS,OAEW1W,KAAhB+V,EAAMS,MACF,WACA,kBASxCD,GAhCsCjB,EAAAgB,WAsDtCK,EAAA,SAAArV,GACI,QAAAqV,GAAYZ,GAAZ,GAAApN,GACIrH,EAAAI,KAAA9E,OAAOA,IvC4gCP,OuC3gCA+L,GAAKiO,OACD5N,WAAQhJ,IAEZ2I,EAAKkO,YAAYd,GvCwgCVpN,EuC76Bf,MAjG6BzH,GAAAO,UAAAkV,EAAArV,GASzBqV,EAAA9Z,UAAAia,0BAAA,SAA0BC,GAClBna,KAAKmZ,MAAMhY,UAAYgZ,EAAUhZ,SACjCnB,KAAKia,YAAYE,IAIjBJ,EAAA9Z,UAAAga,YAAR,SAAoBd,GAApB,GAAApN,GAAA/L,IACI2Y,GAAArL,OAAO7L,IAAI0X,EAAMhY,SAASqC,KAAK,SAAAgK,GAC3BzB,EAAKqO,UACDhO,OAAQoB,OAKpBuM,EAAA9Z,UAAAiZ,OAAA,SAAOC,EAAmBa,GACtB,GAAMK,GAAQlB,EAAMkB,MACdjO,EAAS4N,EAAM5N,MAErB,QAAchJ,KAAViX,OAAkCjX,KAAXgJ,EAAsB,CAC7C,GAAIkO,GAAQlO,EAAOqB,OAASrB,EAAOsB,cAAgBtB,EAAOuB,KAEtD4M,EAAsB,SAACxM,GACvB,GAAIyM,GAAazM,EAAQuM,EAAQ,GACjC,OACI5B,GAAAU,EAAA,UAAKrL,EvCqgCL,IuCrgCY2K,EAAAU,EAAA,SAAOC,MAAM,gBvCugCrB,IuCvgCsCmB,EAAWC,QAAQ,GvCygCzD,OuCrgCZ,OACI/B,GAAAU,EAAA,OAAKC,MAAM,SACPX,EAAAU,EAAA,UACIV,EAAAU,EAAA,WACIV,EAAAU,EAAA,0BACAV,EAAAU,EAAA,UAAKkB,IAET5B,EAAAU,EAAA,UACIV,EAAAU,EAAA,WACIV,EAAAU,EAAA,oBACCmB,EAAoBnO,EAAOqB,SAEhCiL,EAAAU,EAAA,WACIV,EAAAU,EAAA,UvCqgCA,UuCrgCWV,EAAAU,EAAA,mBvCugCX,WuCtgCCmB,EAAoBnO,EAAOsB,gBAEhCgL,EAAAU,EAAA,WACIV,EAAAU,EAAA,kBACCmB,EAAoBnO,EAAOuB,QAIpC+K,EAAAU,EAAA,WACIV,EAAAU,EAAA,0BACAV,EAAAU,EAAA,UAAKP,EAAAlV,eAAe0W,EAAMnI,QAE9BwG,EAAAU,EAAA,UACIV,EAAAU,EAAA,WACIV,EAAAU,EAAA,uBACAV,EAAAU,EAAA,UAAKP,EAAAlV,eAAe0W,EAAM3H,WAIlCgG,EAAAU,EAAA,WACIV,EAAAU,EAAA,6BAEJV,EAAAU,EAAA,UACIV,EAAAU,EAAA,WACIV,EAAAU,EAAA,UvC+/BA,SuC//BUV,EAAAU,EAAA,uBACVV,EAAAU,EAAA,UAAKP,EAAAlV,eAAe0W,EAAMjC,iBAE9BM,EAAAU,EAAA,WACIV,EAAAU,EAAA,UvCggCA,UuChgCWV,EAAAU,EAAA,uBACXV,EAAAU,EAAA,UAAKP,EAAAlV,eAAe0W,EAAMnC,UAE9BQ,EAAAU,EAAA,WACIV,EAAAU,EAAA,UvCigCA,SuCjgCUV,EAAAU,EAAA,uBACVV,EAAAU,EAAA,UAAKP,EAAAlV,eAAe0W,EAAM9B,iBAE9BG,EAAAU,EAAA,WACIV,EAAAU,EAAA,iBACAV,EAAAU,EAAA,UAAKP,EAAAlV,eAAe0W,EAAMK,UAO9C,MAAO,OAEnBX,GAjG6BrB,EAAAgB,WA6G7BiB,EAAA,SAAAjW,GACI,QAAAiW,GAAYxB,GAAZ,GAAApN,GACIrH,EAAAI,KAAA9E,OAAOA,IvC0/BP,OuCz/BA+L,GAAKiO,OACDJ,UAAOxW,GACPiX,UAAOjX,IAEX2I,EAAK6O,WAAWzB,GvCq/BTpN,EuCx8Bf,MApDwCzH,GAAAO,UAAA8V,EAAAjW,GAUpCiW,EAAA1a,UAAAia,0BAAA,SAA0BC,GAClBna,KAAKmZ,MAAMhY,UAAYgZ,EAAUhZ,SACjCnB,KAAK4a,WAAWT,IAITQ,EAAAE,eAAf,SAA8BC,GAC1B,GAAIC,GAAwBrb,EAAE+G,IAAIqU,EAAY,QAC1C5I,EAAO6G,EAAW7G,KAAK6I,EAC3B,QACIhN,MAAOgN,EAAYlV,OACnBqM,KAAMA,EACNQ,OAAQqG,EAAWrG,OAAOqI,EAAa7I,GACvCkG,cAAeY,EAAiBZ,cAAc2C,GAC9C7C,OAAQc,EAAiBd,OAAO6C,GAChCxC,cAAeS,EAAiBT,cAAcwC,GAC9CL,IAAKhb,EAAEgb,IAAIK,KAIXJ,EAAA1a,UAAA2a,WAAR,SAAmBzB,GAAnB,GAAApN,GAAA/L,IACI4Y,GAAAoC,MAAMC,eAAe9B,EAAMhY,SAASqC,KAAK,SAAAsX,GACrC/O,EAAKqO,UACDR,MAAOla,EAAEwb,KAAKJ,EAAY,IAC1BT,MAAOM,EAAmBE,eAAeC,QAKrDH,EAAA1a,UAAAiZ,OAAA,SAAOC,EAAuBa,GAC1B,MACItB,GAAAU,EAAA,OAAKC,MAAM,mBACPX,EAAAU,EAAA,OAAKC,MAAM,mBACNP,EAAAqC,cAAchC,EAAMhY,UAGzBuX,EAAAU,EAACO,GAAwBC,MAAOI,EAAMJ,QACtClB,EAAAU,EAAA,WACAV,EAAAU,EAACW,GAAe5Y,QAASgY,EAAMhY,QAASkZ,MAAOL,EAAMK,UAIrEM,GApDwCjC,EAAAgB,UAA3Bza,GAAA0b,sBvCuiCPS,KACA,SAAUpc,EAAQC,EAASC,GAEjC,YAEAK,QAAOC,eAAeP,EAAS,cAAgBQ,OAAO,GwCjvCtD,IAAAC,GAAAR,EAAA,QAMAmc,EAAA,WACI,QAAAA,GAAmBzb,EAAqBC,EAAyBC,EAAqBC,GAAnEC,KAAAJ,OAAqBI,KAAAH,WAAyBG,KAAAF,OAAqBE,KAAAD,WA2B1F,MAvBIsb,GAAApb,UAAAC,QAAA,SAAQC,GAGJ,IAAK,GAFDC,IAAU,EAELE,EAAM,EAAGA,EAAMH,EAAMW,KAAMR,IAAO,CACvC,GAAMgb,GAAYnb,EAAMS,WAAWZ,KAAKJ,KAAMU,EAAKN,KAAKH,UAClD0b,EAAYpb,EAAMS,WAAWZ,KAAKF,KAAMQ,EAAKN,KAAKD,WAEnDub,GAAaC,GACdpb,EAAMY,OAAOf,KAAKF,KAAMQ,EAAKN,KAAKD,UAClCK,GAAU,GAELkb,IAAcC,IACnBpb,EAAMY,OAAOf,KAAKJ,KAAMU,EAAKN,KAAKH,UAClCO,GAAU,GAIlB,MAAOA,IAGXib,EAAApb,UAAAe,QAAA,WACI,MAAM,IAEdqa,IA5Bapc,GAAAoc,gBA8Bb,IAAAG,GAAA,mBAAAA,MAcA,MAbIA,GAAAvb,UAAAiB,SAAA,SAASC,GACL,MAAOA,GAAQC,MAAQ,GAAKD,EAAQL,MAAQ,GAGhD0a,EAAAvb,UAAAoB,OAAA,SAAOlB,GACH,GAEIL,GAFAQ,EAAMZ,EAAE2B,OAAO,EAAGlB,EAAMW,KAAO,GAC/BlB,EAAOF,EAAE2B,OAAO,EAAGlB,EAAMiB,KAAO,EAEpC,IACItB,EAAOJ,EAAE2B,OAAO,EAAGlB,EAAMiB,KAAO,SAC3BtB,GAAQF,EACjB,OAAO,IAAIyb,GAAezb,EAAMO,EAAMsB,IAAI7B,EAAMU,GAAMR,EAAMK,EAAMsB,IAAI3B,EAAMQ,KAEpFkb,IAdavc,GAAAuc,yBxCkwCPC,KACA,SAAUzc,EAAQC,EAASC,GAEjC,YAEAK,QAAOC,eAAeP,EAAS,cAAgBQ,OAAO,GACtD,IAAI6E,GAAUpF,EAAoB,QyC5yClCQ,EAAAR,EAAA,QAEA2U,EAAA3U,EAAA,QACAwc,EAAAxc,EAAA,QAEAyc,EAAA,SAAAjX,GAAA,QAAAiX,KzC8yCQ,MAAkB,QAAXjX,GAAmBA,EAAOC,MAAM3E,KAAM4E,YAAc5E,KyC5xCnE,MAlBiCsE,GAAAO,UAAA8W,EAAAjX,GACtBiX,EAAAta,OAAP,SAAcF,GACV,MAAO,IAAIwa,GAAYjc,EAAEwM,MAAM/K,EAAQC,KAAM,SAAA4S,GAAO,MAAAtU,GAAEkc,QAAQlc,EAAEmc,MAAM1a,EAAQL,SAASK,IAG3Fwa,EAAA1b,UAAA6b,OAAA,SAAO9H,EAAaQ,GAChB,IAAK,GAAIlU,GAAM,EAAGA,EAAMN,KAAKc,KAAMR,IAC/B,GAAIN,KAAKyB,IAAIuS,EAAK1T,KAASkU,EACvB,MAAOlU,EAEf,QAAQ,GAGZqb,EAAA1b,UAAA8b,WAAA,SAAW7W,GACP,GAAI8W,GAAaN,EAAA5H,WAAWC,KAAK/T,KAAKmB,QAEtC,OADA6a,GAAW3G,WAAWnQ,GACf8W,EAAWtG,SAAS1V,OAEnC2b,GAlBiC9H,EAAAmC,MAApB/W,GAAA0c,ezCs0CPM,OACA,SAAUjd,EAAQC,KAMlBid,KACA,SAAUld,EAAQC,KAMlBkd,KACA,SAAUnd,EAAQC,EAASC,GAEjC,YAEAK,QAAOC,eAAeP,EAAS,cAAgBQ,OAAO,GACtD,IAAI6E,GAAUpF,EAAoB,Q0C/1ClCkd,EAAAld,EAAA,QACAQ,EAAAR,EAAA,QACAwZ,EAAAxZ,EAAA,QACAmd,EAAAnd,EAAA,QACAod,EAAApd,EAAA,QACAqd,EAAArd,EAAA,QAEAsd,EAAAtd,EAAA,QACAud,EAAAvd,EAAA,OACAA,GAAA,OACA,IAAAwd,GAAAxd,EAAA,QAUAyd,EAAA,SAAAjY,GAGI,QAAAiY,KAAA,GAAA5Q,GACIrH,EAAAI,KAAA9E,OAAOA,I1Ci2CP,O0Cp2CI+L,GAAA6Q,mBAAqB,GAAIH,GAAAI,4BAA4B,WAAM,MAAA9Q,GAAK+Q,aAiBhE/Q,EAAA+Q,SAAW,WACf/Q,EAAKqO,SAAS,SAAAJ,GACV,OACI+C,SAAU/C,EAAM+C,YAhBxBhR,EAAKiO,OACD+C,SAAS,G1C+1CNhR,E0ClvCf,MAnH4BzH,GAAAO,UAAA8X,EAAAjY,GAUxBiY,EAAA1c,UAAAia,0BAAA,SAA0BC,GAClBna,KAAKmZ,MAAMpT,OAASoU,EAAUpU,MAC9B/F,KAAKoa,UACD2C,SAAS,KAabJ,EAAA1c,UAAA+c,YAAR,SAAoB7D,GAChB,GAAIpT,GAAOoT,EAAMpT,IACjB,IAAIA,YAAgBsW,GAAA1c,aAChB,MACI+Y,GAAAU,EAAA,aACIV,EAAAU,EAAA,UACIV,EAAAU,EAAA,UACIV,EAAAU,EAACsD,EAAAO,2BAA0BjJ,IAAKjO,EAAKnG,KAAM4U,QAASzO,EAAKlG,YAE7D6Y,EAAAU,EAAA,UACIV,EAAAU,EAACsD,EAAAQ,eAAc/O,KAAK,mBAExBuK,EAAAU,EAAA,UACIV,EAAAU,EAACsD,EAAAO,2BAA0BjJ,IAAKjO,EAAKjG,KAAM0U,QAASzO,EAAKhG,aAMxE,IAAIgG,YAAgBuW,GAAAnG,YACrB,MACIuC,GAAAU,EAAA,aACIV,EAAAU,EAAA,UACIV,EAAAU,EAAA,UACIV,EAAAU,EAACsD,EAAAO,2BAA0BjJ,IAAKjO,EAAKnG,KAAM4U,QAASzO,EAAKlG,YAE7D6Y,EAAAU,EAAA,UACIV,EAAAU,EAACsD,EAAAO,2BAA0BjJ,IAAKjO,EAAKqQ,UAAW5B,QAASzO,EAAKsQ,gBAC9DqC,EAAAU,EAAA,OAAKC,MAAM,gBACPX,EAAAU,EAACsD,EAAAQ,eAAc/O,KAAK,mBAG5BuK,EAAAU,EAAA,UACIV,EAAAU,EAACsD,EAAAO,2BAA0BjJ,IAAKjO,EAAKjG,KAAM0U,QAASzO,EAAKhG,aAMxE,IAAIgG,YAAgBwW,GAAAY,cACrB,MACIzE,GAAAU,EAAA,aACIV,EAAAU,EAAA,UACIV,EAAAU,EAAA,UACIV,EAAAU,EAACsD,EAAAO,2BAA0BjJ,IAAKjO,EAAKqX,QAAS5I,QAASzO,EAAKsX,eAEhE3E,EAAAU,EAAA,UACIV,EAAAU,EAACsD,EAAAQ,eAAc/O,KAAK,oBAExBuK,EAAAU,EAAA,UACIV,EAAAU,EAACsD,EAAAO,2BAA0BjJ,IAAKjO,EAAKuX,SAAU9I,QAASzO,EAAKwX,iBAM5E,IAAIxX,YAAgByW,GAAAnB,eACrB,MACI3C,GAAAU,EAAA,aACIV,EAAAU,EAAA,UACIV,EAAAU,EAAA,UACIV,EAAAU,EAACsD,EAAAO,2BAA0BjJ,IAAKjO,EAAKnG,KAAM4U,QAASzO,EAAKlG,aAGjE6Y,EAAAU,EAAA,UACIV,EAAAU,EAAA,UACIV,EAAAU,EAACsD,EAAAO,2BAA0BjJ,IAAKjO,EAAKjG,KAAM0U,QAASzO,EAAKhG,aAOzE,MAAM,IAAI2G,OAAM,0BAGxBiW,EAAA1c,UAAAiZ,OAAA,SAAOC,EAAkBa,GACrB,MACItB,GAAAU,EAAA,MAAA9U,EAAAiJ,UAAK8L,MAAO+C,GACRoB,cAAc,EACdC,eAAgBzD,EAAM+C,QACtBW,eAAgB1D,EAAM+C,WAClB/c,KAAK4c,oBACTlE,EAAAU,EAAA,SAAOC,MAAM,QACRrZ,KAAKgd,YAAY7D,MAKtCwD,GAnH4BjE,EAAAgB,WAyH5BiE,EAAA,SAAAjZ,GACI,QAAAiZ,KAAA,GAAA5R,GACIrH,EAAAI,KAAA9E,OAAOA,I1CyzCP,O0C3yCI+L,GAAA+Q,SAAW,SAAC3J,GAChBpH,EAAKqO,SAAS,SAAAJ,GACV,OACI+C,SAAU/C,EAAM+C,YAhBxBhR,EAAKiO,OACD+C,SAAS,G1CuzCNhR,E0C9wCf,MA7CoCzH,GAAAO,UAAA8Y,EAAAjZ,GAQhCiZ,EAAA1d,UAAAia,0BAAA,SAA0BC,GAClBna,KAAKmZ,MAAMjU,QAAUiV,EAAUjV,OAC/BlF,KAAKoa,UACD2C,SAAS,KAarBY,EAAA1d,UAAAiZ,OAAA,SAAOC,EAAmBa,GACtB,MACItB,GAAAU,EAAA,OAAKC,MAAM,SACPX,EAAAU,EAAA,UAAQC,MAAM,gBAAgBuE,QAAS5d,KAAK8c,UAAQ,UACpDpE,EAAAU,EAAA,OAAKC,MAAO+C,GACRyB,oBAAoB,EACpBC,gBAAiB9D,EAAM+C,QACvBgB,gBAAiB/D,EAAM+C,WAEtBrd,EAAE+G,IAAI/G,EAAEse,OAAO7E,EAAMjU,MAAO,SAAAa,GAAQ,MAAc,KAAdA,EAAK/E,YAAoC,SAAA+E,GAC1E,MAAA2S,GAAAU,EAACuD,GAAc5W,KAAMA,MAGpBrG,EAAE+G,IAAI/G,EAAEse,OAAO7E,EAAMjU,MAAO,SAAAa,GAAQ,MAAc,KAAdA,EAAK/E,YAAkC,SAAA+E,GACxE,MAAA2S,GAAAU,EAACuD,GAAc5W,KAAMA,SAOjD4X,GA7CoCjF,EAAAgB,UAAvBza,GAAA0e,kB1C01CPM,KACA,SAAUjf,EAAQC,EAASC,GAEjC,Y2C1+CA,SAAAgf,KAGI,MAA8B,gBAAhBC,a3Cy+ClB5e,OAAOC,eAAeP,EAAS,cAAgBQ,OAAO,I2C5+CtDR,EAAAif,mB3Cu/CME,KACA,SAAUpf,EAAQC,EAASC,G4Cx/CjCF,EAAAC,QAAAC,EAAAC,EAAA,sE5C8/CMkf,KACA,SAAUrf,EAAQC,EAASC,G6C//CjCF,EAAAC,QAAAC,EAAAC,EAAA,sE7CqgDMmf,KACA,SAAUtf,EAAQC,EAASC,GAEjC,YAEAK,QAAOC,eAAeP,EAAS,cAAgBQ,OAAO,GACtD,IAAI6E,GAAUpF,EAAoB,Q8C3gDlCQ,EAAAR,EAAA,QACAqf,EAAArf,EAAA,QAEAmd,EAAAnd,EAAA,QACAod,EAAApd,EAAA,QACAqd,EAAArd,EAAA,QAEAsf,EAAAtf,EAAA,QACAsd,EAAAtd,EAAA,QAEAqF,EAAArF,EAAA,QAGAuf,EAAA,mBAAAA,MAoIA,MA7HIA,GAAAxe,UAAAiB,SAAA,SAASC,GACL,MAAOsd,GAAiB1Z,YAAY7D,SAASC,IAG3Csd,EAAAxe,UAAA+E,SAAN,SAAe7D,EAAwBhB,G9CmgDnC,MAAOmE,GAAQW,UAAUjF,SAAM,OAAQ,GAAQ,WAC3C,GAAIoF,GAAIF,CACR,OAAOZ,GAAQa,YAAYnF,KAAM,SAAU0e,GACvC,OAAQA,EAAGrZ,OACP,IAAK,G8CrgDP,MADVpC,SAAQE,MAAM,SACdiC,EAAApF,MAAU,EAAMue,EAAAI,Q9CygDJ,KAAK,G8C//CjB,MAVAvZ,GAAKwZ,GAAKF,EAAAnZ,OAEVvF,KAAK6e,cAEL7e,KAAK8e,YAAY3e,GAEb+E,EAAQlF,KAAK+e,cAAc5e,GAC/B+E,EAAQlF,KAAKgf,WAAW7e,EAAO+E,GAE/BlF,KAAKif,iBACL,EAAO/Z,SAGHuZ,EAAAxe,UAAA4e,YAAR,WACI5b,QAAQE,MAAM,eACdnD,KAAK4e,GAAGM,iBAAiB,aAAc,QACvClf,KAAK4e,GAAGM,iBAAiB,oBAAqB,OAE9C,IAAIC,GAAMnf,KAAK4e,GAAGQ,WAClBpf,MAAKqf,IAAMrf,KAAK4e,GAAGU,WAAWH,GAC9Bnf,KAAK4e,GAAGW,kBAAkBvf,KAAKqf,IAAKrf,KAAK4e,GAAGY,cAC5Cxf,KAAK4e,GAAGa,WAAWN,IAGfV,EAAAxe,UAAAyf,IAAR,SAAYC,GAER,MAAO3f,MAAK4e,GAAGgB,oBAAoB5f,KAAKqf,IAAKM,GAASE,QAGlDpB,EAAAxe,UAAAgf,cAAR,WACIhc,QAAQE,MAAM,iBACdnD,KAAK4e,GAAGkB,YAAY9f,KAAKqf,MAGnBZ,EAAAxe,UAAA8e,cAAV,SAAwB5e,GAEpB,IADA,GAAI+E,OACIlF,KAAK+f,oBAAoB,CAC7B,GAAIha,GAAO0Y,EAAiB1Z,YAAY1D,OAAOlB,EAC/C+E,GAAMc,KAAKD,EAEX,IAAID,GAAIZ,EAAMW,OAAS,EACnBma,EAAavB,EAAiBwB,kBAAkBla,EACpD/F,MAAK0f,IAAI,cAAcM,EAAU,YAAYla,EAAC,MAElD,MAAOZ,IAGDuZ,EAAAxe,UAAA+e,WAAV,SAAqB7e,EAAoB+E,GACrCjC,QAAQE,MAAM,sBAAsB+B,EAAMW,OAE1C,IAAIqa,GAAelgB,KAAK0f,IAAI,mBAC5Bzc,SAAQE,MAAM+c,EACd,IAAIC,GAASzgB,EAAE+G,IAAIyZ,EAAaE,MAAM,QAAS,SAAAta,GAAK,MAAAua,UAASva,IAI7D,OAHAZ,GAAQxF,EAAEse,OAAO9Y,EAAO,SAACa,EAAMD,GAAM,MAAApG,GAAE4gB,SAASH,EAAQra,KAExD7C,QAAQE,MAAM,qBAAqB+B,EAAMW,QAClCX,GAGHuZ,EAAAxe,UAAA8f,iBAAR,WAGI,MADyB,SADV/f,KAAK0f,IAAI,gBAKpBjB,EAAAxe,UAAA6e,YAAR,SAAoB3e,GAChB8C,QAAQE,MAAM,cACd,KAAK,GAAI6Q,GAAM,EAAGA,EAAM7T,EAAMiB,KAAM4S,IAAO,CAEvC,IAAK,GADDuM,GAAK,GACA/L,EAAU,EAAGA,EAAUrU,EAAMkU,SAAUG,IAAW,CACvD,GAAIhC,GAAI,IAAIwB,EAAMQ,CAClBxU,MAAK0f,IAAI,kBAAkBlN,EAAC,SAC5BxS,KAAK0f,IAAI,sBAAsBlN,EAAC,QAAQA,EAAC,IAAIrS,EAAMW,KAAI,OACvDyf,GAAM,IAAM/N,EAGhBxS,KAAK0f,IAAI,oBAAoBa,EAAE,MAInC,IAAK,GADDC,GAAK,GACAxM,EAAM,EAAGA,EAAM7T,EAAMiB,KAAM4S,IAChC,IAAK,GAAI1T,GAAM,EAAGA,EAAMH,EAAMW,KAAMR,IAAO,CACvC,GAAIkU,GAAUrU,EAAMsB,IAAIuS,EAAK1T,GACzBkS,EAAI,IAAIwB,EAAMQ,CAClBgM,IAAM,cAAchO,EAAC,IAAIlS,EAAG,IAGpCN,KAAK0f,IAAI,cAAcc,EAAE,OAGd/B,EAAAwB,kBAAf,SAAiCla,GAC7B,GAAIA,YAAgBsW,GAAA1c,aAAc,CAC9B,GAAI8gB,GAAK,IAAI1a,EAAKnG,KAAOmG,EAAKlG,SAC1B6gB,EAAK,IAAI3a,EAAKjG,KAAOiG,EAAKhG,QAC9B,OAAO,UAAU0gB,EAAE,OAAOC,EAAE,WAAWD,EAAE,OAAOC,EAAE,QAEjD,GAAI3a,YAAgBuW,GAAAnG,YAAa,CAClC,GAAIsK,GAAK,IAAI1a,EAAKnG,KAAOmG,EAAKlG,SAC1B8gB,EAAU,IAAI5a,EAAKqQ,UAAYrQ,EAAKsQ,cACpCqK,EAAK,IAAI3a,EAAKjG,KAAOiG,EAAKhG,QAC9B,OAAO,eAAe4gB,EAAO,OAAOF,EAAE,WAAWE,EAAO,OAAOD,EAAE,iBAAiBC,EAAO,OAAOD,EAAE,WAAWC,EAAO,OAAOF,EAAE,SAE5H,GAAI1a,YAAgBwW,GAAAY,cAAe,CAGpC,MAAO,OAFK,IAAIpX,EAAKqX,QAAUrX,EAAKsX,aAElB,KADL,IAAItX,EAAKuX,SAAWvX,EAAKwX,cACV,IAE3B,GAAIxX,YAAgByY,GAAAzG,SAAU,CAE/B,MAAO,OADC,IAAIhS,EAAKiO,IAAMjO,EAAKyO,SACd,IAAIzO,EAAKzF,IAAG,IAEzB,GAAIyF,YAAgByW,GAAAnB,eAAgB,CACrC,GAAIoF,GAAK,IAAI1a,EAAKnG,KAAOmG,EAAKlG,SAC1B6gB,EAAK,IAAI3a,EAAKjG,KAAOiG,EAAKhG,QAC9B,OAAO,MAAM0gB,EAAE,IAAIC,EAAE,IAGrB,KAAM,IAAIha,OAAM,0BAhIT+X,EAAA1Z,YAA2B,GAAIR,GAAA0B,kBAkIlDwY,IApIaxf,GAAAwf,oB9CwoDPmC,KACA,SAAU5hB,EAAQC,EAASC,G+CtpDjCF,EAAAC,QAAAC,EAAAC,EAAA,sE/C4pDM0hB,KACA,SAAU7hB,EAAQC,EAASC,GAEjC,YAEAK,QAAOC,eAAeP,EAAS,cAAgBQ,OAAO,GACtD,IAAI6E,GAAUpF,EAAoB,QgDlqDlCwZ,EAAAxZ,EAAA,OACAA,GAAA,OAGA,IAAImE,OAEJ,SAAoByd,GAChBA,EAAEpV,OAAOqV,QAAQ,SAAA5J,GAAO,MAAA9T,GAAM8T,GAAO2J,EAAE3J,MAGjCjY,EAAA,QAOV,IAAAge,GAAA,SAAAxY,GAAA,QAAAwY,KhD6pDQ,MAAkB,QAAXxY,GAAmBA,EAAOC,MAAM3E,KAAM4E,YAAc5E,KgDvpDnE,MANmCsE,GAAAO,UAAAqY,EAAAxY,GAC/BwY,EAAAjd,UAAAiZ,OAAA,SAAOC,GACH,MACIT,GAAAU,EAAA,OAAKC,MAAM,OAAO2H,IAAK3d,EAAM,oBAAoB8V,EAAMhL,KAAI,WAGvE+O,GANmCxE,EAAAgB,UAAtBza,GAAAie,eAab,IAAAD,GAAA,SAAAvY,GAAA,QAAAuY,KhD2pDQ,MAAkB,QAAXvY,GAAmBA,EAAOC,MAAM3E,KAAM4E,YAAc5E,KgDrpDnE,MAN+CsE,GAAAO,UAAAoY,EAAAvY,GAC3CuY,EAAAhd,UAAAiZ,OAAA,SAAOC,GACH,MACIT,GAAAU,EAAC8D,GAAc/O,KAAM,gBAAgBgL,EAAMnF,IAAM,IAAI5P,SAAS,KAAM+U,EAAM3E,QAAU,MAGhGyI,GAN+CvE,EAAAgB,UAAlCza,GAAAge,2BAQb,IAAAgE,GAAA,SAAAvc,GAAA,QAAAuc,KhD8pDQ,MAAkB,QAAXvc,GAAmBA,EAAOC,MAAM3E,KAAM4E,YAAc5E,KgDxpDnE,MAN+CsE,GAAAO,UAAAoc,EAAAvc,GAC3Cuc,EAAAhhB,UAAAiZ,OAAA,SAAOC,GACH,MACIT,GAAAU,EAAC8D,GAAc/O,KAAM,gBAAgBgL,EAAMnF,IAAM,IAAI5P,SAAS,KAAM+U,EAAM3E,QAAU,MAGhGyM,GAN+CvI,EAAAgB,UAAlCza,GAAAgiB,6BhD0qDPC,KACA,SAAUliB,EAAQC,EAASC,GAEjC,YiDjtDA,SAAAiiB,GAAmCC,GAC/B,GAAIjiB,GAAc,IAElB,OAAO,YAAM,MAAM,QAANA,EAAcA,EAAIiiB,IAAcjiB,GjDgtDjDI,OAAOC,eAAeP,EAAS,cAAgBQ,OAAO,IiDntDtDR,EAAAkiB,mBjD6tDME,KACA,SAAUriB,EAAQC,EAASC,GkDhuDjCF,EAAAC,QAAAC,EAAAC,EAAA,sElDsuDMmiB,OACA,SAAUtiB,EAAQC,EAASC,GmDvuDjCF,EAAAC,QAAAC,EAAAC,EAAA,sEnD6uDMoiB,KACA,SAAUviB,EAAQC,EAASC,GoD9uDjCF,EAAAC,QAAAC,EAAAC,EAAA,sEpDovDMqiB,KACA,SAAUxiB,EAAQC,EAASC,GAEjC,YAEAK,QAAOC,eAAeP,EAAS,cAAgBQ,OAAO,GACtD,IAAI6E,GAAUpF,EAAoB,QqDxvDlCsF,EAAAtF,EAAA,QAEAuiB,EAAA,SAAA/c,GAAA,QAAA+c,KrD2vDQ,MAAkB,QAAX/c,GAAmBA,EAAOC,MAAM3E,KAAM4E,YAAc5E,KqDvvDnE,MAJyCsE,GAAAO,UAAA4c,EAAA/c,GACrC+c,EAAAxhB,UAAA8b,WAAA,SAAW5b,EAAoB+E,GAC3B,MAAO/E,GAAM4b,WAAW7W,IAEhCuc,GAJyCjd,EAAAkd,uBAA5BziB,GAAAwiB,uBrDuwDPE,KACA,SAAU3iB,EAAQC,EAASC,GsD5wDjCF,EAAAC,QAAAC,EAAAC,EAAA,sEtDkxDMyiB,KACA,SAAU5iB,EAAQC,EAASC,GuDnxDjCF,EAAAC,QAAAC,EAAAC,EAAA,sEvDyxDM0iB,KACA,SAAU7iB,EAAQC,EAASC,GwD1xDjCF,EAAAC,QAAAC,EAAAC,EAAA,qExDgyDM2iB,KACA,SAAU9iB,EAAQC,EAASC,GyDjyDjCF,EAAAC,QAAAC,EAAAC,EAAA,sEzDuyDM4iB,OACA,SAAU/iB,EAAQC,EAASC,GAEjC,YAEAK,QAAOC,eAAeP,EAAS,cAAgBQ,OAAO,GACtD,IAAI6E,GAAUpF,EAAoB,Q0D7yDlCQ,EAAAR,EAAA,QAIAqF,EAAArF,EAAA,QAOAgH,EAAA,WACI,QAAAA,GAAsBZ,GAAAtF,KAAAsF,WAS1B,MALIY,GAAAjG,UAAAiB,SAAA,SAASC,GACL,MAAOnB,MAAKsF,SAASpE,SAASC,IAItC+E,IAVsBjH,GAAAiH,wBAYtB,IAAAwb,GAAA,mBAAAA,MAwCA,MApCIA,GAAAzhB,UAAAiB,SAAA,SAASC,GACL,MAAOugB,GAAuB3c,YAAY7D,SAASC,IAGjDugB,EAAAzhB,UAAA+E,SAAN,SAAe7D,EAAwBhB,G1DkyDnC,MAAOmE,GAAQW,UAAUjF,SAAM,OAAQ,GAAQ,WAC3C,GAAIkF,EACJ,OAAOZ,GAAQa,YAAYnF,KAAM,SAAUoF,G0DlyD/C,MADIF,GAAQlF,KAAK+e,cAAc5e,IAC/B,EAAOH,KAAKgf,WAAW7e,EAAO+E,SAKxBwc,EAAAzhB,UAAA8e,cAAV,SAAwB5e,GAEpB,IADA,GAAI+E,OACIlF,KAAK+b,WAAW5b,EAAO+E,IAAQ,CACnC,GAAIa,GAAO2b,EAAuB3c,YAAY1D,OAAOlB,EACrD+E,GAAMc,KAAKD,GAEf,MAAOb,IAGDwc,EAAAzhB,UAAA+e,WAAV,SAAqB7e,EAAoB+E,GACrCA,EAAQxF,EAAE+F,MAAMP,GAChBjC,QAAQE,MAAM,sBAAsB+B,EAAMW,OAC1C,KAAK,GAAIC,GAAI,EAAGA,EAAIZ,EAAMW,QAAS,CAC/B,GAAIE,GAAOb,EAAM8c,OAAOlc,EAAG,GAAG,EAC1B9F,MAAK+b,WAAW5b,EAAO+E,KAIvBA,EAAM8c,OAAOlc,EAAG,EAAGC,GACnBD,KAIR,MADA7C,SAAQE,MAAM,qBAAqB+B,EAAMW,QAClCX,GApCMwc,EAAA3c,YAA2B,GAAIR,GAAA0B,kBAsCpDyb,IAxCsBziB,GAAAyiB,0B1Dk1DhBO,KACA,SAAUjjB,EAAQC,EAASC,G2D12DjCF,EAAAC,QAAAC,EAAAC,EAAA,sE3Dg3DM+iB,KACA,SAAUljB,EAAQC,EAASC,G4Dj3DjCF,EAAAC,QAAAC,EAAAC,EAAA,sE5Du3DMgjB,KACA,SAAUnjB,EAAQC,EAASC,GAEjC,YAEAK,QAAOC,eAAeP,EAAS,cAAgBQ,OAAO,GACtD,IAAI6E,GAAUpF,EAAoB,Q6D73DlCkd,EAAAld,EAAA,QACA2M,EAAA3M,EAAA,QACAQ,EAAAR,EAAA,QACAkjB,EAAAljB,EAAA,QACAwZ,EAAAxZ,EAAA,QAEAmjB,EAAAnjB,EAAA,QACAojB,EAAApjB,EAAA,QACAyZ,EAAAzZ,EAAA,QACAwD,EAAAxD,EAAA,QACA0Z,EAAA1Z,EAAA,QACA2Z,EAAA3Z,EAAA,QACAqjB,EAAArjB,EAAA,OACAA,GAAA,OACA,IAUYsjB,GAVZC,EAAAvjB,EAAA,QACAwjB,EAAAxjB,EAAA,QACAyjB,EAAAzjB,EAAA,QACA4Z,EAAA5Z,EAAA,QACA0jB,EAAA1jB,EAAA,QACA2jB,EAAA3jB,EAAA,QACA4jB,EAAA5jB,EAAA,QACA6jB,EAAA7jB,EAAA,QACA8jB,EAAA9jB,EAAA,SAEA,SAAYsjB,GACRA,IAAA,qBACAA,IAAA,yBACAA,IAAA,2BACAA,IAAA,qBACAA,IAAA,+BACAA,IAAA,2BACAA,IAAA,mBACAA,IAAA,gBARQA,EAAAvjB,EAAAujB,YAAAvjB,EAAAujB,cAmBZ,IAAAS,GAAA,SAAAve,GAaI,QAAAue,KAAA,GAAAlX,GACIrH,EAAAI,KAAA9E,OAAOA,I7D0hEP,O6DviEI+L,GAAAmX,MAAQ,GAAIX,GAAAzgB,MAGZiK,EAAAoX,gBAAmCd,EAAAe,oBAwCnCrX,EAAAsX,eAAiB,SAAClQ,GACtBpH,EAAKqO,UACDkJ,UAAWd,EAAUe,QACrBC,QAAS,IAEbzX,EAAKmX,MAAMnhB,SAGPgK,EAAA0X,aAAe,SAACtQ,GAChBpH,EAAKiO,MAAMsJ,YAAcd,EAAUkB,UACnC3X,EAAKmX,MAAM/gB,QACX4J,EAAKqO,SAAS,SAAAJ,GAAS,MAAAta,GAAEuO,MAAM+L,GAC3BsJ,UAAWd,EAAUmB,mBAKzB5X,EAAA6X,cAAgB,SAACzQ,GACjBpH,EAAKiO,MAAMsJ,YAAcd,EAAUmB,cAAgB5X,EAAKiO,MAAMsJ,YAAcd,EAAUqB,aACtF9X,EAAKmX,MAAMlhB,QACX+J,EAAKqO,SAAS,SAAAJ,GAAS,MAAAta,GAAEuO,MAAM+L,GAC3BsJ,UAAWd,EAAUkB,cAKzB3X,EAAA+X,aAAe,SAAC3Q,GAChBpH,EAAKiO,MAAMsJ,YAAcd,EAAUkB,SACnC3X,EAAKqO,SAAS,SAACJ,GACX,GAAI5Z,GAAU4Z,EAAM+J,OAAQvO,iBAC5B,OAAO9V,GAAEuO,MAAM+L,GACXwJ,QAASxJ,EAAMwJ,SAAWpjB,EAAU,EAAI,MAE7C2L,EAAKiY,UAIRjY,EAAAkY,mBAAqB,SAAAlH,GACrBA,GAAWhR,EAAKiO,MAAMsJ,YAAcd,EAAUqB,YAC9C9X,EAAKmX,MAAMlhB,QACX+J,EAAKqO,SAAS,SAAAJ,GAAS,MAAAta,GAAEuO,MAAM+L,GAC3BsJ,UAAWd,EAAUkB,aAGnB3G,GAAWhR,EAAKiO,MAAMsJ,YAAcd,EAAUkB,UACpD3X,EAAKmX,MAAM/gB,QACX4J,EAAKqO,SAAS,SAAAJ,GAAS,MAAAta,GAAEuO,MAAM+L,GAC3BsJ,UAAWd,EAAUqB,iBAKzB9X,EAAAmY,gBAAkB,WACtB,OAAQnY,EAAKiO,MAAMsJ,WACf,IAAKd,GAAUkB,QACf,IAAKlB,GAAUmB,aACf,IAAKnB,GAAUqB,WACX,MAAO,+DAEX,SACI,MAAO,QAIX9X,EAAAoY,cAAgB,SAAChjB,GACrB4K,EAAKqY,cAAcjjB,GACnB4K,EAAKqO,UACDkJ,UAAWd,EAAU6B,YACtB,WAGCC,sBAAsB,SAAA7K,GAClB8K,WAAW,iBAAAjgB,GAAAW,UAAA8G,MAAA,qB7Du0DH,GACIgY,GAAQS,EADRzY,EAAQ/L,IAEZ,OAAOsE,GAAQa,YAAYnF,KAAM,SAAUoF,GACvC,OAAQA,EAAGC,OACP,IAAK,G6Dz0DA,M7D00DDD,GAAGqf,KAAKze,MAAM,EAAG,EAAG,CAAE,K6D10DrB,EAAMhG,KAAKmjB,gBAAgBne,SAAS7D,G7D40DzC,KAAK,GAWD,M6Dv1DR4iB,GAAS3e,EAAAG,OACbvF,KAAKoa,UACD2J,OAAQA,EACRT,UAAWd,EAAUkB,QACrBF,QAAS,EACTkB,UAAU,GACX,WACC3Y,EAAKmX,MAAMlhB,QACX+J,EAAKiY,a7D+0DW,EAAa,EACzB,KAAK,GASD,MARAQ,GAAMpf,EAAGG,O6D70DrBof,MAAMH,GACNxkB,KAAKoa,UACD2J,WAAQ3gB,GACRkgB,UAAWd,EAAUe,QACrBC,QAAS,EACTkB,aAAUthB,M7Dg1DM,EAAa,EACzB,KAAK,GAAG,OAAQ,S6D90D7B,QAKP2I,EAAA6Y,iBAAmB,SAACzjB,GACxB4K,EAAKqY,cAAcjjB,GACnB4K,EAAKqO,UACDkJ,UAAWd,EAAUqC,aAarB9Y,EAAAiY,QAAU,WACd,GAAIjY,EAAKiO,MAAMsJ,YAAcd,EAAUkB,QAAS,CAC5C,GAAIoB,GAAS/Y,EAAKiO,MAAM+J,MACxB,IAAIe,EAAOpP,WAAY,CACnB3J,EAAKmX,MAAM/gB,OACX,IAAI4iB,GAAOhZ,EAAKmX,MAAM3gB,cACtBwJ,GAAKqO,SAAS,SAAAJ,GAAS,MAAAta,GAAEuO,MAAM+L,GAC3BsJ,UAAWd,EAAUwC,UACrB,WACA,GAAI7jB,GAAU2jB,EAAO3jB,QACjBqiB,EAAUzX,EAAKiO,MAAMwJ,OACzB7K,GAAArL,OAAOQ,SAAS3M,EAASqiB,EAAU,gBAAkB,SAErD,IAAIyB,GAAczB,EAAU,EAAI,gBAAgBA,EAAO,SAAW,EAClEmB,OAAM,UAAU7L,EAAAqC,cAAcha,GAAQ,OAAO0X,EAAAlV,eAAeohB,GAAQE,EAAW,KAE1EzB,GACD9gB,EAAAI,GAAGQ,YAAY,KAAMZ,EAAAI,GAAGoJ,MAAOxJ,EAAAI,GAAGqJ,OAAQ,WACtC,MAAAyM,GAAAoC,MAAMkK,UAAU/jB,EAAS4jB,GAAMvhB,KAAyB,SAAA0hB,GACpD,MAAO5C,GAAArL,OAAOC,OAAO,QAAQ1T,KAAK,SAAA2hB,GAC9B,GAAIhX,EACJ,QAAkB,IAAd+W,GAC2F,QAA1F/W,EAAOiX,OAAO,mBAAkBF,EAAY,GAAC,0BAA2BC,IAClEhX,MAEP,OAET3K,KAAK,SAAA2K,GACJ,MAAOtC,GAAAgB,QAAMC,QAAQC,KACjB6L,EAAAoC,MAAM1H,IAAInS,EAAS4jB,EAAM5W,GACzBmU,EAAArL,OAAOM,OAAO,OAAQpJ,eAOrC2W,GAAOO,UACZtZ,EAAKmX,MAAM/gB,QACX4J,EAAKqO,SAAS,SAAAJ,GAAS,MAAAta,GAAEuO,MAAM+L,GAC3BsJ,UAAWd,EAAU8C,QACrB,WACA3M,EAAArL,OAAOQ,SAASgX,EAAO3jB,QAAS,QAEhCwjB,MAAM,YAIV5Y,EAAKqO,UACDsK,SAAUI,EAAOS,yBAjM7BxZ,EAAKiO,OACD7Y,QAAS8hB,EAAauC,eACtBzB,WAAQ3gB,GACRkgB,UAAWd,EAAUe,QACrBC,QAAS,EACTkB,aAAUthB,IAEd2I,EAAK0Z,iBAAmB,GAAI5C,GAAA6C,yBAAyB3Z,EAAKkY,oBAC1DlY,EAAK4Z,cAAgB,GAAI7C,GAAA9P,sBAAsBjH,EAAKmY,iBAEpD5B,EAAArL,OAAOC,OAAO,WAAW1T,KAAK,SAAArC,OACViC,KAAZjC,GACA4K,EAAKqO,UACDjZ,QAASA,M7D4gEd4K,E6D5xDf,MA5QkCzH,GAAAO,UAAAoe,EAAAve,GAkC9Bue,EAAAhjB,UAAA2lB,kBAAA,WACI5lB,KAAKylB,iBAAiBnS,MACtBtT,KAAK2lB,cAAcrS,OAGvB2P,EAAAhjB,UAAA4lB,qBAAA,WACI7lB,KAAKylB,iBAAiB1kB,SACtBf,KAAK2lB,cAAc5kB,UA6GfkiB,EAAAhjB,UAAAmkB,cAAR,SAAsBjjB,GAClBnB,KAAKoa,UACDjZ,QAASA,IAEbmhB,EAAArL,OAAOvC,KACHvT,QAASA,KA2DjB8hB,EAAAhjB,UAAAiZ,OAAA,SAAOC,EAAOa,GACV,GAAI8L,GAAe9L,EAAMsJ,YAAcd,EAAUwC,QAAUhL,EAAMsJ,YAAcd,EAAU8C,KACrFS,EAAYD,EAAe9L,EAAM+J,OAAQpO,gBAAcvS,EAC3D,OACIsV,GAAAU,EAAA,OAAKC,MAAO+C,GACR4J,KAAO,EACPC,OAAUjM,EAAMsJ,YAAcd,EAAUmB,cAAgB3J,EAAMsJ,YAAcd,EAAUqB,WACtFpW,OAAUuM,EAAMsJ,YAAcd,EAAUwC,OACxCrX,KAAQqM,EAAMsJ,YAAcd,EAAU8C,KACtC9B,QAAWxJ,EAAMwJ,QAAU,KAE3B9K,EAAAU,EAAA,OAAKC,MAAM,WACPX,EAAAU,EAAA,OAAKC,MAAM,UACPX,EAAAU,EAAA,OAAKC,MAAM,SACPX,EAAAU,EAAA,KAAG8M,KAAK,4BAA4B5M,MAAO,eAAe8I,EAAQpW,SAAS,e7Do2D/E,I6Dp2DiG0M,EAAAU,EAAA,a7Ds2D7F,M6Dt2DuGV,EAAAU,EAAA,KAAG8M,KAAK,yCAAuC,YAG1JxN,EAAAU,EAAA,OAAKC,MAAM,8BACPX,EAAAU,EAAA,UAAQC,MAAO+C,GACX+J,mBAAoBL,GAAgB9L,EAAMsJ,YAAcd,EAAUqC,YAClEuB,SAAUpM,EAAMsJ,YAAcd,EAAU6B,WAAYzG,QAAS5d,KAAKqjB,gBAAc,YACpF3K,EAAAU,EAAA,UAAQgN,WAAYpM,EAAMsJ,YAAcd,EAAUkB,SAAW1J,EAAM0K,UAAW9G,QAAS5d,KAAK8jB,c7Ds2D5F,S6Dp2DQ9J,EAAMwJ,QAAU,EACZ9K,EAAAU,EAAA,QAAMC,MAAM,SAASW,EAAMwJ,SAC3B,MAIRxJ,EAAMsJ,YAAcd,EAAUmB,cAAgB3J,EAAMsJ,YAAcd,EAAUqB,WACxEnL,EAAAU,EAAA,UAAQC,MAAM,mBAAmBuE,QAAS5d,KAAK4jB,eAAa,UAC5DlL,EAAAU,EAAA,UAAQgN,SAAUpM,EAAMsJ,YAAcd,EAAUkB,QAAS9F,QAAS5d,KAAKyjB,cAAY,UAI/F/K,EAAAU,EAACwJ,EAAAyD,gBAAenD,MAAOljB,KAAKkjB,SAEhCxK,EAAAU,EAAC2J,EAAAuD,mBAAkBC,MAAO,GAAIC,IAAK,GAAIrY,KAAK,cAExC6L,EAAMsJ,YAAcd,EAAUe,SAAWvJ,EAAMsJ,YAAcd,EAAU6B,WACnE3L,EAAAU,EAAC4J,EAAAyD,kBAAiBtlB,QAAS6Y,EAAM7Y,QAASulB,OAAQ1mB,KAAKmkB,cAAewC,UAAW3mB,KAAK4kB,iBAAkBY,eAAgBvC,EAAauC,eAAgBrC,gBAAiBnjB,KAAKmjB,gBAAiByD,WAAY5M,EAAMsJ,YAAcd,EAAU6B,aACtOrK,EAAMsJ,YAAcd,EAAUqC,UAC1BnM,EAAAU,EAACqJ,EAAA9H,oBAAmBxZ,QAAS6Y,EAAM7Y,UACnCuX,EAAAU,EAACuJ,EAAAkE,qBAAoB1mB,MAAO6Z,EAAM+J,OAAQ/H,WAAYgI,QAAShkB,KAAKgkB,QAAS+B,UAAWA,KAIpG/L,EAAMsJ,YAAcd,EAAUe,SAAWvJ,EAAMsJ,YAAcd,EAAUqC,WAAa7K,EAAMsJ,YAAcd,EAAU6B,WAC9G3L,EAAAU,EAACsJ,EAAA/E,gBAAezY,MAAO8U,EAAM+J,OAAQ7e,QACrC,OAjQI+d,EAAAuC,gBACpBpkB,KAAM,EACNN,KAAM,EACN8E,kBAAmB,EACnBsH,WAAY,UAkQpB+V,GA5QkCvK,EAAAgB,UAArBza,GAAAgkB,gB7DgnEP6D,KACA,SAAU9nB,EAAQC,EAASC,GAEjC,YAEAK,QAAOC,eAAeP,EAAS,cAAgBQ,OAAO,GACtD,IAAI6E,GAAUpF,EAAoB,Q8DjqElCQ,EAAAR,EAAA,QACA6nB,EAAA7nB,EAAA,QAKA8nB,EAAA,SAAAtiB,GACI,QAAAsiB,GAA6BC,GAA7B,GAAAlb,GACIrH,EAAAI,KAAA9E,OAAOA,I9DiqEP,O8DlqEyB+L,GAAAkb,Q9DkqElBlb,E8D5mEf,MAvD0CzH,GAAAO,UAAAmiB,EAAAtiB,GAK9BsiB,EAAA/mB,UAAAinB,KAAR,SAAaznB,GACT,MAAOunB,GAAkBE,KAAKlnB,KAAKinB,MAAOxnB,IAG9CunB,EAAA/mB,UAAAwB,IAAA,SAAIhC,GACA,GAAMkY,GAAO3X,KAAKknB,KAAKznB,EACvB,YAAgB2D,KAATuU,EAAqBA,EAAK,OAAKvU,IAG1C7D,OAAAC,eAAIwnB,EAAA/mB,UAAA,K9D+pEAwB,I8D/pEJ,WACI,MAAO/B,GAAE6S,MAAMvS,KAAKinB,MAAO,SAAAtP,GAAQ,MAAAA,GAAK,M9DiqExCwP,YAAY,EACZC,cAAc,I8D/pElB7nB,OAAAC,eAAIwnB,EAAA/mB,UAAA,W9DkqEAwB,I8DlqEJ,WACI,MAAOzB,MAAKinB,MAAMphB,Q9DoqElBshB,YAAY,EACZC,cAAc,I8DlqElBJ,EAAA/mB,UAAAonB,SAAA,SAASC,GACL,MAAO,IAAIN,GAAkBhnB,KAAKyG,IAAI,SAAC8gB,EAAM9nB,GAAU,OAACA,EAAO6nB,EAAEC,EAAM9nB,QAG3EunB,EAAA/mB,UAAAwG,IAAA,SAAO6gB,GACH,MAAO5nB,GAAE+G,IAAIzG,KAAKinB,MAAO,SAAC7hB,G9DoqEtB,G8DpqEuB3F,GAAA2F,EAAA,GAAOmiB,EAAAniB,EAAA,EAAU,OAAAkiB,GAAEC,EAAM9nB,MAGxDunB,EAAA/mB,UAAA+d,OAAA,SAAO7e,GACH,MAAO,IAAI6nB,GAAqBtnB,EAAEse,OAAOhe,KAAKinB,MAAO,SAAC7hB,G9DsqElD,G8DtqEmD3F,GAAA2F,EAAA,GAAOmiB,EAAAniB,EAAA,EAAU,OAAAjG,GAAEooB,EAAM9nB,OAGrEunB,EAAAE,KAAf,SAAuBD,EAAwBxnB,GAC3C,MAAOC,GAAEwnB,KAAKD,EAAO,SAAAtP,GAAQ,MAAAA,GAAK,KAAOlY,KAGtCunB,EAAAQ,WAAP,SAAqBrP,EAAWsP,GAE5B,IAAK,GADDC,MACK5hB,EAAI,EAAGA,EAAIqS,EAAGrS,IAAK,CACxB,GAAIrG,GAAQgoB,IACR9P,EAAOqP,EAAkBE,KAAKQ,EAAUjoB,OAC/B2D,KAATuU,IACAA,GAAQlY,EAAO,GACfioB,EAAS1hB,KAAK2R,IAElBA,EAAK,KAET,MAAO,IAAIqP,GAAqBU,IAG1BV,EAAA/mB,UAAAyX,QAAV,WACI,MAAO1X,MAAKinB,OAEpBD,GAvD0CD,EAAAY,qBAA7B1oB,GAAA+nB,qB9DmuEPY,KACA,SAAU5oB,EAAQC,EAASC,G+D1uEjCF,EAAAC,QAAAC,EAAAC,EAAA,sE/DgvEM0oB,KACA,SAAU7oB,EAAQC,KAMlB6oB,KACA,SAAU9oB,EAAQC,EAASC,GgExvEjCF,EAAAC,QAAAC,EAAAC,EAAA,sEhE8vEM4oB,KACA,SAAU/oB,EAAQC,EAASC,GAEjC,YAEAK,QAAOC,eAAeP,EAAS,cAAgBQ,OAAO,GiEnwEtD,IAAAC,GAAAR,EAAA,QAMAie,EAAA,WACI,QAAAA,GAAmBC,EAAwBC,EAA4BC,EAAyBC,GAA7Evd,KAAAod,UAAwBpd,KAAAqd,cAA4Brd,KAAAsd,WAAyBtd,KAAAud,eA+BpG,MA3BIJ,GAAAld,UAAAC,QAAA,SAAQC,GAGJ,IAAK,GAFDC,IAAU,EAELE,EAAM,EAAGA,EAAMH,EAAMW,OACtBX,EAAMS,WAAWZ,KAAKsd,SAAUhd,EAAKN,KAAKud,gBAC1Cpd,EAAMY,OAAOf,KAAKsd,SAAUhd,EAAKN,KAAKud,cACtCnd,GAAU,IAEVD,EAAMS,WAAWZ,KAAKod,QAAS9c,EAAKN,KAAKqd,cALb/c,KASpC,IAAK,GAAIA,GAAMH,EAAMW,KAAO,EAAGR,GAAO,IAC9BH,EAAMS,WAAWZ,KAAKod,QAAS9c,EAAKN,KAAKqd,eACzCld,EAAMY,OAAOf,KAAKod,QAAS9c,EAAKN,KAAKqd,aACrCjd,GAAU,IAEVD,EAAMS,WAAWZ,KAAKsd,SAAUhd,EAAKN,KAAKud,eALTjd,KASzC,MAAOF,IAGX+c,EAAAld,UAAAe,QAAA,WACI,MAAM,IAEdmc,IAhCale,GAAAke,eAkCb,IAAA6K,GAAA,mBAAAA,MAYA,MAXIA,GAAA/nB,UAAAiB,SAAA,SAASC,GACL,MAAOA,GAAQC,MAAQ,GAAKD,EAAQL,MAAQ,GAGhDknB,EAAA/nB,UAAAoB,OAAA,SAAOlB,GACH,GAAIid,GAAU1d,EAAE2B,OAAO,EAAGlB,EAAMiB,KAAO,GACnC6mB,EAAUvoB,EAAE2B,OAAO,EAAGlB,EAAMW,KAAO,GACnCwc,EAAW5d,EAAE2B,OAAO,EAAGlB,EAAMiB,KAAO,GACpC8mB,EAAWxoB,EAAE2B,OAAO4mB,EAAU,EAAG9nB,EAAMW,KAAO,EAClD,OAAO,IAAIqc,GAAcC,EAASjd,EAAMsB,IAAI2b,EAAS6K,GAAU3K,EAAUnd,EAAMsB,IAAI6b,EAAU4K,KAErGF,IAZa/oB,GAAA+oB,wBjEkxEPG,KACA,SAAUnpB,EAAQC,EAASC,GkE3zEjCF,EAAAC,QAAAC,EAAAC,EAAA,sElEi0EMipB,KACA,SAAUppB,EAAQC,EAASC,GmEl0EjCF,EAAAC,QAAAC,EAAAC,EAAA,sEnEw0EMkpB,KACA,SAAUrpB,EAAQC,EAASC,GoEz0EjCF,EAAAC,QAAAC,EAAAC,EAAA,sEpE+0EMmpB,KACA,SAAUtpB,EAAQC,EAASC,GqEh1EjCF,EAAAC,QAAAC,EAAAC,EAAA,sErEs1EMopB,KACA,SAAUvpB,EAAQC,EAASC,GsEv1EjCF,EAAAC,QAAAC,EAAAC,EAAA,sEtE61EMqpB,KACA,SAAUxpB,EAAQC,EAASC,GuE91EjCF,EAAAC,QAAAC,EAAAC,EAAA,sEvEo2EMspB,KACA,SAAUzpB,EAAQC,EAASC,GwEr2EjCF,EAAAC,QAAAC,EAAAC,EAAA,sExE22EMupB,KACA,SAAU1pB,EAAQC,EAASC,GAEjC,YyEl2EA,SAAAypB,GAAoBC,GAChB,MAAO,IAAI9b,SAAQ,SAACnB,EAASkd,GACzB,GAAMpZ,GAAOqZ,EAAIxkB,EAAAiJ,YACVqb,GACHG,qBAAsB,WAClBpd,EAAQ,GAAIqd,GAAevZ,UzE+1E3ClQ,OAAOC,eAAeP,EAAS,cAAgBQ,OAAO,GACtD,IAAI6E,GAAUpF,EAAoB,QyEj3ElC4pB,EAAA5pB,EAAA,QACA+pB,EAAA/pB,EAAA,QACAgqB,EAAAhqB,EAAA,QACAiqB,EAAAjqB,EAAA,QACAkqB,EAAAlqB,EAAA,QAEA8pB,EAAA,WACI,QAAAA,GAAmBvpB,GAAAO,KAAAP,QAGvB,MAAAupB,KAgBa/pB,GAAA0f,MAAQuK,EAAA/H,gBAAgB,WACjC,MAAIiI,GAAAlL,kBACOiL,EAAAxmB,KAAKC,UAAUqmB,GAAUzlB,KAAK,SAAAxE,GACjC,GAAI4pB,EAuBJ,OArBIA,OADWxlB,KAAXpE,GAEIqqB,gBAAiB,SAACC,EAAcC,GAK5B,MAJAtmB,SAAQE,MAAM,mBACdgb,YAAYqL,YAAYxqB,EAAQsqB,GAAc9lB,KAAK,SAAAimB,GAC/C,MAAAF,GAAgBE,EAAUzqB,WAQlC0qB,WAAY,WAAM,MAAAT,IAClBU,kBAAmB,SAACF,EAAUzqB,GAC1BiE,QAAQE,MAAM,qBACdgmB,EAAAxmB,KAAKU,MAAM4lB,EAAUjqB,KAKjCiE,QAAQE,MAAM,gBACPwlB,EAAWC,GAAaplB,KAAK,SAAAomB,GAChC,GAAIna,GAAOma,EAAenqB,MAEpBmf,EAAK,GAAIiL,GAAGpa,EAElB,OADAxM,SAAQC,IAAI,YACL0b,MAKR9R,QAAQ+b,OAAO,GAAIniB,OAAM,+BAIxC,IAAAmjB,GAAA,WACI,QAAAA,GAAoBpa,GAAAzP,KAAAyP,OAIpBzP,KAAAwf,aAAexf,KAAKyP,KAAKqa,YAAY,SAAUzK,EAAKlM,GAChDlQ,QAAQ8mB,MAAM,OAAO1K,EAAG,MAAMlM,IAC/B,OAEHnT,KAAAof,UAAYpf,KAAKyP,KAAKua,MAAM,eAAgB,aAC5ChqB,KAAAsf,WAAatf,KAAKyP,KAAKua,MAAM,gBAAiB,UAAW,WACzDhqB,KAAAyf,WAAazf,KAAKyP,KAAKua,MAAM,gBAAiB,MAAO,WACrDhqB,KAAA8f,YAAc9f,KAAKyP,KAAKua,MAAM,iBAAkB,MAAO,WACvDhqB,KAAA4f,oBAAsB5f,KAAKyP,KAAKua,MAAM,yBAA0B,UAAW,SAAU,WACrFhqB,KAAAkf,iBAAmBlf,KAAKyP,KAAKua,MAAM,sBAAuB,MAAO,SAAU,WAC3EhqB,KAAAuf,kBAAoBvf,KAAKyP,KAAKua,MAAM,uBAAwB,MAAO,SAAU,WACjF,MAAAH,KAhBa5qB,GAAA4qB,MzE63EPI,OACA,SAAUjrB,EAAQC,EAASC,GAEjC,YAEAK,QAAOC,eAAeP,EAAS,cAAgBQ,OAAO,GACtD,IAAI6E,GAAUpF,EAAoB,Q0Er8ElCQ,EAAAR,EAAA,QACAwZ,EAAAxZ,EAAA,OACAA,GAAA,OAGA,IAAAojB,GAAApjB,EAAA,QACAyZ,EAAAzZ,EAAA,QACA0Z,EAAA1Z,EAAA,QACA4Z,EAAA5Z,EAAA,QAYAgrB,EAAA,SAAAxlB,GAAA,QAAAwlB,KAAA,GAAAne,GAAA,OAAArH,KAAAC,MAAA3E,KAAA4E,YAAA5E,I1Ek8EQ,O0Ej8EI+L,GAAAoe,SAAW,SAAChX,GAChBA,EAAEiX,gBAEF,IAAI3qB,GAAQ4gB,SAASlN,EAAEkX,OAAO5qB,MAC9BsM,GAAKoN,MAAMgR,SAAS1qB,I1E67EbsM,E0E36Ef,MAvBkCzH,GAAAO,UAAAqlB,EAAAxlB,GAQ9BwlB,EAAAjqB,UAAAiZ,OAAA,SAAOC,GACH,GAAImR,GAAYnR,EAAM3S,GAAE,OACxB,OACIkS,GAAAU,EAAA,QAAMC,MAAM,qBACRX,EAAAU,EAAA,QAAA9U,EAAAiJ,UAAOiB,KAAK,SAAY2K,GAAO1Z,MAAO0Z,EAAM1Z,MAAM2E,WAAYmmB,KAAMD,EAAQH,SAAUnqB,KAAKmqB,SAAUK,QAASxqB,KAAKmqB,YACnHzR,EAAAU,EAAA,UAAQqR,IAAKtR,EAAM3S,IAAK2S,EAAM1Z,MAAO0Z,EAAMuR,MAE3ChS,EAAAU,EAAA,YAAU5S,GAAI8jB,GACT5qB,EAAE+G,IAAI/G,EAAEmc,MAAM1C,EAAMlV,IAAKkV,EAAMuB,IAAM,EAAGvB,EAAMwR,MAAO,SAAAlrB,GAClD,MAAAiZ,GAAAU,EAAA,UAAQ3Z,MAAOA,EAAM2E,kBAM7C8lB,GAvBkCxR,EAAAgB,WAgClCkR,EAAA,SAAAlmB,GAAA,QAAAkmB,K1Eo7EQ,MAAkB,QAAXlmB,GAAmBA,EAAOC,MAAM3E,KAAM4E,YAAc5E,K0E95EnE,MAtBmCsE,GAAAO,UAAA+lB,EAAAlmB,GACvBkmB,EAAA3qB,UAAAkqB,SAAR,SAAiB1qB,GAAjB,GAAAsM,GAAA/L,IACI,OAAO,UAACmT,GACJA,EAAEiX,iBAEFre,EAAKoN,MAAMgR,SAAS1qB,KAI5BmrB,EAAA3qB,UAAAiZ,OAAA,SAAOC,GAAP,GAAApN,GAAA/L,IACI,OAEI0Y,GAAAU,EAAA,OAAKC,MAAM,sBACN3Z,EAAE+G,IAAI0S,EAAM0R,QAAS,SAACzlB,G1Eq7E3B,G0Er7E4B3F,GAAA2F,EAAA,GAAOC,EAAAD,EAAA,EAC3B,OAAAsT,GAAAU,EAAA,YACIV,EAAAU,EAAA,SAAO5K,KAAK,QAAQhI,GAAO2S,EAAM3S,GAAE,IAAI/G,EAAS0O,KAAMgL,EAAM3S,GAAIskB,QAASrrB,IAAU0Z,EAAM1Z,MAAO0qB,SAAUpe,EAAKoe,SAAS1qB,KACxHiZ,EAAAU,EAAA,SAAOqR,IAAQtR,EAAM3S,GAAE,IAAI/G,GAAU4F,QAM7DulB,GAtBmClS,EAAAgB,WAgCnCqR,EAAA,SAAArmB,GACI,QAAAqmB,KAAA,GAAAhf,GACIrH,EAAAI,KAAA9E,OAAOA,I1Eg7EP,O0E/6EA+L,GAAKiO,OACDgR,cAAW5nB,IAEf2I,EAAKkf,iB1E46EElf,E0E33Ef,MAvDkCzH,GAAAO,UAAAkmB,EAAArmB,GAStBqmB,EAAA9qB,UAAAgrB,eAAR,cAAAlf,GAAA/L,IACI2Y,GAAArL,OAAOM,eAAepK,KAAK,SAAAwnB,GACvBjf,EAAKqO,UACD4Q,UAAWA,OAKfD,EAAA9qB,UAAA2d,QAAR,SAAgBpQ,GAAhB,GAAAzB,GAAA/L,KACQmB,GACAC,KAAMoM,EAAWpM,KACjBN,KAAM0M,EAAW1M,KACjB8E,kBAAmB4H,EAAW5H,kBAC9BsH,WAAYM,EAAWN,WAG3B,OAAO,UAACiG,GACJA,EAAEiX,iBACFre,EAAKoN,MAAMzE,IAAIvT,KAIvB4pB,EAAA9qB,UAAAiZ,OAAA,SAAOC,EAAwBa,GAA/B,GAAAjO,GAAA/L,IACI,YAAwBoD,KAApB4W,EAAMgR,WAA2BhR,EAAMgR,UAAUnlB,OAAS,EAEtD6S,EAAAU,EAAA,OAAKC,MAAM,eACPX,EAAAU,EAAA,WAEAV,EAAAU,EAAA,QAAMC,MAAM,iBAAe,gBAC3BX,EAAAU,EAAA,UAEQ1Z,EAAE+G,IAAI/G,EAAEwb,KAAKlB,EAAMgR,UAAW,GAAI,SAAAxd,GAC9B,MAAAkL,GAAAU,EAAA,UACIV,EAAAU,EAAA,KAAGC,MAAM,SAASuE,QAAS7R,EAAK6R,QAAQpQ,IACnCsL,EAAAqC,cAAc3N,G1Ew6E3B,I0Ex6EwCkL,EAAAU,EAAA,SAAO8R,UAAU,gB1E06ErD,I0E16EsE1d,EAAWC,OAASD,EAAWE,cAAgBF,EAAWG,K1E46EhI,W0El6Eb,MAEnBod,GAvDkCrS,EAAAgB,WAuElC+M,EAAA,SAAA/hB,GACI,QAAA+hB,GAAYtN,GAAZ,GAAApN,GACIrH,EAAAI,KAAA9E,OAAOA,I1E47EP,O0En5EI+L,GAAAof,SAAW,SAAChY,GAChBA,EAAEiX,iBACFre,EAAKoN,MAAMuN,OAAO3a,EAAKiO,MAAM7Y,UAIzB4K,EAAAqf,QAAU,SAACjY,GACfA,EAAEiX,iBACFre,EAAKqO,UACDjZ,QAASzB,EAAE+F,MAAMsG,EAAKoN,MAAMqM,gBAC5B6F,UAAU,IAEdtf,EAAKuf,cAAcvf,EAAKiO,MAAM7Y,SAC9BmhB,EAAArL,OAAOvC,KACHvT,QAAS4K,EAAKiO,MAAM7Y,WAIpB4K,EAAAwf,YAAc,SAACpY,GACnBpH,EAAKoN,MAAMwN,UAAU5a,EAAKiO,MAAM7Y,UAG5B4K,EAAAyf,WAAa,SAACrqB,GAClB4K,EAAKqO,UACDjZ,QAASzB,EAAE+F,MAAMtE,GACjBkqB,UAAU,IAEdtf,EAAKuf,cAAcvf,EAAKiO,MAAM7Y,SAC9BmhB,EAAArL,OAAOvC,KACHvT,QAAS4K,EAAKiO,MAAM7Y,WArExB4K,EAAKiO,OACD7Y,QAASzB,EAAE+F,MAAM0T,EAAMhY,SACvBkqB,UAAU,GAEdtf,EAAKuf,cAAcnS,EAAMhY,S1Eu7ElB4K,E0E70Ef,MAjHsCzH,GAAAO,UAAA4hB,EAAA/hB,GAUlC+hB,EAAAxmB,UAAAia,0BAAA,SAA0BC,GACjBza,EAAE+rB,GAAGzrB,KAAKmZ,MAAOgB,KAClBna,KAAKoa,UACDjZ,QAASzB,EAAE+F,MAAM0U,EAAUhZ,SAC3BkqB,UAAU,IAEdrrB,KAAKsrB,cAAcnR,EAAUhZ,WAI7BslB,EAAAxmB,UAAAkqB,SAAR,SAAgDuB,GAAhD,GAAA3f,GAAA/L,IACI,OAAO,UAACP,GACJsM,EAAKqO,SAAS,SAAAJ,GAAS,MAAAta,GAAEuO,MAAM+L,GAC3B7Y,SAAOiE,KACHA,EAACsmB,GAAkBjsB,E1Ey7Ef2F,G0Ev7ERimB,UAAU,G1E07EV,IAAIjmB,K0Ex7ER2G,EAAKuf,cAAcvf,EAAKiO,MAAM7Y,SAC9BmhB,EAAArL,OAAOvC,KACHvT,QAAS4K,EAAKiO,MAAM7Y,YAKxBslB,EAAAxmB,UAAAqrB,cAAR,SAAsBnqB,GAAtB,GAAA4K,GAAA/L,IACI4Y,GAAAoC,MAAMqQ,SAASlqB,GAASqC,KAAK,SAAA6nB,GACzBtf,EAAKqO,UACDiR,SAAUA,OAsCtB5E,EAAAxmB,UAAAiZ,OAAA,SAAOC,EAAqBa,GACxB,MACItB,GAAAU,EAAA,QAAMC,MAAM,UAAU8R,SAAUnrB,KAAKmrB,UACjCzS,EAAAU,EAAA,YAAUgN,SAAUjN,EAAMyN,YACtBlO,EAAAU,EAAA,OAAKC,MAAM,cACPX,EAAAU,EAAA,SAAOqR,IAAI,eAAa,QACxB/R,EAAAU,EAAC8Q,GAAoB1jB,GAAG,cAAcvC,IAAK,EAAGyW,IAAK,EAAGjb,MAAOua,EAAM7Y,QAAQC,KAAM+oB,SAAUnqB,KAAKmqB,SAAS,WAE7GzR,EAAAU,EAAA,OAAKC,MAAM,cACPX,EAAAU,EAAA,SAAOqR,IAAI,eAAa,WACxB/R,EAAAU,EAAC8Q,GAAoB1jB,GAAG,cAAcvC,IAAK,EAAGyW,IAAK,EAAGjb,MAAOua,EAAM7Y,QAAQL,KAAMqpB,SAAUnqB,KAAKmqB,SAAS,WAE7GzR,EAAAU,EAAA,OAAKC,MAAM,cACPX,EAAAU,EAAA,SAAOqR,IAAI,sBAAoB,eAC/B/R,EAAAU,EAAC8Q,GAAoB1jB,GAAG,qBAAqBvC,IAAK,EAAGyW,IAAK,IAAKiQ,KAAM,GAAIlrB,MAAOua,EAAM7Y,QAAQyE,kBAAmBukB,SAAUnqB,KAAKmqB,SAAS,qBAAsBO,KAAK,OAExKhS,EAAAU,EAAA,OAAKC,MAAM,cACPX,EAAAU,EAAA,SAAOqR,IAAI,qBAAmB,cAC9B/R,EAAAU,EAACwR,GAAqBpkB,GAAG,oBAAoBqkB,UAAW,SAAU,WAAY,OAAQ,SAAUprB,MAAOua,EAAM7Y,QAAQ+L,WAAYid,SAAUnqB,KAAKmqB,SAAS,iBAE7JzR,EAAAU,EAAA,OAAKC,MAAM,sBACPX,EAAAU,EAAA,UAAQ5K,KAAK,QAAQoP,QAAS5d,KAAKorB,SAAO,SAC1C1S,EAAAU,EAAA,UAAQ5K,KAAK,SAAS4X,UAAWpM,EAAMqR,SAAUzN,QAAS5d,KAAKurB,aAAW,eAC1E7S,EAAAU,EAAA,UAAQC,MAAM,+BAA+B7K,KAAK,SAAS4X,UAAWjN,EAAMgK,gBAAgBjiB,SAAS8Y,EAAM7Y,UAAQ,SAGvHuX,EAAAU,EAAC2R,GAAoBrW,IAAK1U,KAAKwrB,cAI/BrS,EAAMyN,WACFlO,EAAAU,EAAA,OAAKC,MAAM,mBAAkBX,EAAAU,EAAA,OAAKC,MAAM,mBACxC,OAKxBoN,GAjHsC/N,EAAAgB,UAAzBza,GAAAwnB,oB1EogFPkF,KACA,SAAU3sB,EAAQC,EAASC,GAEjC,YAEAK,QAAOC,eAAeP,EAAS,cAAgBQ,OAAO,G2E/pFtD,IAAAuW,GAAA,WACI,QAAAA,GAAoBvJ,EAA8BtL,OAAA,KAAAA,OAC9CC,KAAMqL,EAAM5G,OACZ/E,KAAM2L,EAAM,GAAG5G,SAFC7F,KAAAyM,QAA8BzM,KAAAmB,UAOzCnB,KAAAoB,KAAepB,KAAKmB,QAAQC,KAC5BpB,KAAAc,KAAed,KAAKmB,QAAQL,KAC5Bd,KAAAqU,SAAmBrU,KAAKmB,QAAQL,KAK7C,MAHIkV,GAAA/V,UAAAwB,IAAA,SAAIuS,EAAa1T,GACb,MAAON,MAAKyM,MAAMuH,GAAK1T,IAE/B0V,IAfsB/W,GAAA+W,S3EsrFhB4V,KACA,SAAU5sB,EAAQC,EAASC,GAEjC,YAEAK,QAAOC,eAAeP,EAAS,cAAgBQ,OAAO,G4E7rFtD,IAAAkoB,GAAA,mBAAAA,MAqCA,MA3BIA,GAAA1nB,UAAA4rB,MAAA,SAAMC,GACF,GAAIC,GAAU/rB,KAAKmY,CACnB,OAAOnY,MAAKqnB,SAAS,SAAAE,GAAQ,MAAAA,GAAOwE,EAAUD,KAGlDnE,EAAA1nB,UAAA+rB,QAAA,SAAWC,GACP,MAAOjsB,MAAK6rB,MAAMI,EAAW9T,IAGvBwP,EAAA1nB,UAAAyX,QAAV,WACI,MAAO1X,MAAKyG,IAAI,SAAC8gB,EAAM9nB,GAAU,OAACA,EAAO8nB,MAG7CI,EAAA1nB,UAAAoB,OAAA,WAKI,IAAK,GAFD4lB,GAAQjnB,KAAK0X,UACbwU,EAAUnoB,KAAK1C,SAAWrB,KAAKmY,EAC1BrS,EAAI,EAAGA,EAAImhB,EAAMphB,OAAQC,IAAK,CAC/B,GAAAV,GAAA6hB,EAAAnhB,GAACrG,EAAA2F,EAAA,GAAOmiB,EAAAniB,EAAA,EACZ,IAAI8mB,EAAU3E,EACV,MAAO9nB,EAEPysB,IAAW3E,EAEnB,MAAON,GAAMA,EAAMphB,OAAS,GAAG,IAEvC8hB,IArCsB1oB,GAAA0oB,wB5EguFhBwE,KACA,SAAUntB,EAAQC,EAASC,G6EpuFjCF,EAAAC,QAAAC,EAAAC,EAAA,sE7E0uFMitB,OACA,SAAUptB,EAAQC,EAASC,GAEjC,YAEAK,QAAOC,eAAeP,EAAS,cAAgBQ,OAAO,GACtD,IAAI6E,GAAUpF,EAAoB,Q8EhvFlCQ,EAAAR,EAAA,QACAmtB,EAAAntB,EAAA,QACAotB,EAAAptB,EAAA,QACAqtB,EAAArtB,EAAA,QACAstB,EAAAttB,EAAA,QAEAutB,EAAAvtB,EAAA,QACAwtB,EAAAxtB,EAAA,QACAytB,EAAAztB,EAAA,QAOA0tB,EAAA,WACI,QAAAA,GAAoBC,GAAA7sB,KAAA6sB,iBAgBxB,MAZID,GAAA3sB,UAAAiB,SAAA,SAASC,GACL,MAAOnB,MAAK6sB,eAAe3rB,SAASC,IAGlCyrB,EAAA3sB,UAAA+E,SAAN,SAAe7D,G9EyuFX,MAAOmD,GAAQW,UAAUjF,SAAM,OAAQ,GAAQ,WAC3C,GAAIG,GAAO6B,EAAOkD,EAAOmT,CACzB,OAAO/T,GAAQa,YAAYnF,KAAM,SAAUoF,GACvC,OAAQA,EAAGC,OACP,IAAK,G8E1uFL,MAFRlF,GAAQksB,EAAA1Q,YAAYta,OAAOF,GAC3Ba,EAAQtC,EAAEwC,OACF,EAAMlC,KAAK6sB,eAAe7nB,SAAS7D,EAAShB,G9E8uF5C,KAAK,G8E3uFjB,MAHI+E,GAAQE,EAAAG,OACR8S,EAAM3Y,EAAEwC,MACZe,QAAQC,IAAI,IAAGmV,EAAMrW,KACrB,EAAO,GAAI2qB,GAAAG,OAAO3sB,EAAO+E,EAAO/D,UAExCyrB,IAjBa3tB,GAAA2tB,uBAmBF3tB,EAAAmkB,oBAAuC,GAAIwJ,GAClD,GAAIJ,GAAA/nB,oBAAoB,GAAI8nB,GAAAzV,0BACxBiW,OAAQ,GAAIT,GAAA7K,oBACZuL,KAAM,GAAIP,GAAAQ,uBAAuB,GAAIP,GAAAjO,uB9EwvFvCyO,KACA,SAAUluB,EAAQC,EAASC,G+E9xFjCF,EAAAC,QAAAC,EAAAC,EAAA,sE/EoyFMguB,KACA,SAAUnuB,EAAQC,EAASC,GgFryFjCF,EAAAC,QAAAC,EAAAC,EAAA,sEhF2yFMiuB,KACA,SAAUpuB,EAAQC,EAASC,GiF5yFjCF,EAAAC,QAAAC,EAAAC,EAAA,sEjFkzFMkuB,KACA,SAAUruB,EAAQC,EAASC,GAEjC,YAEAK,QAAOC,eAAeP,EAAS,cAAgBQ,OAAO,GACtD,IAAI6E,GAAUpF,EAAoB,QkFxzFlCwZ,EAAAxZ,EAAA,QACA2Z,EAAA3Z,EAAA,QAWAmnB,EAAA,SAAA3hB,GAGI,QAAA2hB,GAAYlN,GAAZ,GAAApN,GACIrH,EAAAI,KAAA9E,OAAOA,IlFmzFP,OkFtzFI+L,GAAAuhB,SAA0B,KAI9BvhB,EAAKiO,OACDP,KAAMN,EAAM+J,MAAM3gB,gBlFizFfwJ,EkFtwFf,MAjDoCzH,GAAAO,UAAAwhB,EAAA3hB,GAUhC2hB,EAAApmB,UAAAia,0BAAA,SAA0BC,GACtBna,KAAKoa,UACDX,KAAMU,EAAU+I,MAAM3gB,iBAE1BvC,KAAKutB,YAGTlH,EAAApmB,UAAA2lB,kBAAA,WACI5lB,KAAKutB,YAGTlH,EAAApmB,UAAA4lB,qBAAA,WACI7lB,KAAKwtB,cAGDnH,EAAApmB,UAAAutB,WAAR,WAC0B,OAAlBxtB,KAAKstB,UACLG,cAAcztB,KAAKstB,WAGnBjH,EAAApmB,UAAAstB,SAAR,cAAAxhB,GAAA/L,IACIA,MAAKwtB,aAELjJ,WAAW,WACPxY,EAAKuhB,SAAWI,YAAY,WACxB3hB,EAAKqO,UACDX,KAAM1N,EAAKoN,MAAM+J,MAAM3gB,kBAE5B,MACJ,IAGP8jB,EAAApmB,UAAAiZ,OAAA,SAAOC,EAAmBa,GACtB,MACItB,GAAAU,EAAA,OAAKC,MAAM,SACNR,EAAAlV,eAAeqW,EAAMP,QAItC4M,GAjDoC3N,EAAAgB,UAAvBza,GAAAonB,kBlF81FPsH,KACA,SAAU3uB,EAAQC,EAASC,GAEjC,YAEAK,QAAOC,eAAeP,EAAS,cAAgBQ,OAAO,GmF72FtD,IAAAod,GAAA,WAMI,QAAAA,GAAmB5J,GAAnB,GAAAlH,GAAA/L,IAAmBA,MAAAiT,WASnBjT,KAAA4tB,aAAe,SAACza,GAEZ0J,EAA4BgR,UAAW,EACvC9hB,EAAK+hB,QAAUvJ,WAAW,WACtBthB,QAAQC,IAAI,aACZ6I,EAAKkH,YACN4J,EAA4BkR,gBAGnC/tB,KAAAguB,YAAc,SAAC7a,GAEX8a,aAAaliB,EAAK+hB,UAGtB9tB,KAAAkuB,WAAa,SAAC/a,GAEV0J,EAA4BgR,UAAW,EACvCI,aAAaliB,EAAK+hB,UAGtB9tB,KAAAmuB,cAAgB,SAAChb,GAEb0J,EAA4BgR,UAAW,EACvCI,aAAaliB,EAAK+hB,UAGtB9tB,KAAAouB,cAAgB,SAACjb,GACbA,EAAEiX,iBACGvN,EAA4BgR,UAC7B9hB,EAAKkH,YAEjB,MA3CmB4J,GAAAgR,UAAoB,EACXhR,EAAAkR,cAAgB,IA0C5ClR,IA9Ca5d,GAAA4d,+BnF25FPwR,KACA,SAAUrvB,EAAQC,EAASC,GoF95FjCF,EAAAC,QAAAC,EAAAC,EAAA,sEpFo6FMmvB,KACA,SAAUtvB,EAAQC,EAASC,GAEjC,YqFr6FA,SAAAic,GAA8Bha,GAC1B,GAAIotB,GAAwC,SAAvBptB,EAAQ+L,WAAwB,QAAU,GAC3DshB,EAAiBrtB,EAAQyE,kBAAoB,EAAI,SAASzE,EAAQyE,kBAAiB,gBAAkB,EACzG,OAAUzE,GAAQC,KAAI,IAAID,EAAQL,KAAI,IAAIytB,EAAc,SAASC,ErFo6FrEjvB,OAAOC,eAAeP,EAAS,cAAgBQ,OAAO,IqFv6FtDR,EAAAkc,iBrFk7FMsT,KACA,SAAUzvB,EAAQC,EAASC,GsFr7FjCF,EAAAC,QAAAC,EAAAC,EAAA,sEtF27FMuvB,KACA,SAAU1vB,EAAQC,EAASC,GuF57FjCF,EAAAC,QAAAC,EAAAC,EAAA,sEvFk8FMwvB,KACA,SAAU3vB,EAAQC,EAASC,GAEjC,YAEAK,QAAOC,eAAeP,EAAS,cAAgBQ,OAAO,GwFr8FtD,IAAAmvB,GAAA1vB,EAAA,QAGAmd,EAAAnd,EAAA,QACAod,EAAApd,EAAA,QACAqd,EAAArd,EAAA,QAEAsf,EAAAtf,EAAA,QACAsd,EAAAtd,EAAA,QAEA+G,EAAA,mBAAAA,KAEYjG,KAAA6uB,YAAyC,GAAID,GAAA5H,oBAChD,GAAI3K,GAAApb,oBAAuB,IAC3B,GAAIud,GAAAxG,gBAAmB,IACvB,GAAIwE,GAAAhB,sBAAyB,IAC7B,GAAIe,GAAAyL,qBAAwB,IAC5B,GAAI1L,GAAA9F,mBAAsB,KAYnC,MATIvQ,GAAAhG,UAAAiB,SAAA,SAASC,GACL,MAAOnB,MAAK6uB,YAAY7Q,OAAO,SAACuJ,EAAM9nB,GAAU,MAAAA,GAAMyB,SAASC,KAAU2tB,QAAU,GAGvF7oB,EAAAhG,UAAAoB,OAAA,SAAOlB,GAGH,MAFWH,MAAK6uB,YAAY7Q,OAAO,SAACuJ,EAAM9nB,GAAU,MAAAA,GAAMyB,SAASf,EAAMgB,WACrCE,SACjBA,OAAOlB,IAElC8F,IAnBahH,GAAAgH,qBxF49FP8oB,KACA,SAAU/vB,EAAQC,EAASC,GyFz+FjCF,EAAAC,QAAAC,EAAAC,EAAA,sEzF++FM6vB,OACA,SAAUhwB,EAAQC,EAASC,G0Fh/FjCF,EAAAC,QAAAC,EAAAC,EAAA,sE1Fs/FM8vB,KACA,SAAUjwB,EAAQC,EAASC,GAEjC,YAEAK,QAAOC,eAAeP,EAAS,cAAgBQ,OAAO,G2F3/FtD,IAAAC,GAAAR,EAAA,QAEAwc,EAAAxc,EAAA,QAGAmjB,EAAAnjB,EAAA,QASA4tB,EAAA,WAGI,QAAAA,GAAmBnX,EAAiCzQ,EAA+B/D,GAAhEnB,KAAA2V,cAAiC3V,KAAAkF,QAA+BlF,KAAAmB,UAC/EnB,KAAKgc,WAAaN,EAAA5H,WAAWC,KAAK5S,GAClCnB,KAAKgc,WAAW3G,WAAW3V,EAAEse,OAAO9Y,EAAO,SAAAa,GAAQ,MAAc,KAAdA,EAAK/E,aAuBhE,MApBI8rB,GAAA7sB,UAAAyV,SAAA,WACI,MAAO1V,MAAKgc,WAAWtG,SAAS1V,KAAK2V,cAGzCmX,EAAA7sB,UAAAolB,OAAA,WACI,OAAQrlB,KAAKgc,WAAWnG,SAAS7V,KAAK2V,cAG1CmX,EAAA7sB,UAAAuV,gBAAA,WACI,MAAOxV,MAAKgc,WAAWxG,gBAAgB9V,EAAEse,OAAOhe,KAAKkF,MAAO,SAAAa,GAAQ,MAAc,KAAdA,EAAK/E,cAG7E8rB,EAAA7sB,UAAAslB,mBAAA,WAEI,MADwB7lB,GAAEwvB,UAAUlvB,MACnBwV,mBAGdsX,EAAA9nB,SAAP,SAAgB7D,GACZ,MAAOkhB,GAAAe,oBAAoBpe,SAAS7D,IAE5C2rB,IA5Ba7tB,GAAA6tB,U3FghGPqC,KACA,SAAUnwB,EAAQC,EAASC,G4F/hGjCF,EAAAC,QAAAC,EAAAC,EAAA,sE5FqiGMiwB,KACA,SAAUpwB,EAAQC,EAASC,G6FtiGjCF,EAAAC,QAAAC,EAAAC,EAAA,+C7F4iGMkwB,KACA,SAAUrwB,EAAQC,EAASC,G8F7iGjCF,EAAAC,QAAAC,EAAAC,EAAA,sE9FmjGMmwB,KACA,SAAUtwB,EAAQC,EAASC,G+FpjGjCF,EAAAC,QAAAC,EAAAC,EAAA,sE/F0jGMowB,KACA,SAAUvwB,EAAQC,EAASC,GgG3jGjCF,EAAAC,QAAAC,EAAAC,EAAA,sEhGikGMqwB,KACA,SAAUxwB,EAAQC,EAASC,GiGlkGjCF,EAAAC,QAAAC,EAAAC,EAAA,sEjGwkGMswB,KACA,SAAUzwB,EAAQC,EAASC,GkGzkGjCF,EAAAC,QAAAC,EAAAC,EAAA,sElG+kGMuwB,KACA,SAAU1wB,EAAQC,EAASC,GAEjC,YAEAK,QAAOC,eAAeP,EAAS,cAAgBQ,OAAO,GACtD,IAAI6E,GAAUpF,EAAoB,QmGllGlCsF,EAAAtF,EAAA,QAEA+tB,EAAA,SAAAvoB,GAAA,QAAAuoB,KnGqlGQ,MAAkB,QAAXvoB,GAAmBA,EAAOC,MAAM3E,KAAM4E,YAAc5E,KmGpkGnE,MAjB4CsE,GAAAO,UAAAooB,EAAAvoB,GACxCuoB,EAAAhtB,UAAAiB,SAAA,SAASC,GACL,MAAOA,GAAQL,KAAO,GAAK4D,EAAAzE,UAAMiB,SAAQ4D,KAAA9E,KAACmB,IAGxC8rB,EAAAhtB,UAAA+E,SAAN,SAAe7D,EAAwBhB,GnGslGnC,MAAOmE,GAAQW,UAAUjF,SAAM,OAAQ,GAAQ,WAC3C,GAAIkF,GAAOY,CACX,OAAOxB,GAAQa,YAAYnF,KAAM,SAAUoF,GACvC,OAAQA,EAAGC,OACP,IAAK,GmGvlGbS,EAAI,EnGylGQV,EAAGC,MAAQ,CACf,KAAK,GmGxlGL,SAAMrF,KAAKsF,SAASN,SAAS7D,EAAShB,GnGylGtC,KAAK,GmGzlGb+E,EAAQE,EAAAG,OACRO,InG2lGYV,EAAGC,MAAQ,CACf,KAAK,GACD,GmG5lGPlF,EAAM4b,WAAW7W,GAAO,WnG6lGjBE,GAAGC,MAAQ,CACf,KAAK,GmG3lGjB,MAFApC,SAAQC,IAAO4C,EAAC,wBAEhB,EAAOZ,SAEf+nB,GAjB4CzoB,EAAA0B,uBAA/BjH,GAAAguB,0BnGwnGP0C,KACA,SAAU3wB,EAAQC,EAASC,GoG9nGjCF,EAAAC,QAAAC,EAAAC,EAAA,sEpGooGMywB,KACA,SAAU5wB,EAAQC,EAASC,GqGroGjCF,EAAAC,QAAAC,EAAAC,EAAA,sErG2oGM0wB,KACA,SAAU7wB,EAAQC,EAASC,GsG5oGjCF,EAAAC,QAAAC,EAAAC,EAAA,sEtGkpGM2wB,KACA,SAAU9wB,EAAQC,EAASC,GuGnpGjCF,EAAAC,QAAAC,EAAAC,EAAA,sEvGypGM4wB,KACA,SAAU/wB,EAAQC,EAASC,GAEjC,YAEAK,QAAOC,eAAeP,EAAS,cAAgBQ,OAAO,GACtD,IAAI6E,GAAUpF,EAAoB,QwG/pGlCwZ,EAAAxZ,EAAA,OACAA,GAAA,OAQA,IAAAonB,GAAA,SAAA5hB,GAAA,QAAA4hB,KxG4pGQ,MAAkB,QAAX5hB,GAAmBA,EAAOC,MAAM3E,KAAM4E,YAAc5E,KwG7oGnE,MAfuCsE,GAAAO,UAAAyhB,EAAA5hB,GACnC4hB,EAAArmB,UAAAiZ,OAAA,SAAOC,GACH,GAAIjX,GAAM,GAAI8tB,KACd,OAAI9tB,GAAI+tB,WAAa,GAAK9W,EAAMoN,OAASrkB,EAAIguB,WAAa/W,EAAMqN,IAExD9N,EAAAU,EAAA,OAAKC,MAAM,YACPX,EAAAU,EAAA,SxG6pGA,mBwG5pGqBD,EAAMhL,KxG8pG3B,MwGxpGD,MAEnBmY,GAfuC5N,EAAAgB,UAA1Bza,GAAAqnB,qBxGirGP6J,KACA,SAAUnxB,EAAQC,KAMlBmxB,KACA,SAAUpxB,EAAQC,EAASC,GyGlsGjCF,EAAAC,QAAAC,EAAAC,EAAA,sEzGwsGMkxB,KACA,SAAUrxB,EAAQC,EAASC,G0GzsGjCF,EAAAC,QAAAC,EAAAC,EAAA,sE1G+sGMmxB,KACA,SAAUtxB,EAAQC,EAASC,GAEjC,YAEAK,QAAOC,eAAeP,EAAS,cAAgBQ,OAAO,G2GptGtD,IAAAiZ,GAAAxZ,EAAA,QACAqxB,EAAArxB,EAAA,QAEAsxB,EAAAtxB,EAAA,OAGA+D,SAAQC,IAAI,WAEZstB,EAAqBC,UAIrB/X,EAAAQ,OAAOR,EAAAU,EAACmX,EAAAtN,aAAY,MAAIyN,SAASC,O3GytG3BC,KACA,SAAU5xB,EAAQC,EAASC,G4GtuGjCF,EAAAC,QAAAC,EAAAC,EAAA,sE5G4uGM0xB,KACA,SAAU7xB,EAAQC,EAASC,G6G7uGjCF,EAAAC,QAAAC,EAAAC,EAAA,iE7GmvGM2xB,KACA,SAAU9xB,EAAQC,EAASC,G8GpvGjCF,EAAAC,QAAAC,EAAAC,EAAA,sE9G0vGM4xB,KACA,SAAU/xB,EAAQC,EAASC,G+G3vGjCF,EAAAC,QAAAC,EAAAC,EAAA,sE/GiwGM6xB,OACA,SAAUhyB,EAAQC,EAASC,GgHlwGjCF,EAAAC,QAAAC,EAAAC,EAAA,sEhHwwGM8xB,KACA,SAAUjyB,EAAQC,EAASC,GiHzwGjCF,EAAAC,QAAAC,EAAAC,EAAA,sEjH+wGM+xB,KACA,SAAUlyB,EAAQC,EAASC,GkHhxGjCF,EAAAC,QAAAC,EAAAC,EAAA,sElHsxGMgyB,KACA,SAAUnyB,EAAQC,KAMlBmyB,OACA,SAAUpyB,EAAQC,EAASC,GAEjC,YAEAK,QAAOC,eAAeP,EAAS,cAAgBQ,OAAO,GACtD,IAAI6E,GAAUpF,EAAoB,QmHnyGlCQ,EAAAR,EAAA,QAEAwD,EAAAxD,EAAA,SAQA,SAAiB8b,GACb,QAAAqW,GAAwBxX,GACpB,MAAOnX,GAAAI,GAAGoJ,MAAMoH,IAAIuG,GAGxB,QAAAvG,GAAoBnS,EAAwBsY,EAActL,GAOtD,MAAOkjB,GANM/sB,EAAAiJ,YACNpM,GACHsY,KAAMA,EACND,KAAM,GAAIwW,MACV7hB,KAAMA,KAKd,QAAA8M,GAA+B9Z,GAC3B,MAAOuB,GAAAI,GAAGoJ,MAAMolB,MAAKhtB,EAAAiJ,YAAKpM,IAAUowB,OAAO,QAG/C,QAAAC,GAAyBrwB,GACrB,MAAO8Z,GAAe9Z,GAASqC,KAAK,SAAAsX,GAChC,MAAApb,GAAEwb,KAAKJ,EAAY,MAI3B,QAAAoK,GAA0B/jB,EAAwBsY,GAC9C,MAAOwB,GAAe9Z,GAASqC,KAAK,SAAAsX,GAChC,OAAIA,EAAWjV,OAAS,IAAM4T,EAAOqB,EAAW,GAAQrB,OAC7C/Z,EAAE+xB,cAAc3W,EAAWxC,MAAM,EAAG,KAAMmB,KAAMA,GAAO,SAAAI,GAAa,MAAAA,GAAUJ,SAMjG,QAAA4R,GAAyBlqB,GACrB,MAAOuB,GAAAI,GAAGoJ,MAAMolB,MAAKhtB,EAAAiJ,YAAKpM,IAAU4M,MAAM,SAAAA,GAAS,MAAAA,GAAQ,IAlC/CiN,EAAAqW,QAAOA,EAIPrW,EAAA1H,IAAGA,EAUH0H,EAAAC,eAAcA,EAIdD,EAAAwW,SAAQA,EAMRxW,EAAAkK,UAASA,EASTlK,EAAAqQ,SAAQA,GAlCXpsB,EAAA+b,QAAA/b,EAAA+b,YnHm0GX0W,KACA,SAAU1yB,EAAQC,EAASC,GoH90GjCF,EAAAC,QAAAC,EAAAC,EAAA,sEpHo1GMwyB,KACA,SAAU3yB,EAAQC,EAASC,GqHr1GjCF,EAAAC,QAAAC,EAAAC,EAAA,sErH21GMyyB,KACA,SAAU5yB,EAAQC,EAASC,GsH51GjCF,EAAAC,QAAAC,EAAAC,EAAA,sEtHk2GM0yB,KACA,SAAU7yB,EAAQC,EAASC,GuHn2GjCF,EAAAC,QAAAC,EAAAC,EAAA,sEvHy2GM2yB,KACA,SAAU9yB,EAAQC,EAASC,GwH12GjCF,EAAAC,QAAAC,EAAAC,EAAA,sExHg3GM4yB,KACA,SAAU/yB,EAAQC,KAMlB+yB,KACA,SAAUhzB,EAAQC,EAASC,GyHx3GjCF,EAAAC,QAAAC,EAAAC,EAAA,sEzH83GM8yB,KACA,SAAUjzB,EAAQC,EAASC,GAEjC,YAEAK,QAAOC,eAAeP,EAAS,cAAgBQ,OAAO,G0Hv3GtD,IAAAimB,GAAA,WAGI,QAAAA,GAAmBzS,GAAnB,GAAAlH,GAAA/L,IAAmBA,MAAAiT,WAFXjT,KAAA+c,SAAmB,EAMnB/c,KAAAkyB,QAAU,WAETnmB,EAAKgR,SACNhR,EAAKkH,SAASlH,EAAKgR,SAAU,IAG7B/c,KAAAmyB,UAAY,WAEZpmB,EAAKgR,SACLhR,EAAKkH,SAASlH,EAAKgR,SAAU,IAsCzC,MAnCI2I,GAAAzlB,UAAAqT,IAAA,cAAAvH,GAAA/L,IAIQ,WAAY0wB,WACZA,SAASld,iBAAiB,mBACtB,YAAQkd,SAAS0B,OAASrmB,EAAKomB,UAAYpmB,EAAKmmB,aAEpD,aAAexB,WACfA,SAASld,iBAAiB,sBACtB,YAAQkd,SAAS2B,UAAYtmB,EAAKomB,UAAYpmB,EAAKmmB,aAEvD,gBAAkBxB,WAClBA,SAASld,iBAAiB,yBACtB,YAAQkd,SAAS4B,aAAevmB,EAAKomB,UAAYpmB,EAAKmmB,aAE1D,YAAcxB,WACdA,SAASld,iBAAiB,qBACtB,YAAQkd,SAAS6B,SAAWxmB,EAAKomB,UAAYpmB,EAAKmmB,aAGtD,aAAexB,YACfA,SAAS8B,UAAYxyB,KAAKkyB,QAC1BxB,SAAS+B,WAAazyB,KAAKmyB,WAG/B5e,OAAOmf,WAAanf,OAAOof,QAAU3yB,KAAKkyB,QAC1C3e,OAAOqf,WAAarf,OAAOsf,OAAS7yB,KAAKmyB,WAK7CzM,EAAAzlB,UAAAc,OAAA,aAGJ2kB,IAtDazmB,GAAAymB,4B1H46GPoN,KACA,SAAU9zB,EAAQC,EAASC,G2Hz7GjCF,EAAAC,QAAAC,EAAAC,EAAA,sE3H+7GM4zB,KACA,SAAU/zB,EAAQC,EAASC,G4Hh8GjCF,EAAAC,QAAAC,EAAAC,EAAA,sE5Hs8GM6zB,OACA,SAAUh0B,EAAQC,EAASC,G6Hv8GjCF,EAAAC,QAAAC,EAAAC,EAAA,sE7H68GM8zB,KACA,SAAUj0B,EAAQC,EAASC,GAEjC,YAEAK,QAAOC,eAAeP,EAAS,cAAgBQ,OAAO,GACtD,IAAI6E,GAAUpF,EAAoB,Q8Hn9GlCkd,EAAAld,EAAA,QACAQ,EAAAR,EAAA,QACAwZ,EAAAxZ,EAAA,QAGAud,EAAAvd,EAAA,QACAwd,EAAAxd,EAAA,OACAA,GAAA,OAKA,IAAAg0B,GAAA,SAAAxuB,GAAA,QAAAwuB,K9Hi9GQ,MAAkB,QAAXxuB,GAAmBA,EAAOC,MAAM3E,KAAM4E,YAAc5E,K8Hz8GnE,MARkCsE,GAAAO,UAAAquB,EAAAxuB,GAC9BwuB,EAAAjzB,UAAAiZ,OAAA,SAAOC,GACH,MACIT,GAAAU,EAAA,OAAKC,MAAM,eACPX,EAAAU,EAACsD,EAAAO,2BAA0BjJ,IAAKmF,EAAMnF,IAAKQ,QAAS2E,EAAM3E,YAI1E0e,GARkCxa,EAAAgB,WAUlCyZ,EAAA,SAAAzuB,GAAA,QAAAyuB,KAAA,GAAApnB,GAAA,OAAArH,KAAAC,MAAA3E,KAAA4E,YAAA5E,I9Hu9GQ,O8Ht9GI+L,GAAA6Q,mBAAqB,GAAIH,GAAAI,4BAA4B,WAAM,MAAA9Q,GAAKhL,WAYhEgL,EAAA6R,QAAU,SAACzK,GACfpH,EAAK2I,O9Hy8GE3I,E8H/7Gf,MAxB+CzH,GAAAO,UAAAsuB,EAAAzuB,GAGnCyuB,EAAAlzB,UAAAyU,IAAR,WACI1U,KAAKmZ,MAAMhZ,MAAMuU,IAAI1U,KAAKmZ,MAAMnF,IAAKhU,KAAKmZ,MAAM7Y,IAAKN,KAAKmZ,MAAM3E,SAChExU,KAAKmZ,MAAM6K,WAGPmP,EAAAlzB,UAAAc,OAAR,WACIf,KAAKmZ,MAAMhZ,MAAMY,OAAOf,KAAKmZ,MAAMnF,IAAKhU,KAAKmZ,MAAM7Y,IAAKN,KAAKmZ,MAAM3E,SACnExU,KAAKmZ,MAAM6K,WAOfmP,EAAAlzB,UAAAiZ,OAAA,SAAOC,GACH,MACIT,GAAAU,EAAA,MAAA9U,EAAAiJ,UAAK8L,MAAM,qBAAqBuE,QAAS5d,KAAK4d,SAAa5d,KAAK4c,oBAC5DlE,EAAAU,EAACsD,EAAAuE,2BAA0BjN,IAAKmF,EAAMnF,IAAKQ,QAAS2E,EAAM3E,YAI1E2e,GAxB+Cza,EAAAgB,WA0B/C0Z,EAAA,SAAA1uB,GAAA,QAAA0uB,K9Hg9GQ,MAAkB,QAAX1uB,GAAmBA,EAAOC,MAAM3E,KAAM4E,YAAc5E,K8H18GnE,MAN6CsE,GAAAO,UAAAuuB,EAAA1uB,GACzC0uB,EAAAnzB,UAAAiZ,OAAA,SAAOC,GACH,MACIT,GAAAU,EAAA,OAAKC,MAAM,sBAGvB+Z,GAN6C1a,EAAAgB,WAY7C2Z,EAAA,SAAA3uB,GAAA,QAAA2uB,K9H88GQ,MAAkB,QAAX3uB,GAAmBA,EAAOC,MAAM3E,KAAM4E,YAAc5E,K8Ht8GnE,MARwCsE,GAAAO,UAAAwuB,EAAA3uB,GACpC2uB,EAAApzB,UAAAiZ,OAAA,SAAOC,GACH,MAAIA,GAAM3E,QAAU2E,EAAMhZ,MAAMkU,UAC5B8E,EAAMhZ,MAAMS,WAAWuY,EAAMnF,IAAKmF,EAAM7Y,IAAK6Y,EAAM3E,SAC5CkE,EAAAU,EAAC+Z,EAAgC7uB,EAAAiJ,YAAK4L,IAEtCT,EAAAU,EAACga,EAA8B9uB,EAAAiJ,YAAK4L,KAEvDka,GARwC3a,EAAAgB,WAUxC4Z,EAAA,SAAA5uB,GAAA,QAAA4uB,K9Hk9GQ,MAAkB,QAAX5uB,GAAmBA,EAAOC,MAAM3E,KAAM4E,YAAc5E,K8Hh8GnE,MAlBiCsE,GAAAO,UAAAyuB,EAAA5uB,GAC7B4uB,EAAArzB,UAAAiZ,OAAA,SAAOC,GACH,GAAIoa,GAAcxvB,KAAKyvB,KAAKzvB,KAAK4O,KAAKwG,EAAMhZ,MAAMkU,WAC9Cof,EAAc1vB,KAAKyvB,KAAKra,EAAMhZ,MAAMkU,SAAWkf,EACnD,OACI7a,GAAAU,EAAA,SAAOC,MAAM,cACR3Z,EAAEwM,MAAMunB,EAAa,SAAAC,GAClB,MAAAhb,GAAAU,EAAA,UACK1Z,EAAEwM,MAAMqnB,EAAa,SAAApe,GAClB,MAAAuD,GAAAU,EAAA,UACIV,EAAAU,EAACia,EAAyB/uB,EAAAiJ,YAAK4L,GAAO3E,QAASkf,EAAaH,EAAcpe,aAQ1Gme,GAlBiC5a,EAAAgB,WAwBjCia,EAAA,SAAAjvB,GAAA,QAAAivB,KAAA,GAAA5nB,GAAA,OAAArH,KAAAC,MAAA3E,KAAA4E,YAAA5E,I9H+8GQ,O8H98GI+L,GAAAqiB,cAAgB,SAACjb,GACrBA,EAAEiX,kB9H68GKre,E8H96Gf,MAjC4BzH,GAAAO,UAAA8uB,EAAAjvB,GAKxBivB,EAAA1zB,UAAAiZ,OAAA,SAAOC,GACH,GAAIA,EAAM4M,UAAW,CACjB,GAAI6N,GAAUza,EAAMhZ,MAAM0U,SAASsE,EAAMnF,IAAKmF,EAAM7Y,MAAQ6Y,EAAMhZ,MAAM2U,UAAUqE,EAAMnF,IAAKmF,EAAM7Y,MAAQ6Y,EAAM4M,UAAUtkB,IAAI0X,EAAMnF,IAAKmF,EAAM7Y,IAChJ,OACIoY,GAAAU,EAAA,MAAIC,MAAO+C,GACPyX,eAAgBD,EAChBE,kBAAmBF,KAEnBlb,EAAAU,EAAA,OAAKC,MAAM,OAAO+U,cAAepuB,KAAKouB,eAClC1V,EAAAU,EAAC8Z,EAAmB5uB,EAAAiJ,YAAK4L,GAAO3E,QAAS2E,EAAM4M,UAAUtkB,IAAI0X,EAAMnF,IAAKmF,EAAM7Y,UAM1F,MACIoY,GAAAU,EAAA,UACIV,EAAAU,EAAA,OAAKC,MAAM,OAAO+U,cAAepuB,KAAKouB,eAE9BjV,EAAMhZ,MAAM0U,SAASsE,EAAMnF,IAAKmF,EAAM7Y,KAClCoY,EAAAU,EAAC8Z,EAAmB5uB,EAAAiJ,YAAK4L,GAAO3E,QAAS2E,EAAMhZ,MAAM2U,UAAUqE,EAAMnF,IAAKmF,EAAM7Y,QAChFoY,EAAAU,EAACka,EAAkBhvB,EAAAiJ,YAAK4L,OAOxDwa,GAjC4Bjb,EAAAgB,WAuC5Bqa,EAAA,SAAArvB,GAAA,QAAAqvB,KAAA,GAAAhoB,GAAA,OAAArH,KAAAC,MAAA3E,KAAA4E,YAAA5E,I9Hq8GQ,O8Hp8GI+L,GAAAiY,QAAmB,WACvBjY,EAAKioB,cACLjoB,EAAKoN,MAAM6K,W9Hk8GJjY,E8Ht7Gf,MAf2BzH,GAAAO,UAAAkvB,EAAArvB,GAMvBqvB,EAAA9zB,UAAAiZ,OAAA,SAAOC,GAAP,GAAApN,GAAA/L,IACI,OACI0Y,GAAAU,EAAA,UACK1Z,EAAEwM,MAAMiN,EAAMhZ,MAAMW,KAAM,SAAAR,GACvB,MAAAoY,GAAAU,EAACua,EAAarvB,EAAAiJ,YAAK4L,GAAO7Y,IAAKA,EAAK0jB,QAASjY,EAAKiY,eAKtE+P,GAf2Brb,EAAAgB,WAuB3BmN,EAAA,SAAAniB,GAAA,QAAAmiB,K9H27GQ,MAAkB,QAAXniB,GAAmBA,EAAOC,MAAM3E,KAAM4E,YAAc5E,K8Hx6GnE,MAnByCsE,GAAAO,UAAAgiB,EAAAniB,GACrCmiB,EAAA5mB,UAAAiZ,OAAA,SAAOC,GACH,GAAIhZ,GAAQgZ,EAAMhZ,MAEd8zB,GACAC,YAAa/zB,EAAMiB,KACnB+yB,YAAah0B,EAAMW,KAGvB,OACI4X,GAAAU,EAAA,MAAA9U,EAAAiJ,UAAK8L,MAAM,oBAAuB4a,GAC9Bvb,EAAAU,EAAA,QAAA9U,EAAAiJ,UAAO8L,MAAM,cAAiB4a,GACzBv0B,EAAEwM,MAAM/L,EAAMiB,KAAM,SAAA4S,GACjB,MAAA0E,GAAAU,EAAC2a,EAAYzvB,EAAAiJ,YAAK4L,GAAOnF,IAAKA,UAMtD6S,GAnByCnO,EAAAgB,UAA5Bza,GAAA4nB,yB9H+8GV","file":"app.2e770df424b74b5ac71cf84208f834e6.js","sourcesContent":["webpackJsonp([\"app\"],{\n\n/***/ \"+bsQ\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/large/large-c1.cf85c5eb9acce5553a85122616f8f7f3.png\";\n\n/***/ }),\n\n/***/ \"/BPU\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/large/large-b3.f56ee08f09215c9501370c94a97d5da1.png\";\n\n/***/ }),\n\n/***/ \"1Tjk\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/large/large-d5.93f0c9556e78c0b2b5ab5a7bb293e22c.png\";\n\n/***/ }),\n\n/***/ \"2+Yo\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _ = __webpack_require__(\"M4fF\");\nvar AdjacentHint = (function () {\n    function AdjacentHint(row1, variant1, row2, variant2) {\n        this.row1 = row1;\n        this.variant1 = variant1;\n        this.row2 = row2;\n        this.variant2 = variant2;\n    }\n    AdjacentHint.prototype.applyTo = function (board) {\n        var changed = false;\n        var applyToCol = function (col, thisRow, thisVariant, adjRow, adjVariant) {\n            var hasLeft = col >= 1 ? board.isPossible(adjRow, col - 1, adjVariant) : false;\n            var hasRight = col < board.cols - 1 ? board.isPossible(adjRow, col + 1, adjVariant) : false;\n            if (!hasLeft && !hasRight && board.isPossible(thisRow, col, thisVariant)) {\n                board.remove(thisRow, col, thisVariant);\n                changed = true;\n            }\n        };\n        for (var col = 0; col < board.cols; col++) {\n            applyToCol(col, this.row1, this.variant1, this.row2, this.variant2);\n            applyToCol(col, this.row2, this.variant2, this.row1, this.variant1);\n        }\n        if (changed)\n            this.applyTo(board);\n        return changed;\n    };\n    AdjacentHint.prototype.getType = function () {\n        return 1 /* Horizontal */;\n    };\n    return AdjacentHint;\n}());\nexports.AdjacentHint = AdjacentHint;\nvar AdjacentHintFactory = (function () {\n    function AdjacentHintFactory() {\n    }\n    AdjacentHintFactory.prototype.supports = function (options) {\n        return options.rows >= 1 && options.cols >= 2;\n    };\n    AdjacentHintFactory.prototype.random = function (board) {\n        var row1 = _.random(0, board.rows - 1);\n        var col1 = _.random(0, board.cols - 1);\n        var row2 = _.random(0, board.rows - 1);\n        var colDelta;\n        if (col1 == 0)\n            colDelta = 1;\n        else if (col1 == board.cols - 1)\n            colDelta = -1;\n        else\n            colDelta = _.random(0, 1) == 1 ? 1 : -1;\n        var col2 = col1 + colDelta;\n        return new AdjacentHint(row1, board.get(row1, col1), row2, board.get(row2, col2));\n    };\n    return AdjacentHintFactory;\n}());\nexports.AdjacentHintFactory = AdjacentHintFactory;\n\n\n/***/ }),\n\n/***/ \"20Ho\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/small/small-c6.3a75bba0385dcc7f6e7074d7873ff81e.png\";\n\n/***/ }),\n\n/***/ \"27d+\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/small/small-b1.376d5df50dd14a86919d705382c89060.png\";\n\n/***/ }),\n\n/***/ \"2JYO\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"32Ag\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _ = __webpack_require__(\"M4fF\");\nvar Timer = (function () {\n    function Timer() {\n        this.reset();\n    }\n    Timer.prototype.start = function () {\n        if (this.startTime === null)\n            this.startTime = _.now();\n    };\n    Timer.prototype.pause = function () {\n        var runningTime = this.getRunningTime();\n        if (runningTime !== null) {\n            this.totalTime += runningTime;\n            this.startTime = null;\n        }\n    };\n    Timer.prototype.getRunningTime = function () {\n        return this.startTime !== null ? _.now() - this.startTime : null;\n    };\n    Timer.prototype.getTotalTime = function () {\n        return this.totalTime + (this.getRunningTime() || 0);\n    };\n    Timer.prototype.reset = function () {\n        this.totalTime = 0;\n        this.startTime = null;\n    };\n    return Timer;\n}());\nexports.Timer = Timer;\n\n\n/***/ }),\n\n/***/ \"4I4A\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/large/large-a3.2f39989763b3636f69b02ba2b53fbe44.png\";\n\n/***/ }),\n\n/***/ \"4mO9\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar db_1 = __webpack_require__(\"ATbC\");\nvar Wasm;\n(function (Wasm) {\n    function getCached(url) {\n        return db_1.db.wasm.get(url, function (wasmItem) {\n            console.log(\"wasm from db:\");\n            console.debug(wasmItem);\n            return wasmItem !== undefined ? wasmItem.module : undefined;\n        });\n    }\n    Wasm.getCached = getCached;\n    function cache(url, module) {\n        var wasmItem = {\n            url: url,\n            module: module\n        };\n        console.log(\"wasm to db:\");\n        console.debug(wasmItem);\n        db_1.db.transaction(\"rw\", db_1.db.wasm, function () {\n            return db_1.db.wasm.clear().then(function () {\n                return db_1.db.wasm.put(wasmItem);\n            });\n        }).then(function () { return console.log(\"wasm cached\"); });\n    }\n    Wasm.cache = cache;\n})(Wasm = exports.Wasm || (exports.Wasm = {}));\n\n\n/***/ }),\n\n/***/ \"5AqA\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _ = __webpack_require__(\"M4fF\");\nfunction formatDuration(diffMs) {\n    var diffSec = diffMs / 1000;\n    var sec = Math.floor(diffSec) % 60;\n    var min = Math.floor(diffSec / 60) % 60;\n    var hr = Math.floor(diffSec / 60 / 60);\n    return _.padStart(hr.toString(), 2, \"0\") + \":\" + _.padStart(min.toString(), 2, \"0\") + \":\" + _.padStart(sec.toString(), 2, \"0\");\n    /*let ms = Math.floor(diffMs % 1000);\n    return `${_.padStart(hr.toString(), 2, \"0\")}:${_.padStart(min.toString(), 2, \"0\")}:${_.padStart(sec.toString(), 2, \"0\")}.${_.padStart(ms.toString(), 3, \"0\")}`;*/\n}\nexports.formatDuration = formatDuration;\n\n\n/***/ }),\n\n/***/ \"6RO1\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = __webpack_require__(\"TToO\");\nvar _ = __webpack_require__(\"M4fF\");\nvar RandomHint_1 = __webpack_require__(\"gYeE\");\nvar HintsGenerator_1 = __webpack_require__(\"S+P+\");\nvar ExtraHintsGenerator = (function (_super) {\n    tslib_1.__extends(ExtraHintsGenerator, _super);\n    function ExtraHintsGenerator() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ExtraHintsGenerator.prototype.supports = function (options) {\n        return _super.prototype.supports.call(this, options) && ExtraHintsGenerator.hintFactory.supports(options);\n    };\n    ExtraHintsGenerator.prototype.generate = function (options, board) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var hints;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.delegate.generate(options, board)];\n                    case 1:\n                        hints = _a.sent();\n                        return [2 /*return*/, ExtraHintsGenerator.generateExtraHints(options, board, hints)];\n                }\n            });\n        });\n    };\n    ExtraHintsGenerator.generateExtraHints = function (options, board, hints) {\n        hints = _.clone(hints);\n        var extraHints = Math.round((options.extraHintsPercent / 100) * hints.length);\n        console.debug(\"Adding extra hints: \" + extraHints);\n        for (var i = 0; i < extraHints; i++) {\n            var hint = ExtraHintsGenerator.hintFactory.random(board);\n            hints.push(hint);\n        }\n        return hints;\n    };\n    ExtraHintsGenerator.hintFactory = new RandomHint_1.RandomHintFactory();\n    return ExtraHintsGenerator;\n}(HintsGenerator_1.DelegateHintsGenerator));\nexports.ExtraHintsGenerator = ExtraHintsGenerator;\n\n\n/***/ }),\n\n/***/ \"6b+j\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/small/small-b2.1e0362bc91fe36a746482f52eea6cd78.png\";\n\n/***/ }),\n\n/***/ \"7PiI\":\n/***/ (function(module, exports, __webpack_require__) {\n\nvar map = {\n\t\"./icons/original/hint-adjacent.png\": \"Qj03\",\n\t\"./icons/original/hint-between.png\": \"IJZH\",\n\t\"./icons/original/hint-direction.png\": \"Op0r\",\n\t\"./icons/original/hint-tile.png\": \"qwlA\",\n\t\"./icons/original/large/large-a1.png\": \"QP0S\",\n\t\"./icons/original/large/large-a2.png\": \"NhLW\",\n\t\"./icons/original/large/large-a3.png\": \"4I4A\",\n\t\"./icons/original/large/large-a4.png\": \"ytF8\",\n\t\"./icons/original/large/large-a5.png\": \"TeOI\",\n\t\"./icons/original/large/large-a6.png\": \"N7YA\",\n\t\"./icons/original/large/large-b1.png\": \"UBU4\",\n\t\"./icons/original/large/large-b2.png\": \"w35o\",\n\t\"./icons/original/large/large-b3.png\": \"/BPU\",\n\t\"./icons/original/large/large-b4.png\": \"BRDO\",\n\t\"./icons/original/large/large-b5.png\": \"YKaq\",\n\t\"./icons/original/large/large-b6.png\": \"mPGt\",\n\t\"./icons/original/large/large-c1.png\": \"+bsQ\",\n\t\"./icons/original/large/large-c2.png\": \"oXIE\",\n\t\"./icons/original/large/large-c3.png\": \"XjqR\",\n\t\"./icons/original/large/large-c4.png\": \"mGEC\",\n\t\"./icons/original/large/large-c5.png\": \"rxGk\",\n\t\"./icons/original/large/large-c6.png\": \"oJmq\",\n\t\"./icons/original/large/large-d1.png\": \"cgSM\",\n\t\"./icons/original/large/large-d2.png\": \"oD70\",\n\t\"./icons/original/large/large-d3.png\": \"PWPq\",\n\t\"./icons/original/large/large-d4.png\": \"D3DT\",\n\t\"./icons/original/large/large-d5.png\": \"1Tjk\",\n\t\"./icons/original/large/large-d6.png\": \"q9gS\",\n\t\"./icons/original/large/large-e1.png\": \"ZvN9\",\n\t\"./icons/original/large/large-e2.png\": \"dcOB\",\n\t\"./icons/original/large/large-e3.png\": \"91Mv\",\n\t\"./icons/original/large/large-e4.png\": \"SAo3\",\n\t\"./icons/original/large/large-e5.png\": \"hli+\",\n\t\"./icons/original/large/large-e6.png\": \"YFuY\",\n\t\"./icons/original/large/large-f1.png\": \"ZNit\",\n\t\"./icons/original/large/large-f2.png\": \"zU+P\",\n\t\"./icons/original/large/large-f3.png\": \"gVWB\",\n\t\"./icons/original/large/large-f4.png\": \"yFfv\",\n\t\"./icons/original/large/large-f5.png\": \"t+UZ\",\n\t\"./icons/original/large/large-f6.png\": \"dSmd\",\n\t\"./icons/original/small/small-a1.png\": \"qpPT\",\n\t\"./icons/original/small/small-a2.png\": \"nVYH\",\n\t\"./icons/original/small/small-a3.png\": \"x5BK\",\n\t\"./icons/original/small/small-a4.png\": \"Htyr\",\n\t\"./icons/original/small/small-a5.png\": \"uVvn\",\n\t\"./icons/original/small/small-a6.png\": \"pqg3\",\n\t\"./icons/original/small/small-b1.png\": \"27d+\",\n\t\"./icons/original/small/small-b2.png\": \"6b+j\",\n\t\"./icons/original/small/small-b3.png\": \"RUP8\",\n\t\"./icons/original/small/small-b4.png\": \"romA\",\n\t\"./icons/original/small/small-b5.png\": \"fZOX\",\n\t\"./icons/original/small/small-b6.png\": \"Z31m\",\n\t\"./icons/original/small/small-c1.png\": \"kbZK\",\n\t\"./icons/original/small/small-c2.png\": \"gBE2\",\n\t\"./icons/original/small/small-c3.png\": \"mcFw\",\n\t\"./icons/original/small/small-c4.png\": \"90E6\",\n\t\"./icons/original/small/small-c5.png\": \"AQov\",\n\t\"./icons/original/small/small-c6.png\": \"20Ho\",\n\t\"./icons/original/small/small-d1.png\": \"C7Cf\",\n\t\"./icons/original/small/small-d2.png\": \"xDob\",\n\t\"./icons/original/small/small-d3.png\": \"Dvz/\",\n\t\"./icons/original/small/small-d4.png\": \"iXl1\",\n\t\"./icons/original/small/small-d5.png\": \"d6hy\",\n\t\"./icons/original/small/small-d6.png\": \"hFVX\",\n\t\"./icons/original/small/small-e1.png\": \"SCQN\",\n\t\"./icons/original/small/small-e2.png\": \"uLm8\",\n\t\"./icons/original/small/small-e3.png\": \"E9CV\",\n\t\"./icons/original/small/small-e4.png\": \"XnXw\",\n\t\"./icons/original/small/small-e5.png\": \"P2+R\",\n\t\"./icons/original/small/small-e6.png\": \"lgdU\",\n\t\"./icons/original/small/small-f1.png\": \"voAe\",\n\t\"./icons/original/small/small-f2.png\": \"xFS2\",\n\t\"./icons/original/small/small-f3.png\": \"Hoba\",\n\t\"./icons/original/small/small-f4.png\": \"yNUn\",\n\t\"./icons/original/small/small-f5.png\": \"MjYr\",\n\t\"./icons/original/small/small-f6.png\": \"QfaF\",\n\t\"./icons/original/tile.png\": \"FslU\",\n\t\"./rain-light.png\": \"8OvN\",\n\t\"./rain.png\": \"kCQN\"\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"7PiI\";\n\n/***/ }),\n\n/***/ \"7Pv6\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = __webpack_require__(\"TToO\");\nvar dexie_1 = __webpack_require__(\"dlzC\");\nvar EinsteinDatabase = (function (_super) {\n    tslib_1.__extends(EinsteinDatabase, _super);\n    function EinsteinDatabase() {\n        var _this = _super.call(this, \"EinsteinDatabase\") || this;\n        _this.version(1).stores({\n            times: \"++, [rows+cols+extraHintsPercent]\"\n        });\n        _this.version(2).stores({\n            config: \"key\"\n        });\n        _this.version(3).stores({\n            counts: \"[rows+cols+extraHintsPercent]\"\n        });\n        /*\n        counts has puzzle options as primary key.\n        Dexie can't upgrade primary key changes automatically: https://github.com/dfahlander/Dexie.js/issues/88#issuecomment-285384576\n        Must use temporary table to recreate with additional auto-increment primary key.\n        Must use separate versions for deletion for some reason: https://github.com/dfahlander/Dexie.js/issues/105#issuecomment-405670992\n         */\n        _this.version(4).stores({\n            countsTmp: \"[rows+cols+extraHintsPercent]\"\n        }).upgrade(function (tx) { return tslib_1.__awaiter(_this, void 0, void 0, function () {\n            var countsItems;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, tx.table(\"counts\").toArray()];\n                    case 1:\n                        countsItems = _a.sent();\n                        return [4 /*yield*/, tx.table(\"countsTmp\").bulkAdd(countsItems)];\n                    case 2:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        }); });\n        _this.version(5).stores({\n            counts: null\n        });\n        _this.version(6).stores({\n            counts: \"++id, [rows+cols+extraHintsPercent]\"\n        }).upgrade(function (tx) { return tslib_1.__awaiter(_this, void 0, void 0, function () {\n            var countsItemsTmp;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, tx.table(\"countsTmp\").toArray()];\n                    case 1:\n                        countsItemsTmp = _a.sent();\n                        return [4 /*yield*/, tx.table(\"counts\").bulkAdd(countsItemsTmp)];\n                    case 2:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        }); });\n        _this.version(7).stores({\n            countsTmp: null\n        });\n        _this.version(8).stores({\n            times: \"++, [rows+cols+extraHintsPercent+difficulty]\",\n            counts: \"++id, [rows+cols+extraHintsPercent+difficulty]\"\n        }).upgrade(function (tx) {\n            return dexie_1.default.Promise.all([\n                tx.table(\"times\").toCollection().modify({\n                    difficulty: \"normal\"\n                }),\n                tx.table(\"config\").update(\"options\", {\n                    \"value.difficulty\": \"normal\" // actual object is in value\n                }),\n                tx.table(\"counts\").toCollection().modify({\n                    difficulty: \"normal\"\n                }),\n            ]);\n        });\n        _this.version(9).stores({\n            wasm: \"url\"\n        });\n        return _this;\n    }\n    return EinsteinDatabase;\n}(dexie_1.default));\nexports.EinsteinDatabase = EinsteinDatabase;\n\n\n/***/ }),\n\n/***/ \"7Stf\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = __webpack_require__(\"TToO\");\nvar _ = __webpack_require__(\"M4fF\");\nvar db_1 = __webpack_require__(\"ATbC\");\nvar Counts;\n(function (Counts) {\n    function get(options) {\n        return db_1.db.counts.get(tslib_1.__assign({}, options), function (countsItem) {\n            if (countsItem === undefined) {\n                var defaultItem = tslib_1.__assign({}, options, { solved: 0, solvedCheated: 0, over: 0 }); // extracted to have explicit type annotation\n                return defaultItem;\n            }\n            else\n                return countsItem;\n        });\n    }\n    Counts.get = get;\n    function getTopCounts() {\n        return db_1.db.counts.toArray().then(function (countsItems) {\n            return _.orderBy(countsItems, function (countsItem) {\n                return countsItem.solved + countsItem.solvedCheated + countsItem.over;\n            }, [\"desc\"]);\n        });\n    }\n    Counts.getTopCounts = getTopCounts;\n    function increase(options, count) {\n        return db_1.db.transaction(\"rw\", db_1.db.counts, function () {\n            return get(options).then(function (countsItem) {\n                var newCountsItem = _.merge(countsItem, (_a = {},\n                    _a[count] = countsItem[count] + 1,\n                    _a));\n                return db_1.db.counts.put(newCountsItem);\n                var _a;\n            });\n        });\n    }\n    Counts.increase = increase;\n})(Counts = exports.Counts || (exports.Counts = {}));\n\n\n/***/ }),\n\n/***/ \"7YgM\":\n/***/ (function(module, exports) {\n\nmodule.exports = {\"name\":\"einstein\",\"version\":\"2.0.0\",\"description\":\"Einstein Puzzle 2.0 by Flowix Games ported to the web\",\"author\":\"Simmo Saan\",\"keywords\":[\"typescript\",\"webpack\",\"preact\",\"lodash\",\"game\",\"puzzle-game\",\"web\"],\"repository\":{\"type\":\"git\",\"url\":\"git+https://github.com/sim642/einstein-js.git\"},\"bugs\":{\"url\":\"https://github.com/sim642/einstein-js/issues\"},\"homepage\":\"http://einstein.sim642.eu\",\"scripts\":{\"build:dev\":\"webpack --env=dev --progress --profile --colors\",\"build:prod\":\"webpack --env=prod --progress --profile --colors\",\"coverage\":\"nyc --reporter=lcov --reporter=text npm test\",\"deploy\":\"git push -f origin `git subtree split --prefix dist 2> /dev/null`:gh-pages\",\"test\":\"mocha-webpack\",\"watch:dev\":\"webpack --env=dev --progress --profile --colors --watch\",\"watch:test\":\"mocha-webpack --watch\"},\"dependencies\":{\"classnames\":\"^2.2.5\",\"dexie\":\"^3.0.0-alpha.3\",\"lodash\":\"^4.17.10\",\"preact\":\"^8.2.1\",\"tslib\":\"^1.9.3\",\"z3em\":\"^0.0.5\"},\"devDependencies\":{\"@types/chai\":\"^4.1.4\",\"@types/lodash\":\"^4.14.112\",\"@types/mocha\":\"^5.2.5\",\"@types/webassembly-js-api\":\"0.0.1\",\"@types/webpack-env\":\"^1.13.0\",\"autoprefixer\":\"^7.1.2\",\"chai\":\"^4.1.2\",\"chi-squared\":\"^1.1.0\",\"chunk-manifest-webpack-plugin\":\"1.1.0\",\"clean-webpack-plugin\":\"^0.1.16\",\"copy-webpack-plugin\":\"^4.0.1\",\"css-loader\":\"^0.28.4\",\"css-mqpacker\":\"^6.0.1\",\"extract-text-webpack-plugin\":\"^3.0.0\",\"file-loader\":\"^0.11.2\",\"html-webpack-plugin\":\"^2.29.0\",\"istanbul-instrumenter-loader\":\"^3.0.0\",\"less\":\"^2.7.2\",\"less-loader\":\"^4.0.4\",\"mocha\":\"^5.2.0\",\"mocha-webpack\":\"^1.1.0\",\"nyc\":\"^12.0.2\",\"offline-plugin\":\"^4.8.1\",\"postcss-loader\":\"^2.0.6\",\"style-loader\":\"^0.18.2\",\"ts-loader\":\"^2.2.0\",\"typescript\":\"^2.4.2\",\"webpack\":\"^3.0.0\",\"webpack-chunk-hash\":\"^0.4.0\",\"webpack-merge\":\"^4.1.0\",\"webpack-node-externals\":\"^1.6.0\"},\"nyc\":{\"extension\":[\".tsx\",\".ts\",\".jsx\"],\"instrument\":false,\"sourceMap\":false}}\n\n/***/ }),\n\n/***/ \"8OvN\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"./rain-light.272fb79b7c99a89b9891f2d596aabecc.png\";\n\n/***/ }),\n\n/***/ \"90E6\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/small/small-c4.bc367c0d574d1037f7983b61b94776bf.png\";\n\n/***/ }),\n\n/***/ \"91Mv\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/large/large-e3.24b0bdf46ccfa5fae6d324e4b08c9a31.png\";\n\n/***/ }),\n\n/***/ \"99qC\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"9OCd\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _ = __webpack_require__(\"M4fF\");\nfunction mean(arr) {\n    return _.sum(arr) / arr.length;\n}\nexports.mean = mean;\nfunction variance(arr, knownMean) {\n    if (knownMean === void 0) { knownMean = mean(arr); }\n    return _.sumBy(arr, function (x) { return Math.pow(x - knownMean, 2); }) / arr.length;\n}\nexports.variance = variance;\nfunction stdDev(arr, knownMean) {\n    if (knownMean === void 0) { knownMean = mean(arr); }\n    return Math.sqrt(variance(arr, knownMean));\n}\nexports.stdDev = stdDev;\n\n\n/***/ }),\n\n/***/ \"AQov\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/small/small-c5.9254afe6e7940800db50da758cb752df.png\";\n\n/***/ }),\n\n/***/ \"ATbC\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EinsteinDatabase_1 = __webpack_require__(\"7Pv6\");\nexports.db = new EinsteinDatabase_1.EinsteinDatabase();\n\n\n/***/ }),\n\n/***/ \"Agl8\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar MessageUnloadListener = (function () {\n    function MessageUnloadListener(callback) {\n        var _this = this;\n        this.callback = callback;\n        this.onBeforeUnload = function (e) {\n            var message = _this.callback();\n            if (message !== null)\n                return e.returnValue = message;\n            else\n                return undefined;\n        };\n    }\n    MessageUnloadListener.prototype.add = function () {\n        window.addEventListener(\"beforeunload\", this.onBeforeUnload);\n    };\n    MessageUnloadListener.prototype.remove = function () {\n        window.removeEventListener(\"beforeunload\", this.onBeforeUnload);\n    };\n    return MessageUnloadListener;\n}());\nexports.MessageUnloadListener = MessageUnloadListener;\n\n\n/***/ }),\n\n/***/ \"BRDO\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/large/large-b4.cde289fd73095da992ec76470fcaf001.png\";\n\n/***/ }),\n\n/***/ \"C7Cf\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/small/small-d1.4623124355805891864ed2e7f2bec09a.png\";\n\n/***/ }),\n\n/***/ \"CBd9\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = __webpack_require__(\"TToO\");\nvar _ = __webpack_require__(\"M4fF\");\nvar Board_1 = __webpack_require__(\"bWR4\");\nvar MultiBoard = (function (_super) {\n    tslib_1.__extends(MultiBoard, _super);\n    function MultiBoard() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    MultiBoard.full = function (options) {\n        return new MultiBoard(_.times(options.rows, function (row) { return _.times(options.cols, function (col) { return _.times(options.cols, _.constant(true)); }); }), options);\n    };\n    MultiBoard.numberVariants = function (table, options) {\n        return new MultiBoard(_.map(table, function (rowCells) { return _.map(rowCells, function (cell) {\n            var variants = _.times(rowCells.length, _.constant(false));\n            for (var _i = 0, cell_1 = cell; _i < cell_1.length; _i++) {\n                var numberVariant = cell_1[_i];\n                variants[numberVariant] = true;\n            }\n            return variants;\n        }); }), options);\n    };\n    MultiBoard.prototype.remove = function (row, col, variant) {\n        if (this.get(row, col)[variant]) {\n            this.get(row, col)[variant] = false;\n            this.pruneSingles(row);\n        }\n    };\n    MultiBoard.prototype.set = function (row, col, variant) {\n        for (var variant_1 = 0; variant_1 < this.variants; variant_1++)\n            this.get(row, col)[variant_1] = false;\n        for (var col_1 = 0; col_1 < this.cols; col_1++)\n            this.get(row, col_1)[variant] = false;\n        this.get(row, col)[variant] = true;\n        this.pruneSingles(row);\n    };\n    MultiBoard.prototype.isPossible = function (row, col, variant) {\n        return this.get(row, col)[variant];\n    };\n    MultiBoard.prototype.count = function (row, col) {\n        return _.sumBy(this.get(row, col), function (variant) { return variant ? 1 : 0; });\n    };\n    MultiBoard.prototype.isSingle = function (row, col) {\n        return this.count(row, col) == 1;\n    };\n    MultiBoard.prototype.getSingle = function (row, col) {\n        return _.findIndex(this.get(row, col));\n    };\n    MultiBoard.prototype.pruneSingles = function (row) {\n        var colCnt = _.times(this.cols, _.constant(0));\n        var variantCnt = _.times(this.variants, _.constant(0));\n        var colVariant = _.times(this.cols, _.constant(0));\n        var variantCol = _.times(this.variants, _.constant(0));\n        for (var col = 0; col < this.cols; col++) {\n            for (var variant = 0; variant < this.variants; variant++) {\n                if (this.get(row, col)[variant]) {\n                    colCnt[col]++;\n                    variantCnt[variant]++;\n                    colVariant[col] = variant;\n                    variantCol[variant] = col;\n                }\n            }\n        }\n        var changed = false;\n        for (var col = 0; col < this.cols; col++) {\n            if (colCnt[col] == 1 && variantCnt[colVariant[col]] != 1) {\n                var variant = colVariant[col];\n                for (var col2 = 0; col2 < this.cols; col2++) {\n                    if (col2 != col)\n                        this.get(row, col2)[variant] = false;\n                }\n                changed = true;\n            }\n        }\n        for (var variant = 0; variant < this.variants; variant++) {\n            if (variantCnt[variant] == 1 && colCnt[variantCol[variant]] != 1) {\n                var col = variantCol[variant];\n                for (var variant2 = 0; variant2 < this.variants; variant2++) {\n                    if (variant2 != variant)\n                        this.get(row, col)[variant2] = false;\n                }\n                changed = true;\n            }\n        }\n        if (changed)\n            this.pruneSingles(row);\n    };\n    MultiBoard.prototype.applyHint = function (hint) {\n        return hint.applyTo(this);\n    };\n    MultiBoard.prototype.applyHints = function (hints) {\n        var changed = false;\n        var changed2;\n        do {\n            changed2 = false;\n            for (var _i = 0, hints_1 = hints; _i < hints_1.length; _i++) {\n                var hint = hints_1[_i];\n                if (this.applyHint(hint))\n                    changed = changed2 = true;\n            }\n        } while (changed2);\n        return changed;\n    };\n    MultiBoard.prototype.applySingleHint = function (hints) {\n        for (var _i = 0, hints_2 = hints; _i < hints_2.length; _i++) {\n            var hint = hints_2[_i];\n            if (this.applyHint(hint))\n                return true;\n        }\n        return false;\n    };\n    MultiBoard.prototype.isSolved = function (singleBoard) {\n        return this.isSingleBoard() && this.contains(singleBoard);\n    };\n    MultiBoard.prototype.isSingleBoard = function () {\n        for (var row = 0; row < this.rows; row++) {\n            for (var col = 0; col < this.cols; col++) {\n                if (!this.isSingle(row, col))\n                    return false;\n            }\n        }\n        return true;\n    };\n    MultiBoard.prototype.contains = function (singleBoard) {\n        for (var row = 0; row < this.rows; row++) {\n            for (var col = 0; col < this.cols; col++) {\n                if (!this.isPossible(row, col, singleBoard.get(row, col)))\n                    return false;\n            }\n        }\n        return true;\n    };\n    MultiBoard.prototype.applySingleBoard = function (singleBoard) {\n        if (this.isSolved(singleBoard))\n            return false;\n        else {\n            for (var row = 0; row < this.rows; row++) {\n                for (var col = 0; col < this.cols; col++) {\n                    var singleVariant = singleBoard.get(row, col);\n                    for (var variant = 0; variant < this.variants; variant++)\n                        this.get(row, col)[variant] = variant == singleVariant;\n                }\n            }\n            return true;\n        }\n    };\n    return MultiBoard;\n}(Board_1.Board));\nexports.MultiBoard = MultiBoard;\n\n\n/***/ }),\n\n/***/ \"D3DT\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/large/large-d4.08e21c2cf4f787a7913cc84db58777ec.png\";\n\n/***/ }),\n\n/***/ \"DAXx\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _ = __webpack_require__(\"M4fF\");\nvar BetweenHint = (function () {\n    function BetweenHint(row1, variant1, rowMiddle, variantMiddle, row2, variant2) {\n        this.row1 = row1;\n        this.variant1 = variant1;\n        this.rowMiddle = rowMiddle;\n        this.variantMiddle = variantMiddle;\n        this.row2 = row2;\n        this.variant2 = variant2;\n    }\n    BetweenHint.prototype.applyTo = function (board) {\n        var changed = false;\n        if (board.isPossible(this.rowMiddle, 0, this.variantMiddle)) {\n            board.remove(this.rowMiddle, 0, this.variantMiddle);\n            changed = true;\n        }\n        if (board.isPossible(this.rowMiddle, board.cols - 1, this.variantMiddle)) {\n            board.remove(this.rowMiddle, board.cols - 1, this.variantMiddle);\n            changed = true;\n        }\n        var changed2;\n        do {\n            changed2 = false;\n            for (var col = 1; col < board.cols - 1; col++) {\n                if (board.isPossible(this.rowMiddle, col, this.variantMiddle) &&\n                    !(board.isPossible(this.row1, col - 1, this.variant1) && board.isPossible(this.row2, col + 1, this.variant2) ||\n                        board.isPossible(this.row2, col - 1, this.variant2) && board.isPossible(this.row1, col + 1, this.variant1))) {\n                    board.remove(this.rowMiddle, col, this.variantMiddle);\n                    changed2 = true;\n                }\n            }\n            for (var col = 0; col < board.cols; col++) {\n                if (board.isPossible(this.row1, col, this.variant1)) {\n                    var leftPossible = col >= 2 ? board.isPossible(this.rowMiddle, col - 1, this.variantMiddle) && board.isPossible(this.row2, col - 2, this.variant2) : false;\n                    var rightPossible = col < board.cols - 2 ? board.isPossible(this.rowMiddle, col + 1, this.variantMiddle) && board.isPossible(this.row2, col + 2, this.variant2) : false;\n                    if (!leftPossible && !rightPossible) {\n                        board.remove(this.row1, col, this.variant1);\n                        changed2 = true;\n                    }\n                }\n                if (board.isPossible(this.row2, col, this.variant2)) {\n                    var leftPossible = col >= 2 ? board.isPossible(this.rowMiddle, col - 1, this.variantMiddle) && board.isPossible(this.row1, col - 2, this.variant1) : false;\n                    var rightPossible = col < board.cols - 2 ? board.isPossible(this.rowMiddle, col + 1, this.variantMiddle) && board.isPossible(this.row1, col + 2, this.variant1) : false;\n                    if (!leftPossible && !rightPossible) {\n                        board.remove(this.row2, col, this.variant2);\n                        changed2 = true;\n                    }\n                }\n            }\n            if (changed2)\n                changed = true;\n        } while (changed2);\n        return changed;\n    };\n    BetweenHint.prototype.getType = function () {\n        return 1 /* Horizontal */;\n    };\n    return BetweenHint;\n}());\nexports.BetweenHint = BetweenHint;\nvar BetweenHintFactory = (function () {\n    function BetweenHintFactory() {\n    }\n    BetweenHintFactory.prototype.supports = function (options) {\n        return options.rows >= 1 && options.cols >= 3;\n    };\n    BetweenHintFactory.prototype.random = function (board) {\n        var row1 = _.random(0, board.rows - 1);\n        var rowMiddle = _.random(0, board.rows - 1);\n        var colMiddle = _.random(1, board.cols - 2);\n        var row2 = _.random(0, board.rows - 1);\n        var colDelta = _.random(0, 1) == 1 ? 1 : -1;\n        var col1 = colMiddle + colDelta;\n        var col2 = colMiddle - colDelta;\n        return new BetweenHint(row1, board.get(row1, col1), rowMiddle, board.get(rowMiddle, colMiddle), row2, board.get(row2, col2));\n    };\n    return BetweenHintFactory;\n}());\nexports.BetweenHintFactory = BetweenHintFactory;\n\n\n/***/ }),\n\n/***/ \"Dvz/\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/small/small-d3.402ab38c15f0b6e6d5bf8c21c1966cac.png\";\n\n/***/ }),\n\n/***/ \"E9CV\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/small/small-e3.158bc24007fc557a4756dcaaf638f81c.png\";\n\n/***/ }),\n\n/***/ \"FslU\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/tile.3631d1df5b147c00992f293ab1246a12.png\";\n\n/***/ }),\n\n/***/ \"GgXB\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DifficultyHintsGenerator = (function () {\n    function DifficultyHintsGenerator(generators) {\n        this.generators = generators;\n    }\n    DifficultyHintsGenerator.prototype.supports = function (options) {\n        return this.generators[options.difficulty].supports(options);\n    };\n    DifficultyHintsGenerator.prototype.generate = function (options, board) {\n        return this.generators[options.difficulty].generate(options, board);\n    };\n    return DifficultyHintsGenerator;\n}());\nexports.DifficultyHintsGenerator = DifficultyHintsGenerator;\n\n\n/***/ }),\n\n/***/ \"HZR3\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _ = __webpack_require__(\"M4fF\");\nvar db_1 = __webpack_require__(\"ATbC\");\nvar Config;\n(function (Config) {\n    function getKey(key) {\n        return db_1.db.config.get(key, function (configItem) { return configItem !== undefined ? configItem.value : undefined; });\n    }\n    Config.getKey = getKey;\n    function get() {\n        return db_1.db.config.toArray(function (configItems) {\n            return _.fromPairs(_.map(configItems, function (configItem) { return [configItem.key, configItem.value]; }));\n        });\n    }\n    Config.get = get;\n    function setKey(key, value) {\n        return db_1.db.config.put({\n            key: key,\n            value: value\n        });\n    }\n    Config.setKey = setKey;\n    function set(newConfig) {\n        return db_1.db.config.bulkPut(_.map(_.toPairs(newConfig), function (pair) { return ({ key: pair[0], value: pair[1] }); }));\n    }\n    Config.set = set;\n})(Config = exports.Config || (exports.Config = {}));\n\n\n/***/ }),\n\n/***/ \"Hoba\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/small/small-f3.5b7ae0c2d05c4e28148dc866a5094d67.png\";\n\n/***/ }),\n\n/***/ \"Htyr\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/small/small-a4.0ef2cddeeac6822a557e42295feb1e3c.png\";\n\n/***/ }),\n\n/***/ \"HwaM\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _ = __webpack_require__(\"M4fF\");\nvar OpenHint = (function () {\n    function OpenHint(row, col, variant) {\n        this.row = row;\n        this.col = col;\n        this.variant = variant;\n    }\n    OpenHint.prototype.applyTo = function (board) {\n        if (!board.isSingle(this.row, this.col)) {\n            board.set(this.row, this.col, this.variant);\n            return true;\n        }\n        else\n            return false;\n    };\n    OpenHint.prototype.getType = function () {\n        return 0 /* Start */;\n    };\n    return OpenHint;\n}());\nexports.OpenHint = OpenHint;\nvar OpenHintFactory = (function () {\n    function OpenHintFactory() {\n    }\n    OpenHintFactory.prototype.supports = function (options) {\n        return options.rows >= 1 && options.cols >= 1;\n    };\n    OpenHintFactory.prototype.random = function (board) {\n        var row = _.random(0, board.rows - 1);\n        var col = _.random(0, board.cols - 1);\n        return new OpenHint(row, col, board.get(row, col));\n    };\n    return OpenHintFactory;\n}());\nexports.OpenHintFactory = OpenHintFactory;\n\n\n/***/ }),\n\n/***/ \"I4NM\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction median(arr) {\n    var n = arr.length;\n    if (n % 2 === 0)\n        return (arr[n / 2 - 1] + arr[n / 2]) / 2;\n    else\n        return arr[(n - 1) / 2];\n}\nexports.median = median;\n// Tukey's hinges (include median) - https://en.wikipedia.org/wiki/Quartile#Method_2\nfunction lowerQuartile(arr) {\n    var n = arr.length;\n    var end = n % 2 === 0 ? n / 2 : (n + 1) / 2;\n    return median(arr.slice(0, end));\n}\nexports.lowerQuartile = lowerQuartile;\nfunction upperQuartile(arr) {\n    var n = arr.length;\n    var start = n % 2 === 0 ? n / 2 : (n - 1) / 2;\n    return median(arr.slice(start));\n}\nexports.upperQuartile = upperQuartile;\n\n\n/***/ }),\n\n/***/ \"IJZH\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/hint-between.4800cdbe6818a1ee91adb4003d1dc435.png\";\n\n/***/ }),\n\n/***/ \"In3e\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = __webpack_require__(\"TToO\");\nvar _ = __webpack_require__(\"M4fF\");\nvar preact_1 = __webpack_require__(\"rMlB\");\n__webpack_require__(\"Jd+4\");\n__webpack_require__(\"uyRy\");\nvar Counts_1 = __webpack_require__(\"7Stf\");\nvar Times_1 = __webpack_require__(\"vO/K\");\nvar time_1 = __webpack_require__(\"5AqA\");\nvar PuzzleOptionsUtils_1 = __webpack_require__(\"fdQW\");\nvar statistics = __webpack_require__(\"9OCd\");\nvar sortedStatistics = __webpack_require__(\"I4NM\");\nvar HighscoreItemComponent = (function (_super) {\n    tslib_1.__extends(HighscoreItemComponent, _super);\n    function HighscoreItemComponent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    HighscoreItemComponent.prototype.render = function (props) {\n        return (preact_1.h(\"tr\", null,\n            preact_1.h(\"td\", { class: \"highscore-i\" }, props.i + 1 + \".\"),\n            preact_1.h(\"td\", { class: \"highscore-name\", title: props.item.date.toString() }, props.item.name),\n            preact_1.h(\"td\", { class: \"highscore-time\" }, time_1.formatDuration(props.item.time))));\n    };\n    return HighscoreItemComponent;\n}(preact_1.Component));\nvar HighscoreTableComponent = (function (_super) {\n    tslib_1.__extends(HighscoreTableComponent, _super);\n    function HighscoreTableComponent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    HighscoreTableComponent.prototype.render = function (props) {\n        return (preact_1.h(\"table\", { class: \"highscore\" },\n            preact_1.h(\"thead\", null,\n                preact_1.h(\"tr\", null,\n                    preact_1.h(\"th\", { class: \"highscore-i\" }, \"#\\u00A0\"),\n                    preact_1.h(\"th\", { class: \"highscore-name\" }, \"Name\"),\n                    preact_1.h(\"th\", { class: \"highscore-time\" }, \"Time\"))),\n            preact_1.h(\"tbody\", null, props.top10 !== undefined && props.top10.length > 0 ?\n                _.map(props.top10, function (timesItem, i) {\n                    return preact_1.h(HighscoreItemComponent, { i: i, item: timesItem });\n                }) :\n                preact_1.h(\"tr\", { class: \"highscore-text\" },\n                    preact_1.h(\"td\", { colSpan: 3 }, props.top10 !== undefined ?\n                        \"No times\" :\n                        \"Loading...\")))));\n    };\n    return HighscoreTableComponent;\n}(preact_1.Component));\nvar StatsComponent = (function (_super) {\n    tslib_1.__extends(StatsComponent, _super);\n    function StatsComponent(props) {\n        var _this = _super.call(this) || this;\n        _this.state = {\n            counts: undefined\n        };\n        _this.fetchCounts(props);\n        return _this;\n    }\n    StatsComponent.prototype.componentWillReceiveProps = function (nextProps) {\n        if (this.props.options !== nextProps.options) {\n            this.fetchCounts(nextProps);\n        }\n    };\n    StatsComponent.prototype.fetchCounts = function (props) {\n        var _this = this;\n        Counts_1.Counts.get(props.options).then(function (countsItem) {\n            _this.setState({\n                counts: countsItem\n            });\n        });\n    };\n    StatsComponent.prototype.render = function (props, state) {\n        var stats = props.stats;\n        var counts = state.counts;\n        if (stats !== undefined && counts !== undefined) {\n            var total_1 = counts.solved + counts.solvedCheated + counts.over;\n            var countWithPercentage = function (count) {\n                var percentage = count / total_1 * 100;\n                return (preact_1.h(\"dd\", null,\n                    count,\n                    \" \",\n                    preact_1.h(\"small\", { class: \"small-number\" },\n                        \"(\",\n                        percentage.toFixed(0),\n                        \"%)\")));\n            };\n            return (preact_1.h(\"div\", { class: \"stats\" },\n                preact_1.h(\"dl\", null,\n                    preact_1.h(\"div\", null,\n                        preact_1.h(\"dt\", null, \"Games played\"),\n                        preact_1.h(\"dd\", null, total_1)),\n                    preact_1.h(\"dl\", null,\n                        preact_1.h(\"div\", null,\n                            preact_1.h(\"dt\", null, \"Solved\"),\n                            countWithPercentage(counts.solved)),\n                        preact_1.h(\"div\", null,\n                            preact_1.h(\"dt\", null,\n                                \"Solved \",\n                                preact_1.h(\"small\", null, \"w/\"),\n                                \" cheats\"),\n                            countWithPercentage(counts.solvedCheated)),\n                        preact_1.h(\"div\", null,\n                            preact_1.h(\"dt\", null, \"Over\"),\n                            countWithPercentage(counts.over))),\n                    preact_1.h(\"div\", null,\n                        preact_1.h(\"dt\", null, \"Time average\"),\n                        preact_1.h(\"dd\", null, time_1.formatDuration(stats.mean))),\n                    preact_1.h(\"dl\", null,\n                        preact_1.h(\"div\", null,\n                            preact_1.h(\"dt\", null, \"Std. dev.\"),\n                            preact_1.h(\"dd\", null, time_1.formatDuration(stats.stdDev)))),\n                    preact_1.h(\"div\", null,\n                        preact_1.h(\"dt\", null, \"Time quartiles\")),\n                    preact_1.h(\"dl\", null,\n                        preact_1.h(\"div\", null,\n                            preact_1.h(\"dt\", null,\n                                \"Lower \",\n                                preact_1.h(\"small\", null, \"(25%)\")),\n                            preact_1.h(\"dd\", null, time_1.formatDuration(stats.lowerQuartile))),\n                        preact_1.h(\"div\", null,\n                            preact_1.h(\"dt\", null,\n                                \"Median \",\n                                preact_1.h(\"small\", null, \"(50%)\")),\n                            preact_1.h(\"dd\", null, time_1.formatDuration(stats.median))),\n                        preact_1.h(\"div\", null,\n                            preact_1.h(\"dt\", null,\n                                \"Upper \",\n                                preact_1.h(\"small\", null, \"(75%)\")),\n                            preact_1.h(\"dd\", null, time_1.formatDuration(stats.upperQuartile))),\n                        preact_1.h(\"div\", null,\n                            preact_1.h(\"dt\", null, \"Max\"),\n                            preact_1.h(\"dd\", null, time_1.formatDuration(stats.max)))))));\n        }\n        else\n            return null;\n    };\n    return StatsComponent;\n}(preact_1.Component));\nvar HighscoreComponent = (function (_super) {\n    tslib_1.__extends(HighscoreComponent, _super);\n    function HighscoreComponent(props) {\n        var _this = _super.call(this) || this;\n        _this.state = {\n            top10: undefined,\n            stats: undefined\n        };\n        _this.fetchTimes(props);\n        return _this;\n    }\n    HighscoreComponent.prototype.componentWillReceiveProps = function (nextProps) {\n        if (this.props.options !== nextProps.options) {\n            this.fetchTimes(nextProps);\n        }\n    };\n    HighscoreComponent.calculateStats = function (timesItems) {\n        var sortedTimes = _.map(timesItems, \"time\");\n        var mean = statistics.mean(sortedTimes);\n        return {\n            count: sortedTimes.length,\n            mean: mean,\n            stdDev: statistics.stdDev(sortedTimes, mean),\n            lowerQuartile: sortedStatistics.lowerQuartile(sortedTimes),\n            median: sortedStatistics.median(sortedTimes),\n            upperQuartile: sortedStatistics.upperQuartile(sortedTimes),\n            max: _.max(sortedTimes) // never undefined because always has times\n        };\n    };\n    HighscoreComponent.prototype.fetchTimes = function (props) {\n        var _this = this;\n        Times_1.Times.getSortedTimes(props.options).then(function (timesItems) {\n            _this.setState({\n                top10: _.take(timesItems, 10),\n                stats: HighscoreComponent.calculateStats(timesItems)\n            });\n        });\n    };\n    HighscoreComponent.prototype.render = function (props, state) {\n        return (preact_1.h(\"div\", { class: \"highscore-outer\" },\n            preact_1.h(\"div\", { class: \"highscore-title\" }, PuzzleOptionsUtils_1.formatOptions(props.options)),\n            preact_1.h(HighscoreTableComponent, { top10: state.top10 }),\n            preact_1.h(\"hr\", null),\n            preact_1.h(StatsComponent, { options: props.options, stats: state.stats })));\n    };\n    return HighscoreComponent;\n}(preact_1.Component));\nexports.HighscoreComponent = HighscoreComponent;\n\n\n/***/ }),\n\n/***/ \"JIJM\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _ = __webpack_require__(\"M4fF\");\nvar SameColumnHint = (function () {\n    function SameColumnHint(row1, variant1, row2, variant2) {\n        this.row1 = row1;\n        this.variant1 = variant1;\n        this.row2 = row2;\n        this.variant2 = variant2;\n    }\n    SameColumnHint.prototype.applyTo = function (board) {\n        var changed = false;\n        for (var col = 0; col < board.cols; col++) {\n            var possible1 = board.isPossible(this.row1, col, this.variant1);\n            var possible2 = board.isPossible(this.row2, col, this.variant2);\n            if (!possible1 && possible2) {\n                board.remove(this.row2, col, this.variant2);\n                changed = true;\n            }\n            else if (possible1 && !possible2) {\n                board.remove(this.row1, col, this.variant1);\n                changed = true;\n            }\n        }\n        return changed;\n    };\n    SameColumnHint.prototype.getType = function () {\n        return 2 /* Vertical */;\n    };\n    return SameColumnHint;\n}());\nexports.SameColumnHint = SameColumnHint;\nvar SameColumnHintFactory = (function () {\n    function SameColumnHintFactory() {\n    }\n    SameColumnHintFactory.prototype.supports = function (options) {\n        return options.rows >= 2 && options.cols >= 1;\n    };\n    SameColumnHintFactory.prototype.random = function (board) {\n        var col = _.random(0, board.cols - 1);\n        var row1 = _.random(0, board.rows - 1);\n        var row2;\n        do {\n            row2 = _.random(0, board.rows - 1);\n        } while (row2 == row1);\n        return new SameColumnHint(row1, board.get(row1, col), row2, board.get(row2, col));\n    };\n    return SameColumnHintFactory;\n}());\nexports.SameColumnHintFactory = SameColumnHintFactory;\n\n\n/***/ }),\n\n/***/ \"JMRT\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = __webpack_require__(\"TToO\");\nvar _ = __webpack_require__(\"M4fF\");\nvar Board_1 = __webpack_require__(\"bWR4\");\nvar MultiBoard_1 = __webpack_require__(\"CBd9\");\nvar SingleBoard = (function (_super) {\n    tslib_1.__extends(SingleBoard, _super);\n    function SingleBoard() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SingleBoard.random = function (options) {\n        return new SingleBoard(_.times(options.rows, function (row) { return _.shuffle(_.range(options.cols)); }), options);\n    };\n    SingleBoard.prototype.getCol = function (row, variant) {\n        for (var col = 0; col < this.cols; col++) {\n            if (this.get(row, col) === variant)\n                return col;\n        }\n        return -1;\n    };\n    SingleBoard.prototype.isSolvable = function (hints) {\n        var multiBoard = MultiBoard_1.MultiBoard.full(this.options);\n        multiBoard.applyHints(hints);\n        return multiBoard.isSolved(this);\n    };\n    return SingleBoard;\n}(Board_1.Board));\nexports.SingleBoard = SingleBoard;\n\n\n/***/ }),\n\n/***/ \"Jd+4\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"JpXf\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"KBc0\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = __webpack_require__(\"TToO\");\nvar classNames = __webpack_require__(\"HW6M\");\nvar _ = __webpack_require__(\"M4fF\");\nvar preact_1 = __webpack_require__(\"rMlB\");\nvar AdjacentHint_1 = __webpack_require__(\"2+Yo\");\nvar BetweenHint_1 = __webpack_require__(\"DAXx\");\nvar DirectionHint_1 = __webpack_require__(\"X9r5\");\nvar SameColumnHint_1 = __webpack_require__(\"JIJM\");\nvar LongTouchContextMenuHandler_1 = __webpack_require__(\"euc6\");\n__webpack_require__(\"TjjG\");\nvar IconComponents_1 = __webpack_require__(\"NsAh\");\nvar HintComponent = (function (_super) {\n    tslib_1.__extends(HintComponent, _super);\n    function HintComponent() {\n        var _this = _super.call(this) || this;\n        _this.contextMenuHandler = new LongTouchContextMenuHandler_1.LongTouchContextMenuHandler(function () { return _this.onToggle(); });\n        _this.onToggle = function () {\n            _this.setState(function (state) {\n                return {\n                    visible: !state.visible\n                };\n            });\n        };\n        _this.state = {\n            visible: true\n        };\n        return _this;\n    }\n    HintComponent.prototype.componentWillReceiveProps = function (nextProps) {\n        if (this.props.hint !== nextProps.hint) {\n            this.setState({\n                visible: true\n            });\n        }\n    };\n    HintComponent.prototype.renderTbody = function (props) {\n        var hint = props.hint;\n        if (hint instanceof AdjacentHint_1.AdjacentHint) {\n            return (preact_1.h(\"tbody\", null,\n                preact_1.h(\"tr\", null,\n                    preact_1.h(\"td\", null,\n                        preact_1.h(IconComponents_1.LargeVariantIconComponent, { row: hint.row1, variant: hint.variant1 })),\n                    preact_1.h(\"td\", null,\n                        preact_1.h(IconComponents_1.IconComponent, { name: \"hint-adjacent\" })),\n                    preact_1.h(\"td\", null,\n                        preact_1.h(IconComponents_1.LargeVariantIconComponent, { row: hint.row2, variant: hint.variant2 })))));\n        }\n        else if (hint instanceof BetweenHint_1.BetweenHint) {\n            return (preact_1.h(\"tbody\", null,\n                preact_1.h(\"tr\", null,\n                    preact_1.h(\"td\", null,\n                        preact_1.h(IconComponents_1.LargeVariantIconComponent, { row: hint.row1, variant: hint.variant1 })),\n                    preact_1.h(\"td\", null,\n                        preact_1.h(IconComponents_1.LargeVariantIconComponent, { row: hint.rowMiddle, variant: hint.variantMiddle }),\n                        preact_1.h(\"div\", { class: \"hint-between\" },\n                            preact_1.h(IconComponents_1.IconComponent, { name: \"hint-between\" }))),\n                    preact_1.h(\"td\", null,\n                        preact_1.h(IconComponents_1.LargeVariantIconComponent, { row: hint.row2, variant: hint.variant2 })))));\n        }\n        else if (hint instanceof DirectionHint_1.DirectionHint) {\n            return (preact_1.h(\"tbody\", null,\n                preact_1.h(\"tr\", null,\n                    preact_1.h(\"td\", null,\n                        preact_1.h(IconComponents_1.LargeVariantIconComponent, { row: hint.rowLeft, variant: hint.variantLeft })),\n                    preact_1.h(\"td\", null,\n                        preact_1.h(IconComponents_1.IconComponent, { name: \"hint-direction\" })),\n                    preact_1.h(\"td\", null,\n                        preact_1.h(IconComponents_1.LargeVariantIconComponent, { row: hint.rowRight, variant: hint.variantRight })))));\n        }\n        else if (hint instanceof SameColumnHint_1.SameColumnHint) {\n            return (preact_1.h(\"tbody\", null,\n                preact_1.h(\"tr\", null,\n                    preact_1.h(\"td\", null,\n                        preact_1.h(IconComponents_1.LargeVariantIconComponent, { row: hint.row1, variant: hint.variant1 }))),\n                preact_1.h(\"tr\", null,\n                    preact_1.h(\"td\", null,\n                        preact_1.h(IconComponents_1.LargeVariantIconComponent, { row: hint.row2, variant: hint.variant2 })))));\n        }\n        else\n            throw new Error(\"Unsupported hint type\");\n    };\n    HintComponent.prototype.render = function (props, state) {\n        return (preact_1.h(\"div\", tslib_1.__assign({ class: classNames({\n                \"hint-outer\": true,\n                \"hint-visible\": state.visible,\n                \"hint-hidden\": !state.visible\n            }) }, this.contextMenuHandler),\n            preact_1.h(\"table\", { class: \"hint\" }, this.renderTbody(props))));\n    };\n    return HintComponent;\n}(preact_1.Component));\nvar HintsComponent = (function (_super) {\n    tslib_1.__extends(HintsComponent, _super);\n    function HintsComponent() {\n        var _this = _super.call(this) || this;\n        _this.onToggle = function (e) {\n            _this.setState(function (state) {\n                return {\n                    visible: !state.visible\n                };\n            });\n        };\n        _this.state = {\n            visible: true\n        };\n        return _this;\n    }\n    HintsComponent.prototype.componentWillReceiveProps = function (nextProps) {\n        if (this.props.hints !== nextProps.hints) {\n            this.setState({\n                visible: true\n            });\n        }\n    };\n    HintsComponent.prototype.render = function (props, state) {\n        return (preact_1.h(\"div\", { class: \"hints\" },\n            preact_1.h(\"button\", { class: \"button-toggle\", onClick: this.onToggle }, \"Toggle\"),\n            preact_1.h(\"div\", { class: classNames({\n                    \"hints-horizontal\": true,\n                    \"hints-visible\": state.visible,\n                    \"hints-hidden\": !state.visible\n                }) },\n                _.map(_.filter(props.hints, function (hint) { return hint.getType() === 1 /* Horizontal */; }), function (hint) {\n                    return preact_1.h(HintComponent, { hint: hint });\n                }),\n                _.map(_.filter(props.hints, function (hint) { return hint.getType() === 2 /* Vertical */; }), function (hint) {\n                    return preact_1.h(HintComponent, { hint: hint });\n                }))));\n    };\n    return HintsComponent;\n}(preact_1.Component));\nexports.HintsComponent = HintsComponent;\n\n\n/***/ }),\n\n/***/ \"MZjJ\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction isWasmSupported() {\n    // https://stackoverflow.com/a/47880734/854540\n    // TODO more thorough check\n    return typeof WebAssembly === \"object\";\n}\nexports.isWasmSupported = isWasmSupported;\n\n\n/***/ }),\n\n/***/ \"MjYr\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/small/small-f5.72cc42d0d642b89a43f7d5dae38777d0.png\";\n\n/***/ }),\n\n/***/ \"N7YA\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/large/large-a6.4ac50d73cecffe7683129cb537280e02.png\";\n\n/***/ }),\n\n/***/ \"Nf2I\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = __webpack_require__(\"TToO\");\nvar _ = __webpack_require__(\"M4fF\");\nvar Z3_1 = __webpack_require__(\"aDup\");\nvar AdjacentHint_1 = __webpack_require__(\"2+Yo\");\nvar BetweenHint_1 = __webpack_require__(\"DAXx\");\nvar DirectionHint_1 = __webpack_require__(\"X9r5\");\nvar OpenHint_1 = __webpack_require__(\"HwaM\");\nvar SameColumnHint_1 = __webpack_require__(\"JIJM\");\nvar RandomHint_1 = __webpack_require__(\"gYeE\");\nvar Z3HintsGenerator = (function () {\n    function Z3HintsGenerator() {\n    }\n    Z3HintsGenerator.prototype.supports = function (options) {\n        return Z3HintsGenerator.hintFactory.supports(options);\n    };\n    Z3HintsGenerator.prototype.generate = function (options, board) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var _a, hints;\n            return tslib_1.__generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        console.debug(\"getZ3\");\n                        _a = this;\n                        return [4 /*yield*/, Z3_1.getZ3()];\n                    case 1:\n                        _a.z3 = _b.sent();\n                        this.makeContext();\n                        // this.ask(\"(set-option :produce-unsat-cores true)\"); // TODO: why parser error?\n                        this.assertBoard(board);\n                        hints = this.generateHints(board);\n                        hints = this.pruneHints(board, hints);\n                        this.deleteContext();\n                        return [2 /*return*/, hints];\n                }\n            });\n        });\n    };\n    Z3HintsGenerator.prototype.makeContext = function () {\n        console.debug(\"makeContext\");\n        this.z3.global_param_set(\"unsat_core\", \"true\");\n        this.z3.global_param_set(\"smt.core.minimize\", \"true\");\n        var cfg = this.z3.mk_config();\n        this.ctx = this.z3.mk_context(cfg);\n        this.z3.set_error_handler(this.ctx, this.z3.errorHandler);\n        this.z3.del_config(cfg);\n    };\n    Z3HintsGenerator.prototype.ask = function (smtlib2) {\n        // console.debug(smtlib2);\n        return this.z3.eval_smtlib2_string(this.ctx, smtlib2).trim();\n    };\n    Z3HintsGenerator.prototype.deleteContext = function () {\n        console.debug(\"deleteContext\");\n        this.z3.del_context(this.ctx);\n    };\n    Z3HintsGenerator.prototype.generateHints = function (board) {\n        var hints = [];\n        while (!this.isUniqueSolvable()) {\n            var hint = Z3HintsGenerator.hintFactory.random(board);\n            hints.push(hint);\n            var i = hints.length - 1;\n            var constraint = Z3HintsGenerator.getHintConstraint(hint);\n            this.ask(\"(assert (! \" + constraint + \" :named h\" + i + \"))\");\n        }\n        return hints;\n    };\n    Z3HintsGenerator.prototype.pruneHints = function (board, hints) {\n        console.debug(\"Before pruneHints: \" + hints.length);\n        var getUnsatCore = this.ask(\"(get-unsat-core)\");\n        console.debug(getUnsatCore);\n        var coreIs = _.map(getUnsatCore.match(/\\d+/g), function (i) { return parseInt(i); });\n        hints = _.filter(hints, function (hint, i) { return _.includes(coreIs, i); });\n        console.debug(\"After pruneHints: \" + hints.length);\n        return hints;\n    };\n    Z3HintsGenerator.prototype.isUniqueSolvable = function () {\n        var checkSat = this.ask(\"(check-sat)\");\n        var unique = checkSat == \"unsat\";\n        return unique;\n    };\n    Z3HintsGenerator.prototype.assertBoard = function (board) {\n        console.debug(\"assertBoard\");\n        for (var row = 0; row < board.rows; row++) {\n            var xs = \"\";\n            for (var variant = 0; variant < board.variants; variant++) {\n                var x = \"x\" + row + variant;\n                this.ask(\"(declare-const \" + x + \" Int)\");\n                this.ask(\"(assert (and (<= 0 \" + x + \") (< \" + x + \" \" + board.cols + \")))\");\n                xs += \" \" + x;\n            }\n            this.ask(\"(assert (distinct\" + xs + \"))\");\n        }\n        var ds = \"\";\n        for (var row = 0; row < board.rows; row++) {\n            for (var col = 0; col < board.cols; col++) {\n                var variant = board.get(row, col);\n                var x = \"x\" + row + variant;\n                ds += \" (distinct \" + x + \" \" + col + \")\";\n            }\n        }\n        this.ask(\"(assert (or\" + ds + \"))\");\n    };\n    Z3HintsGenerator.getHintConstraint = function (hint) {\n        if (hint instanceof AdjacentHint_1.AdjacentHint) {\n            var x1 = \"x\" + hint.row1 + hint.variant1;\n            var x2 = \"x\" + hint.row2 + hint.variant2;\n            return \"(or (= \" + x1 + \" (+ \" + x2 + \" 1)) (= \" + x1 + \" (- \" + x2 + \" 1)))\";\n        }\n        else if (hint instanceof BetweenHint_1.BetweenHint) {\n            var x1 = \"x\" + hint.row1 + hint.variant1;\n            var xMiddle = \"x\" + hint.rowMiddle + hint.variantMiddle;\n            var x2 = \"x\" + hint.row2 + hint.variant2;\n            return \"(or (and (= \" + xMiddle + \" (+ \" + x1 + \" 1)) (= \" + xMiddle + \" (- \" + x2 + \" 1))) (and (= \" + xMiddle + \" (+ \" + x2 + \" 1)) (= \" + xMiddle + \" (- \" + x1 + \" 1))))\";\n        }\n        else if (hint instanceof DirectionHint_1.DirectionHint) {\n            var xLeft = \"x\" + hint.rowLeft + hint.variantLeft;\n            var xRight = \"x\" + hint.rowRight + hint.variantRight;\n            return \"(< \" + xLeft + \" \" + xRight + \")\";\n        }\n        else if (hint instanceof OpenHint_1.OpenHint) {\n            var x = \"x\" + hint.row + hint.variant;\n            return \"(= \" + x + \" \" + hint.col + \")\";\n        }\n        else if (hint instanceof SameColumnHint_1.SameColumnHint) {\n            var x1 = \"x\" + hint.row1 + hint.variant1;\n            var x2 = \"x\" + hint.row2 + hint.variant2;\n            return \"(= \" + x1 + \" \" + x2 + \")\";\n        }\n        else\n            throw new Error(\"Unsupported hint type\");\n    };\n    Z3HintsGenerator.hintFactory = new RandomHint_1.RandomHintFactory();\n    return Z3HintsGenerator;\n}());\nexports.Z3HintsGenerator = Z3HintsGenerator;\n\n\n/***/ }),\n\n/***/ \"NhLW\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/large/large-a2.b09094efecdd9eb43f5c9d816a1fe4e3.png\";\n\n/***/ }),\n\n/***/ \"NsAh\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = __webpack_require__(\"TToO\");\nvar preact_1 = __webpack_require__(\"rMlB\");\n__webpack_require__(\"JpXf\");\n// https://webpack.js.org/guides/dependency-management/#context-module-api\nvar cache = {};\nfunction importAll(r) {\n    r.keys().forEach(function (key) { return cache[key] = r(key); });\n}\nimportAll(__webpack_require__(\"7PiI\"));\nvar IconComponent = (function (_super) {\n    tslib_1.__extends(IconComponent, _super);\n    function IconComponent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    IconComponent.prototype.render = function (props) {\n        return (preact_1.h(\"img\", { class: \"icon\", src: cache[\"./icons/original/\" + props.name + \".png\"] }));\n    };\n    return IconComponent;\n}(preact_1.Component));\nexports.IconComponent = IconComponent;\nvar LargeVariantIconComponent = (function (_super) {\n    tslib_1.__extends(LargeVariantIconComponent, _super);\n    function LargeVariantIconComponent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    LargeVariantIconComponent.prototype.render = function (props) {\n        return (preact_1.h(IconComponent, { name: \"large/large-\" + (props.row + 10).toString(16) + (props.variant + 1) }));\n    };\n    return LargeVariantIconComponent;\n}(preact_1.Component));\nexports.LargeVariantIconComponent = LargeVariantIconComponent;\nvar SmallVariantIconComponent = (function (_super) {\n    tslib_1.__extends(SmallVariantIconComponent, _super);\n    function SmallVariantIconComponent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SmallVariantIconComponent.prototype.render = function (props) {\n        return (preact_1.h(IconComponent, { name: \"small/small-\" + (props.row + 10).toString(16) + (props.variant + 1) }));\n    };\n    return SmallVariantIconComponent;\n}(preact_1.Component));\nexports.SmallVariantIconComponent = SmallVariantIconComponent;\n\n\n/***/ }),\n\n/***/ \"NsPZ\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction memoizeSupplier(supplier) {\n    var p = null;\n    return function () { return p === null ? (p = supplier()) : p; };\n}\nexports.memoizeSupplier = memoizeSupplier;\n\n\n/***/ }),\n\n/***/ \"Op0r\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/hint-direction.2a6b9db9707be05efc146cbd8e571e2b.png\";\n\n/***/ }),\n\n/***/ \"P2+R\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/small/small-e5.46811d66ca231366ab2e44b4de32bee7.png\";\n\n/***/ }),\n\n/***/ \"PWPq\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/large/large-d3.87d7030770383023603c79700050ee58.png\";\n\n/***/ }),\n\n/***/ \"PvcG\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = __webpack_require__(\"TToO\");\nvar HintsGenerator_1 = __webpack_require__(\"S+P+\");\nvar ApplyHintsGenerator = (function (_super) {\n    tslib_1.__extends(ApplyHintsGenerator, _super);\n    function ApplyHintsGenerator() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ApplyHintsGenerator.prototype.isSolvable = function (board, hints) {\n        return board.isSolvable(hints);\n    };\n    return ApplyHintsGenerator;\n}(HintsGenerator_1.SolvableHintsGenerator));\nexports.ApplyHintsGenerator = ApplyHintsGenerator;\n\n\n/***/ }),\n\n/***/ \"QP0S\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/large/large-a1.d73d5dfe6e49493fa72128c7d36eca4e.png\";\n\n/***/ }),\n\n/***/ \"QfaF\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/small/small-f6.2f7d8a98586b23b3f348bef4350bf4f7.png\";\n\n/***/ }),\n\n/***/ \"Qj03\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/hint-adjacent.7b5864dbf0656526063d96f271c1e5fc.png\";\n\n/***/ }),\n\n/***/ \"RUP8\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/small/small-b3.65f5bcb765e8dc6f37ec5174e112cea4.png\";\n\n/***/ }),\n\n/***/ \"S+P+\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = __webpack_require__(\"TToO\");\nvar _ = __webpack_require__(\"M4fF\");\nvar RandomHint_1 = __webpack_require__(\"gYeE\");\nvar DelegateHintsGenerator = (function () {\n    function DelegateHintsGenerator(delegate) {\n        this.delegate = delegate;\n    }\n    DelegateHintsGenerator.prototype.supports = function (options) {\n        return this.delegate.supports(options);\n    };\n    return DelegateHintsGenerator;\n}());\nexports.DelegateHintsGenerator = DelegateHintsGenerator;\nvar SolvableHintsGenerator = (function () {\n    function SolvableHintsGenerator() {\n    }\n    SolvableHintsGenerator.prototype.supports = function (options) {\n        return SolvableHintsGenerator.hintFactory.supports(options);\n    };\n    SolvableHintsGenerator.prototype.generate = function (options, board) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var hints;\n            return tslib_1.__generator(this, function (_a) {\n                hints = this.generateHints(board);\n                return [2 /*return*/, this.pruneHints(board, hints)];\n            });\n        });\n    };\n    SolvableHintsGenerator.prototype.generateHints = function (board) {\n        var hints = [];\n        while (!this.isSolvable(board, hints)) {\n            var hint = SolvableHintsGenerator.hintFactory.random(board);\n            hints.push(hint);\n        }\n        return hints;\n    };\n    SolvableHintsGenerator.prototype.pruneHints = function (board, hints) {\n        hints = _.clone(hints);\n        console.debug(\"Before pruneHints: \" + hints.length);\n        for (var i = 0; i < hints.length;) {\n            var hint = hints.splice(i, 1)[0];\n            if (this.isSolvable(board, hints)) {\n                // keep i which now points to next hint\n            }\n            else {\n                hints.splice(i, 0, hint);\n                i++;\n            }\n        }\n        console.debug(\"After pruneHints: \" + hints.length);\n        return hints;\n    };\n    SolvableHintsGenerator.hintFactory = new RandomHint_1.RandomHintFactory();\n    return SolvableHintsGenerator;\n}());\nexports.SolvableHintsGenerator = SolvableHintsGenerator;\n\n\n/***/ }),\n\n/***/ \"SAo3\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/large/large-e4.07420566e5a63e3313fa48704100c22f.png\";\n\n/***/ }),\n\n/***/ \"SCQN\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/small/small-e1.abbe71866b879431f7d1ec2f736260f3.png\";\n\n/***/ }),\n\n/***/ \"SLpm\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = __webpack_require__(\"TToO\");\nvar classNames = __webpack_require__(\"HW6M\");\nvar dexie_1 = __webpack_require__(\"dlzC\");\nvar _ = __webpack_require__(\"M4fF\");\nvar Package = __webpack_require__(\"7YgM\");\nvar preact_1 = __webpack_require__(\"rMlB\");\nvar PuzzleGenerator_1 = __webpack_require__(\"cnN+\");\nvar Config_1 = __webpack_require__(\"HZR3\");\nvar Counts_1 = __webpack_require__(\"7Stf\");\nvar db_1 = __webpack_require__(\"ATbC\");\nvar Times_1 = __webpack_require__(\"vO/K\");\nvar time_1 = __webpack_require__(\"5AqA\");\nvar Timer_1 = __webpack_require__(\"32Ag\");\n__webpack_require__(\"2JYO\");\nvar HighscoreComponent_1 = __webpack_require__(\"In3e\");\nvar HintsComponent_1 = __webpack_require__(\"KBc0\");\nvar MultiBoardComponent_1 = __webpack_require__(\"ziB5\");\nvar PuzzleOptionsUtils_1 = __webpack_require__(\"fdQW\");\nvar TimerComponent_1 = __webpack_require__(\"etg9\");\nvar VisibilityChangeListener_1 = __webpack_require__(\"yFiT\");\nvar MessageUnloadListener_1 = __webpack_require__(\"Agl8\");\nvar BirthdayComponent_1 = __webpack_require__(\"ouBu\");\nvar OptionsComponent_1 = __webpack_require__(\"b/H4\");\nvar GameState;\n(function (GameState) {\n    GameState[GameState[\"Options\"] = 0] = \"Options\";\n    GameState[GameState[\"Highscore\"] = 1] = \"Highscore\";\n    GameState[GameState[\"Generating\"] = 2] = \"Generating\";\n    GameState[GameState[\"Playing\"] = 3] = \"Playing\";\n    GameState[GameState[\"ManualPaused\"] = 4] = \"ManualPaused\";\n    GameState[GameState[\"AutoPaused\"] = 5] = \"AutoPaused\";\n    GameState[GameState[\"Solved\"] = 6] = \"Solved\";\n    GameState[GameState[\"Over\"] = 7] = \"Over\";\n})(GameState = exports.GameState || (exports.GameState = {}));\nvar AppComponent = (function (_super) {\n    tslib_1.__extends(AppComponent, _super);\n    function AppComponent() {\n        var _this = _super.call(this) || this;\n        _this.timer = new Timer_1.Timer();\n        _this.puzzleGenerator = PuzzleGenerator_1.mainPuzzleGenerator;\n        _this.onClickNewGame = function (e) {\n            _this.setState({\n                gameState: GameState.Options,\n                cheated: 0\n            });\n            _this.timer.reset();\n        };\n        _this.onClickPause = function (e) {\n            if (_this.state.gameState === GameState.Playing) {\n                _this.timer.pause();\n                _this.setState(function (state) { return _.merge(state, {\n                    gameState: GameState.ManualPaused\n                }); });\n            }\n        };\n        _this.onClickResume = function (e) {\n            if (_this.state.gameState === GameState.ManualPaused || _this.state.gameState === GameState.AutoPaused) {\n                _this.timer.start();\n                _this.setState(function (state) { return _.merge(state, {\n                    gameState: GameState.Playing\n                }); });\n            }\n        };\n        _this.onClickCheat = function (e) {\n            if (_this.state.gameState === GameState.Playing) {\n                _this.setState(function (state) {\n                    var changed = state.puzzle.applySingleHint();\n                    return _.merge(state, {\n                        cheated: state.cheated + (changed ? 1 : 0)\n                    });\n                }, _this.refresh);\n            }\n        };\n        _this.onVisibilityChange = function (visible) {\n            if (visible && _this.state.gameState === GameState.AutoPaused) {\n                _this.timer.start();\n                _this.setState(function (state) { return _.merge(state, {\n                    gameState: GameState.Playing\n                }); });\n            }\n            else if (!visible && _this.state.gameState === GameState.Playing) {\n                _this.timer.pause();\n                _this.setState(function (state) { return _.merge(state, {\n                    gameState: GameState.AutoPaused\n                }); });\n            }\n        };\n        _this.onMessageUnload = function () {\n            switch (_this.state.gameState) {\n                case GameState.Playing:\n                case GameState.ManualPaused:\n                case GameState.AutoPaused:\n                    return \"Are you sure you want to leave while the game is in progress?\";\n                default:\n                    return null;\n            }\n        };\n        _this.submitOptions = function (options) {\n            _this.configOptions(options);\n            _this.setState({\n                gameState: GameState.Generating\n            }, function () {\n                // this.forceUpdate(); // seems to make no difference\n                requestAnimationFrame(function (time) {\n                    setTimeout(function () { return tslib_1.__awaiter(_this, void 0, void 0, function () {\n                        var _this = this;\n                        var puzzle, e_1;\n                        return tslib_1.__generator(this, function (_a) {\n                            switch (_a.label) {\n                                case 0:\n                                    _a.trys.push([0, 2, , 3]);\n                                    return [4 /*yield*/, this.puzzleGenerator.generate(options)];\n                                case 1:\n                                    puzzle = _a.sent();\n                                    this.setState({\n                                        puzzle: puzzle,\n                                        gameState: GameState.Playing,\n                                        cheated: 0,\n                                        canCheat: true\n                                    }, function () {\n                                        _this.timer.start();\n                                        _this.refresh(); // check win in case everything opened on start\n                                    });\n                                    return [3 /*break*/, 3];\n                                case 2:\n                                    e_1 = _a.sent();\n                                    alert(e_1);\n                                    this.setState({\n                                        puzzle: undefined,\n                                        gameState: GameState.Options,\n                                        cheated: 0,\n                                        canCheat: undefined\n                                    });\n                                    return [3 /*break*/, 3];\n                                case 3: return [2 /*return*/];\n                            }\n                        });\n                    }); }, 0); // timeout to start generation AFTER repaint (hopefully)\n                });\n            });\n        };\n        _this.highscoreOptions = function (options) {\n            _this.configOptions(options);\n            _this.setState({\n                gameState: GameState.Highscore\n            });\n        };\n        _this.refresh = function () {\n            if (_this.state.gameState === GameState.Playing) {\n                var puzzle_1 = _this.state.puzzle;\n                if (puzzle_1.isSolved()) {\n                    _this.timer.pause();\n                    var time_2 = _this.timer.getTotalTime();\n                    _this.setState(function (state) { return _.merge(state, {\n                        gameState: GameState.Solved\n                    }); }, function () {\n                        var options = puzzle_1.options;\n                        var cheated = _this.state.cheated;\n                        Counts_1.Counts.increase(options, cheated ? \"solvedCheated\" : \"solved\");\n                        var cheatedText = cheated > 0 ? \" by cheating \" + cheated + \" times\" : \"\";\n                        alert(\"Solved \" + PuzzleOptionsUtils_1.formatOptions(options) + \" in \" + time_1.formatDuration(time_2) + cheatedText + \"!\");\n                        if (!cheated) {\n                            db_1.db.transaction(\"rw\", db_1.db.times, db_1.db.config, function () {\n                                return Times_1.Times.isInTop10(options, time_2).then(function (isInTop10) {\n                                    return Config_1.Config.getKey(\"name\").then(function (defaultName) {\n                                        var name;\n                                        if (isInTop10 !== false &&\n                                            (name = prompt(\"Enter name for \" + (isInTop10 + 1) + \". place in high scores:\", defaultName)) !== null)\n                                            return name;\n                                        else\n                                            return undefined;\n                                    });\n                                }).then(function (name) {\n                                    return dexie_1.default.Promise.all([\n                                        Times_1.Times.add(options, time_2, name),\n                                        Config_1.Config.setKey(\"name\", name)\n                                    ]);\n                                });\n                            });\n                        }\n                    });\n                }\n                else if (puzzle_1.isOver()) {\n                    _this.timer.pause();\n                    _this.setState(function (state) { return _.merge(state, {\n                        gameState: GameState.Over\n                    }); }, function () {\n                        Counts_1.Counts.increase(puzzle_1.options, \"over\");\n                        alert(\"Over!\");\n                    });\n                }\n                else {\n                    _this.setState({\n                        canCheat: puzzle_1.canApplySingleHint()\n                    });\n                }\n            }\n        };\n        _this.state = {\n            options: AppComponent.defaultOptions,\n            puzzle: undefined,\n            gameState: GameState.Options,\n            cheated: 0,\n            canCheat: undefined\n        };\n        _this.visibilityChange = new VisibilityChangeListener_1.VisibilityChangeListener(_this.onVisibilityChange);\n        _this.messageUnload = new MessageUnloadListener_1.MessageUnloadListener(_this.onMessageUnload);\n        Config_1.Config.getKey(\"options\").then(function (options) {\n            if (options !== undefined) {\n                _this.setState({\n                    options: options\n                });\n            }\n        });\n        return _this;\n    }\n    AppComponent.prototype.componentDidMount = function () {\n        this.visibilityChange.add();\n        this.messageUnload.add();\n    };\n    AppComponent.prototype.componentWillUnmount = function () {\n        this.visibilityChange.remove();\n        this.messageUnload.remove();\n    };\n    AppComponent.prototype.configOptions = function (options) {\n        this.setState({\n            options: options\n        });\n        Config_1.Config.set({\n            options: options\n        });\n    };\n    AppComponent.prototype.render = function (props, state) {\n        var solvedOrOver = state.gameState === GameState.Solved || state.gameState === GameState.Over;\n        var showBoard = solvedOrOver ? state.puzzle.singleBoard : undefined;\n        return (preact_1.h(\"div\", { class: classNames({\n                \"app\": true,\n                \"paused\": state.gameState === GameState.ManualPaused || state.gameState === GameState.AutoPaused,\n                \"solved\": state.gameState === GameState.Solved,\n                \"over\": state.gameState === GameState.Over,\n                \"cheated\": state.cheated > 0\n            }) },\n            preact_1.h(\"div\", { class: \"app-top\" },\n                preact_1.h(\"div\", { class: \"header\" },\n                    preact_1.h(\"div\", { class: \"brand\" },\n                        preact_1.h(\"a\", { href: \"http://einstein.sim642.eu\", title: \"einstein-js \" + Package.version }, \"einstein-js\"),\n                        \" \",\n                        preact_1.h(\"small\", null,\n                            \"by \",\n                            preact_1.h(\"a\", { href: \"https://github.com/sim642/einstein-js\" }, \"sim642\"))),\n                    preact_1.h(\"div\", { class: \"buttons buttons-responsive\" },\n                        preact_1.h(\"button\", { class: classNames({\n                                \"button-highlight\": solvedOrOver || state.gameState === GameState.Highscore\n                            }), disabled: state.gameState === GameState.Generating, onClick: this.onClickNewGame }, \"New game\"),\n                        preact_1.h(\"button\", { disabled: !(state.gameState === GameState.Playing && state.canCheat), onClick: this.onClickCheat },\n                            \"Cheat \",\n                            state.cheated > 0 ?\n                                preact_1.h(\"span\", { class: \"badge\" }, state.cheated) :\n                                null),\n                        state.gameState === GameState.ManualPaused || state.gameState === GameState.AutoPaused ?\n                            preact_1.h(\"button\", { class: \"button-highlight\", onClick: this.onClickResume }, \"Resume\") :\n                            preact_1.h(\"button\", { disabled: state.gameState !== GameState.Playing, onClick: this.onClickPause }, \"Pause\")),\n                    preact_1.h(TimerComponent_1.TimerComponent, { timer: this.timer })),\n                preact_1.h(BirthdayComponent_1.BirthdayComponent, { month: 10, day: 22, name: \"Elisabeth\" }),\n                state.gameState === GameState.Options || state.gameState === GameState.Generating ?\n                    preact_1.h(OptionsComponent_1.OptionsComponent, { options: state.options, submit: this.submitOptions, highscore: this.highscoreOptions, defaultOptions: AppComponent.defaultOptions, puzzleGenerator: this.puzzleGenerator, generating: state.gameState === GameState.Generating }) :\n                    state.gameState === GameState.Highscore ?\n                        preact_1.h(HighscoreComponent_1.HighscoreComponent, { options: state.options }) :\n                        preact_1.h(MultiBoardComponent_1.MultiBoardComponent, { board: state.puzzle.multiBoard, refresh: this.refresh, showBoard: showBoard })),\n            state.gameState !== GameState.Options && state.gameState !== GameState.Highscore && state.gameState !== GameState.Generating ?\n                preact_1.h(HintsComponent_1.HintsComponent, { hints: state.puzzle.hints }) :\n                null));\n    };\n    AppComponent.defaultOptions = {\n        rows: 6,\n        cols: 6,\n        extraHintsPercent: 0,\n        difficulty: \"normal\"\n    };\n    return AppComponent;\n}(preact_1.Component));\nexports.AppComponent = AppComponent;\n\n\n/***/ }),\n\n/***/ \"Seff\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = __webpack_require__(\"TToO\");\nvar _ = __webpack_require__(\"M4fF\");\nvar AbstractDistribution_1 = __webpack_require__(\"bwb8\");\nvar PairsDistribution = (function (_super) {\n    tslib_1.__extends(PairsDistribution, _super);\n    function PairsDistribution(pairs) {\n        var _this = _super.call(this) || this;\n        _this.pairs = pairs;\n        return _this;\n    }\n    PairsDistribution.prototype.find = function (value) {\n        return PairsDistribution.find(this.pairs, value);\n    };\n    PairsDistribution.prototype.get = function (value) {\n        var pair = this.find(value);\n        return pair !== undefined ? pair[1] : undefined;\n    };\n    Object.defineProperty(PairsDistribution.prototype, \"n\", {\n        get: function () {\n            return _.sumBy(this.pairs, function (pair) { return pair[1]; });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PairsDistribution.prototype, \"classes\", {\n        get: function () {\n            return this.pairs.length;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    PairsDistribution.prototype.mapFreqs = function (f) {\n        return new PairsDistribution(this.map(function (freq, value) { return [value, f(freq, value)]; }));\n    };\n    PairsDistribution.prototype.map = function (f) {\n        return _.map(this.pairs, function (_a) {\n            var value = _a[0], freq = _a[1];\n            return f(freq, value);\n        });\n    };\n    PairsDistribution.prototype.filter = function (p) {\n        return new PairsDistribution(_.filter(this.pairs, function (_a) {\n            var value = _a[0], freq = _a[1];\n            return p(freq, value);\n        }));\n    };\n    PairsDistribution.find = function (pairs, value) {\n        return _.find(pairs, function (pair) { return pair[0] === value; });\n    };\n    PairsDistribution.monteCarlo = function (n, generator) {\n        var observed = [];\n        for (var i = 0; i < n; i++) {\n            var value = generator();\n            var pair = PairsDistribution.find(observed, value);\n            if (pair === undefined) {\n                pair = [value, 0];\n                observed.push(pair);\n            }\n            pair[1]++;\n        }\n        return new PairsDistribution(observed);\n    };\n    PairsDistribution.prototype.toPairs = function () {\n        return this.pairs;\n    };\n    return PairsDistribution;\n}(AbstractDistribution_1.AbstractDistribution));\nexports.PairsDistribution = PairsDistribution;\n\n\n/***/ }),\n\n/***/ \"TeOI\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/large/large-a5.e5df7839ecedea6b66da59aa3ece9ba8.png\";\n\n/***/ }),\n\n/***/ \"TjjG\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"UBU4\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/large/large-b1.67391202fba98a1797a9c666a9f2d723.png\";\n\n/***/ }),\n\n/***/ \"X9r5\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _ = __webpack_require__(\"M4fF\");\nvar DirectionHint = (function () {\n    function DirectionHint(rowLeft, variantLeft, rowRight, variantRight) {\n        this.rowLeft = rowLeft;\n        this.variantLeft = variantLeft;\n        this.rowRight = rowRight;\n        this.variantRight = variantRight;\n    }\n    DirectionHint.prototype.applyTo = function (board) {\n        var changed = false;\n        for (var col = 0; col < board.cols; col++) {\n            if (board.isPossible(this.rowRight, col, this.variantRight)) {\n                board.remove(this.rowRight, col, this.variantRight);\n                changed = true;\n            }\n            if (board.isPossible(this.rowLeft, col, this.variantLeft))\n                break;\n        }\n        for (var col = board.cols - 1; col >= 0; col--) {\n            if (board.isPossible(this.rowLeft, col, this.variantLeft)) {\n                board.remove(this.rowLeft, col, this.variantLeft);\n                changed = true;\n            }\n            if (board.isPossible(this.rowRight, col, this.variantRight))\n                break;\n        }\n        return changed;\n    };\n    DirectionHint.prototype.getType = function () {\n        return 1 /* Horizontal */;\n    };\n    return DirectionHint;\n}());\nexports.DirectionHint = DirectionHint;\nvar DirectionHintFactory = (function () {\n    function DirectionHintFactory() {\n    }\n    DirectionHintFactory.prototype.supports = function (options) {\n        return options.rows >= 1 && options.cols >= 2;\n    };\n    DirectionHintFactory.prototype.random = function (board) {\n        var rowLeft = _.random(0, board.rows - 1);\n        var colLeft = _.random(0, board.cols - 2);\n        var rowRight = _.random(0, board.rows - 1);\n        var colRight = _.random(colLeft + 1, board.cols - 1);\n        return new DirectionHint(rowLeft, board.get(rowLeft, colLeft), rowRight, board.get(rowRight, colRight));\n    };\n    return DirectionHintFactory;\n}());\nexports.DirectionHintFactory = DirectionHintFactory;\n\n\n/***/ }),\n\n/***/ \"XjqR\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/large/large-c3.82043ba3661fa5a9afc87cf0c1d9f917.png\";\n\n/***/ }),\n\n/***/ \"XnXw\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/small/small-e4.967aa445a182fda8b3261d4612d3a3fc.png\";\n\n/***/ }),\n\n/***/ \"YFuY\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/large/large-e6.60a05543c24485dc78b1cb4f47c306be.png\";\n\n/***/ }),\n\n/***/ \"YKaq\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/large/large-b5.746416be364e3c33aacd6055c476fbc5.png\";\n\n/***/ }),\n\n/***/ \"Z31m\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/small/small-b6.0b3f448c498b70903671a4bc69efde0d.png\";\n\n/***/ }),\n\n/***/ \"ZNit\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/large/large-f1.2d3e9386d0328114e71184f6946f14b6.png\";\n\n/***/ }),\n\n/***/ \"ZvN9\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/large/large-e1.b1cd43842afa4b29b592e9ac499769ca.png\";\n\n/***/ }),\n\n/***/ \"aDup\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = __webpack_require__(\"TToO\");\nvar Z3Em = __webpack_require__(\"xzou\");\nvar z3emWasm = __webpack_require__(\"QlVD\");\nvar function_1 = __webpack_require__(\"NsPZ\");\nvar Wasm_1 = __webpack_require__(\"4mO9\");\nvar wasm_1 = __webpack_require__(\"MZjJ\");\nvar ResolveWrapper = (function () {\n    function ResolveWrapper(value) {\n        this.value = value;\n    }\n    return ResolveWrapper;\n}());\nfunction createZ3Em(z3emOptions) {\n    return new Promise(function (resolve, reject) {\n        var z3em = Z3Em(tslib_1.__assign({}, z3emOptions, { onRuntimeInitialized: function () {\n                resolve(new ResolveWrapper(z3em)); // TODO: unwrapped return freezes browser, WTF?\n            } }));\n    });\n}\n// for caching WASM in Chrome: chrome://flags/#enable-webassembly\nexports.getZ3 = function_1.memoizeSupplier(function () {\n    if (wasm_1.isWasmSupported()) {\n        return Wasm_1.Wasm.getCached(z3emWasm).then(function (module) {\n            var z3emOptions;\n            if (module !== undefined) {\n                z3emOptions = {\n                    instantiateWasm: function (importObject, receiveInstance) {\n                        console.debug(\"instantiateWasm\");\n                        WebAssembly.instantiate(module, importObject).then(function (instance) {\n                            return receiveInstance(instance, module);\n                        });\n                        return {}; // instantiateWasm is async\n                    }\n                };\n            }\n            else {\n                z3emOptions = {\n                    locateFile: function () { return z3emWasm; },\n                    onReceiveInstance: function (instance, module) {\n                        console.debug(\"onReceiveInstance\");\n                        Wasm_1.Wasm.cache(z3emWasm, module);\n                    }\n                };\n            }\n            console.debug(\"Z3 arming...\");\n            return createZ3Em(z3emOptions).then(function (resolveWrapper) {\n                var z3em = resolveWrapper.value;\n                var z3 = new Z3(z3em);\n                console.log(\"Z3 armed\");\n                return z3;\n            });\n        });\n    }\n    else {\n        return Promise.reject(new Error(\"WebAssembly not supported\"));\n    }\n});\nvar Z3 = (function () {\n    function Z3(z3em) {\n        this.z3em = z3em;\n        this.errorHandler = this.z3em.addFunction(function (ctx, e) {\n            console.error(\"Z3 (\" + ctx + \"): \" + e);\n        }, \"vii\");\n        this.mk_config = this.z3em.cwrap(\"Z3_mk_config\", \"number\", []);\n        this.mk_context = this.z3em.cwrap(\"Z3_mk_context\", \"number\", [\"number\"]);\n        this.del_config = this.z3em.cwrap(\"Z3_del_config\", null, [\"number\"]);\n        this.del_context = this.z3em.cwrap(\"Z3_del_context\", null, [\"number\"]);\n        this.eval_smtlib2_string = this.z3em.cwrap(\"Z3_eval_smtlib2_string\", \"string\", [\"number\", \"string\"]);\n        this.global_param_set = this.z3em.cwrap(\"Z3_global_param_set\", null, [\"string\", \"string\"]);\n        this.set_error_handler = this.z3em.cwrap(\"Z3_set_error_handler\", null, [\"number\", \"number\"]);\n    }\n    return Z3;\n}());\nexports.Z3 = Z3;\n\n\n/***/ }),\n\n/***/ \"b/H4\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = __webpack_require__(\"TToO\");\nvar _ = __webpack_require__(\"M4fF\");\nvar preact_1 = __webpack_require__(\"rMlB\");\n__webpack_require__(\"99qC\");\nvar Config_1 = __webpack_require__(\"HZR3\");\nvar Counts_1 = __webpack_require__(\"7Stf\");\nvar Times_1 = __webpack_require__(\"vO/K\");\nvar PuzzleOptionsUtils_1 = __webpack_require__(\"fdQW\");\nvar InputRangeComponent = (function (_super) {\n    tslib_1.__extends(InputRangeComponent, _super);\n    function InputRangeComponent() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.onChange = function (e) {\n            e.preventDefault();\n            var value = parseInt(e.target.value);\n            _this.props.onChange(value);\n        };\n        return _this;\n    }\n    InputRangeComponent.prototype.render = function (props) {\n        var listId = props.id + \"-list\";\n        return (preact_1.h(\"span\", { class: \"input input-range\" },\n            preact_1.h(\"input\", tslib_1.__assign({ type: \"range\" }, props, { value: props.value.toString(), list: listId, onChange: this.onChange, onInput: this.onChange })),\n            preact_1.h(\"output\", { for: props.id },\n                props.value,\n                props.unit),\n            preact_1.h(\"datalist\", { id: listId }, _.map(_.range(props.min, props.max + 1, props.step), function (value) {\n                return preact_1.h(\"option\", { value: value.toString() });\n            }))));\n    };\n    return InputRangeComponent;\n}(preact_1.Component));\nvar RadioChoiceComponent = (function (_super) {\n    tslib_1.__extends(RadioChoiceComponent, _super);\n    function RadioChoiceComponent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    RadioChoiceComponent.prototype.onChange = function (value) {\n        var _this = this;\n        return function (e) {\n            e.preventDefault();\n            _this.props.onChange(value);\n        };\n    };\n    RadioChoiceComponent.prototype.render = function (props) {\n        var _this = this;\n        return (\n        // Chrome fieldsets don't flex: https://stackoverflow.com/q/28078681\n        preact_1.h(\"div\", { class: \"input input-choice\" }, _.map(props.choices, function (_a) {\n            var value = _a[0], label = _a[1];\n            return preact_1.h(\"span\", null,\n                preact_1.h(\"input\", { type: \"radio\", id: props.id + \"-\" + value, name: props.id, checked: value === props.value, onChange: _this.onChange(value) }),\n                preact_1.h(\"label\", { for: props.id + \"-\" + value }, label));\n        })));\n    };\n    return RadioChoiceComponent;\n}(preact_1.Component));\nvar TopOptionsComponent = (function (_super) {\n    tslib_1.__extends(TopOptionsComponent, _super);\n    function TopOptionsComponent() {\n        var _this = _super.call(this) || this;\n        _this.state = {\n            topCounts: undefined\n        };\n        _this.fetchTopCounts();\n        return _this;\n    }\n    TopOptionsComponent.prototype.fetchTopCounts = function () {\n        var _this = this;\n        Counts_1.Counts.getTopCounts().then(function (topCounts) {\n            _this.setState({\n                topCounts: topCounts\n            });\n        });\n    };\n    TopOptionsComponent.prototype.onClick = function (countsItem) {\n        var _this = this;\n        var options = {\n            rows: countsItem.rows,\n            cols: countsItem.cols,\n            extraHintsPercent: countsItem.extraHintsPercent,\n            difficulty: countsItem.difficulty\n        }; // options shouldn't contain Counts fields, breaks IndexedDB query\n        return function (e) {\n            e.preventDefault();\n            _this.props.set(options);\n        };\n    };\n    TopOptionsComponent.prototype.render = function (props, state) {\n        var _this = this;\n        if (state.topCounts !== undefined && state.topCounts.length > 0) {\n            return (preact_1.h(\"div\", { class: \"top-options\" },\n                preact_1.h(\"hr\", null),\n                preact_1.h(\"span\", { class: \"options-title\" }, \"Most played:\"),\n                preact_1.h(\"ol\", null, _.map(_.take(state.topCounts, 5), function (countsItem) {\n                    return preact_1.h(\"li\", null,\n                        preact_1.h(\"a\", { class: \"button\", onClick: _this.onClick(countsItem) },\n                            PuzzleOptionsUtils_1.formatOptions(countsItem),\n                            \" \",\n                            preact_1.h(\"small\", { className: \"small-number\" },\n                                \"(\",\n                                countsItem.solved + countsItem.solvedCheated + countsItem.over,\n                                \")\")));\n                }))));\n        }\n        else\n            return null;\n    };\n    return TopOptionsComponent;\n}(preact_1.Component));\nvar OptionsComponent = (function (_super) {\n    tslib_1.__extends(OptionsComponent, _super);\n    function OptionsComponent(props) {\n        var _this = _super.call(this) || this;\n        _this.onSubmit = function (e) {\n            e.preventDefault();\n            _this.props.submit(_this.state.options);\n        };\n        // No onReset on <form>\n        _this.onReset = function (e) {\n            e.preventDefault();\n            _this.setState({\n                options: _.clone(_this.props.defaultOptions),\n                hasTimes: false\n            });\n            _this.fetchHasTimes(_this.state.options);\n            Config_1.Config.set({\n                options: _this.state.options\n            });\n        };\n        _this.onHighscore = function (e) {\n            _this.props.highscore(_this.state.options);\n        };\n        _this.setOptions = function (options) {\n            _this.setState({\n                options: _.clone(options),\n                hasTimes: false\n            });\n            _this.fetchHasTimes(_this.state.options);\n            Config_1.Config.set({\n                options: _this.state.options\n            });\n        };\n        _this.state = {\n            options: _.clone(props.options),\n            hasTimes: false\n        };\n        _this.fetchHasTimes(props.options);\n        return _this;\n    }\n    OptionsComponent.prototype.componentWillReceiveProps = function (nextProps) {\n        if (!_.eq(this.props, nextProps)) {\n            this.setState({\n                options: _.clone(nextProps.options),\n                hasTimes: false\n            });\n            this.fetchHasTimes(nextProps.options);\n        }\n    };\n    OptionsComponent.prototype.onChange = function (field) {\n        var _this = this;\n        return function (value) {\n            _this.setState(function (state) {\n                return _.merge(state, {\n                    options: (_a = {},\n                        _a[field] = value // TODO: typecheck this,\n                    ,\n                        _a),\n                    hasTimes: false\n                });\n                var _a;\n            });\n            _this.fetchHasTimes(_this.state.options);\n            Config_1.Config.set({\n                options: _this.state.options\n            });\n        };\n    };\n    OptionsComponent.prototype.fetchHasTimes = function (options) {\n        var _this = this;\n        Times_1.Times.hasTimes(options).then(function (hasTimes) {\n            _this.setState({\n                hasTimes: hasTimes\n            });\n        });\n    };\n    OptionsComponent.prototype.render = function (props, state) {\n        return (preact_1.h(\"form\", { class: \"options\", onSubmit: this.onSubmit },\n            preact_1.h(\"fieldset\", { disabled: props.generating },\n                preact_1.h(\"div\", { class: \"form-group\" },\n                    preact_1.h(\"label\", { for: \"option-rows\" }, \"Rows\"),\n                    preact_1.h(InputRangeComponent, { id: \"option-rows\", min: 2, max: 6, value: state.options.rows, onChange: this.onChange(\"rows\") })),\n                preact_1.h(\"div\", { class: \"form-group\" },\n                    preact_1.h(\"label\", { for: \"option-cols\" }, \"Columns\"),\n                    preact_1.h(InputRangeComponent, { id: \"option-cols\", min: 2, max: 6, value: state.options.cols, onChange: this.onChange(\"cols\") })),\n                preact_1.h(\"div\", { class: \"form-group\" },\n                    preact_1.h(\"label\", { for: \"option-extra-hints\" }, \"Extra hints\"),\n                    preact_1.h(InputRangeComponent, { id: \"option-extra-hints\", min: 0, max: 100, step: 20, value: state.options.extraHintsPercent, onChange: this.onChange(\"extraHintsPercent\"), unit: \"%\" })),\n                preact_1.h(\"div\", { class: \"form-group\" },\n                    preact_1.h(\"label\", { for: \"option-difficulty\" }, \"Difficulty\"),\n                    preact_1.h(RadioChoiceComponent, { id: \"option-difficulty\", choices: [[\"normal\", \"Normal\"], [\"hard\", \"Hard\"]], value: state.options.difficulty, onChange: this.onChange(\"difficulty\") })),\n                preact_1.h(\"div\", { class: \"form-group buttons\" },\n                    preact_1.h(\"button\", { type: \"reset\", onClick: this.onReset }, \"Reset\"),\n                    preact_1.h(\"button\", { type: \"button\", disabled: !state.hasTimes, onClick: this.onHighscore }, \"High scores\"),\n                    preact_1.h(\"button\", { class: \"button-highlight button-wide\", type: \"submit\", disabled: !props.puzzleGenerator.supports(state.options) }, \"Play\")),\n                preact_1.h(TopOptionsComponent, { set: this.setOptions })),\n            props.generating ?\n                preact_1.h(\"div\", { class: \"loading-overlay\" },\n                    preact_1.h(\"div\", { class: \"lds-dual-ring\" })) :\n                null));\n    };\n    return OptionsComponent;\n}(preact_1.Component));\nexports.OptionsComponent = OptionsComponent;\n\n\n/***/ }),\n\n/***/ \"bWR4\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Board = (function () {\n    function Board(table, options) {\n        if (options === void 0) { options = {\n            rows: table.length,\n            cols: table[0].length\n        }; }\n        this.table = table;\n        this.options = options;\n        this.rows = this.options.rows;\n        this.cols = this.options.cols;\n        this.variants = this.options.cols;\n    }\n    Board.prototype.get = function (row, col) {\n        return this.table[row][col];\n    };\n    return Board;\n}());\nexports.Board = Board;\n\n\n/***/ }),\n\n/***/ \"bwb8\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar AbstractDistribution = (function () {\n    function AbstractDistribution() {\n    }\n    AbstractDistribution.prototype.scale = function (targetN) {\n        var sourceN = this.n;\n        return this.mapFreqs(function (freq) { return freq / sourceN * targetN; });\n    };\n    AbstractDistribution.prototype.scaleTo = function (targetDist) {\n        return this.scale(targetDist.n);\n    };\n    AbstractDistribution.prototype.toPairs = function () {\n        return this.map(function (freq, value) { return [value, freq]; });\n    };\n    AbstractDistribution.prototype.random = function () {\n        // https://en.wikipedia.org/wiki/Fitness_proportionate_selection\n        // http://www.keithschwarz.com/darts-dice-coins/ - Roulette Wheel Selection (linear)\n        var pairs = this.toPairs();\n        var cumFreq = Math.random() * this.n;\n        for (var i = 0; i < pairs.length; i++) {\n            var _a = pairs[i], value = _a[0], freq = _a[1];\n            if (cumFreq < freq)\n                return value;\n            else\n                cumFreq -= freq;\n        }\n        return pairs[pairs.length - 1][0]; // must return in case of bad rounding\n    };\n    return AbstractDistribution;\n}());\nexports.AbstractDistribution = AbstractDistribution;\n\n\n/***/ }),\n\n/***/ \"cgSM\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/large/large-d1.4c6fc5e018efe828eb0a0a8136a8cc76.png\";\n\n/***/ }),\n\n/***/ \"cnN+\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = __webpack_require__(\"TToO\");\nvar _ = __webpack_require__(\"M4fF\");\nvar SingleBoard_1 = __webpack_require__(\"JMRT\");\nvar ApplyHintsGenerator_1 = __webpack_require__(\"PvcG\");\nvar DifficultyHintsGenerator_1 = __webpack_require__(\"GgXB\");\nvar ExtraHintsGenerator_1 = __webpack_require__(\"6RO1\");\nvar NonApplyHintsGenerator_1 = __webpack_require__(\"n1vv\");\nvar Z3HintsGenerator_1 = __webpack_require__(\"Nf2I\");\nvar Puzzle_1 = __webpack_require__(\"hmo1\");\nvar HintsPuzzleGenerator = (function () {\n    function HintsPuzzleGenerator(hintsGenerator) {\n        this.hintsGenerator = hintsGenerator;\n    }\n    HintsPuzzleGenerator.prototype.supports = function (options) {\n        return this.hintsGenerator.supports(options);\n    };\n    HintsPuzzleGenerator.prototype.generate = function (options) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var board, start, hints, end;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        board = SingleBoard_1.SingleBoard.random(options);\n                        start = _.now();\n                        return [4 /*yield*/, this.hintsGenerator.generate(options, board)];\n                    case 1:\n                        hints = _a.sent();\n                        end = _.now();\n                        console.log(\"\" + (end - start));\n                        return [2 /*return*/, new Puzzle_1.Puzzle(board, hints, options)];\n                }\n            });\n        });\n    };\n    return HintsPuzzleGenerator;\n}());\nexports.HintsPuzzleGenerator = HintsPuzzleGenerator;\nexports.mainPuzzleGenerator = new HintsPuzzleGenerator(new ExtraHintsGenerator_1.ExtraHintsGenerator(new DifficultyHintsGenerator_1.DifficultyHintsGenerator({\n    normal: new ApplyHintsGenerator_1.ApplyHintsGenerator(),\n    hard: new NonApplyHintsGenerator_1.NonApplyHintsGenerator(new Z3HintsGenerator_1.Z3HintsGenerator())\n})));\n\n\n/***/ }),\n\n/***/ \"d6hy\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/small/small-d5.ae2144db1de56afe0541c89db7a31463.png\";\n\n/***/ }),\n\n/***/ \"dSmd\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/large/large-f6.d614ae0c9d5efd565ca308cd3435188e.png\";\n\n/***/ }),\n\n/***/ \"dcOB\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/large/large-e2.bba1807b4ac83d4a610aa663676e1204.png\";\n\n/***/ }),\n\n/***/ \"etg9\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = __webpack_require__(\"TToO\");\nvar preact_1 = __webpack_require__(\"rMlB\");\nvar time_1 = __webpack_require__(\"5AqA\");\nvar TimerComponent = (function (_super) {\n    tslib_1.__extends(TimerComponent, _super);\n    function TimerComponent(props) {\n        var _this = _super.call(this) || this;\n        _this.interval = null;\n        _this.state = {\n            time: props.timer.getTotalTime()\n        };\n        return _this;\n    }\n    TimerComponent.prototype.componentWillReceiveProps = function (nextProps) {\n        this.setState({\n            time: nextProps.timer.getTotalTime()\n        });\n        this.setTimer();\n    };\n    TimerComponent.prototype.componentDidMount = function () {\n        this.setTimer();\n    };\n    TimerComponent.prototype.componentWillUnmount = function () {\n        this.clearTimer();\n    };\n    TimerComponent.prototype.clearTimer = function () {\n        if (this.interval !== null)\n            clearInterval(this.interval);\n    };\n    TimerComponent.prototype.setTimer = function () {\n        var _this = this;\n        this.clearTimer();\n        setTimeout(function () {\n            _this.interval = setInterval(function () {\n                _this.setState({\n                    time: _this.props.timer.getTotalTime()\n                });\n            }, 1000);\n        }, 0); // HACK: give enough delay to make interval fall between seconds and avoid second skipping\n    };\n    TimerComponent.prototype.render = function (props, state) {\n        return (preact_1.h(\"div\", { class: \"timer\" }, time_1.formatDuration(state.time)));\n    };\n    return TimerComponent;\n}(preact_1.Component));\nexports.TimerComponent = TimerComponent;\n\n\n/***/ }),\n\n/***/ \"euc6\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar LongTouchContextMenuHandler = (function () {\n    function LongTouchContextMenuHandler(callback) {\n        var _this = this;\n        this.callback = callback;\n        // iOS long touch workaround\n        // https://stackoverflow.com/a/33778163\n        // https://jsfiddle.net/gianlucaguarini/56Szw/\n        // https://stackoverflow.com/a/33303261\n        this.onTouchStart = function (e) {\n            // console.debug(\"touchstart\");\n            LongTouchContextMenuHandler.touching = true;\n            _this.timeout = setTimeout(function () {\n                console.log(\"longtouch\");\n                _this.callback();\n            }, LongTouchContextMenuHandler.longTouchTime);\n        };\n        this.onTouchMove = function (e) {\n            // console.debug(\"touchmove\");\n            clearTimeout(_this.timeout);\n        };\n        this.onTouchEnd = function (e) {\n            // console.debug(\"touchend\");\n            LongTouchContextMenuHandler.touching = false;\n            clearTimeout(_this.timeout);\n        };\n        this.onTouchCancel = function (e) {\n            // console.debug(\"touchcancel\");\n            LongTouchContextMenuHandler.touching = false;\n            clearTimeout(_this.timeout);\n        };\n        this.onContextMenu = function (e) {\n            e.preventDefault();\n            if (!LongTouchContextMenuHandler.touching)\n                _this.callback();\n        };\n    }\n    LongTouchContextMenuHandler.touching = false;\n    LongTouchContextMenuHandler.longTouchTime = 500;\n    return LongTouchContextMenuHandler;\n}());\nexports.LongTouchContextMenuHandler = LongTouchContextMenuHandler;\n\n\n/***/ }),\n\n/***/ \"fZOX\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/small/small-b5.39e97e63457f6a5ef329ce7a1f329d47.png\";\n\n/***/ }),\n\n/***/ \"fdQW\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction formatOptions(options) {\n    var difficultyText = options.difficulty === \"hard\" ? \"hard \" : \"\";\n    var extraHintsText = options.extraHintsPercent > 0 ? \" with \" + options.extraHintsPercent + \"% extra hints\" : \"\";\n    return options.rows + \"\\u00D7\" + options.cols + \" \" + difficultyText + \"puzzle\" + extraHintsText;\n}\nexports.formatOptions = formatOptions;\n\n\n/***/ }),\n\n/***/ \"gBE2\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/small/small-c2.488e286fbc404fc350cc0e4def122c83.png\";\n\n/***/ }),\n\n/***/ \"gVWB\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/large/large-f3.0070d3861e60350f291165d89028d7d1.png\";\n\n/***/ }),\n\n/***/ \"gYeE\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar PairsDistribution_1 = __webpack_require__(\"Seff\");\nvar AdjacentHint_1 = __webpack_require__(\"2+Yo\");\nvar BetweenHint_1 = __webpack_require__(\"DAXx\");\nvar DirectionHint_1 = __webpack_require__(\"X9r5\");\nvar OpenHint_1 = __webpack_require__(\"HwaM\");\nvar SameColumnHint_1 = __webpack_require__(\"JIJM\");\nvar RandomHintFactory = (function () {\n    function RandomHintFactory() {\n        // hint frequency distribution from original einstein 2.0\n        this.defaultDist = new PairsDistribution_1.PairsDistribution([\n            [new AdjacentHint_1.AdjacentHintFactory(), 4],\n            [new OpenHint_1.OpenHintFactory(), 1],\n            [new SameColumnHint_1.SameColumnHintFactory(), 2],\n            [new DirectionHint_1.DirectionHintFactory(), 4],\n            [new BetweenHint_1.BetweenHintFactory(), 3]\n        ]);\n    }\n    RandomHintFactory.prototype.supports = function (options) {\n        return this.defaultDist.filter(function (freq, value) { return value.supports(options); }).classes > 0;\n    };\n    RandomHintFactory.prototype.random = function (board) {\n        var dist = this.defaultDist.filter(function (freq, value) { return value.supports(board.options); });\n        var hintFactory = dist.random();\n        return hintFactory.random(board);\n    };\n    return RandomHintFactory;\n}());\nexports.RandomHintFactory = RandomHintFactory;\n\n\n/***/ }),\n\n/***/ \"hFVX\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/small/small-d6.83aaeda6a3e029931af97f484755879f.png\";\n\n/***/ }),\n\n/***/ \"hli+\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/large/large-e5.b1fdec84ea77accaea3f9a52908d69f3.png\";\n\n/***/ }),\n\n/***/ \"hmo1\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _ = __webpack_require__(\"M4fF\");\nvar MultiBoard_1 = __webpack_require__(\"CBd9\");\nvar PuzzleGenerator_1 = __webpack_require__(\"cnN+\");\nvar Puzzle = (function () {\n    function Puzzle(singleBoard, hints, options) {\n        this.singleBoard = singleBoard;\n        this.hints = hints;\n        this.options = options;\n        this.multiBoard = MultiBoard_1.MultiBoard.full(options);\n        this.multiBoard.applyHints(_.filter(hints, function (hint) { return hint.getType() === 0 /* Start */; }));\n    }\n    Puzzle.prototype.isSolved = function () {\n        return this.multiBoard.isSolved(this.singleBoard);\n    };\n    Puzzle.prototype.isOver = function () {\n        return !this.multiBoard.contains(this.singleBoard);\n    };\n    Puzzle.prototype.applySingleHint = function () {\n        return this.multiBoard.applySingleHint(_.filter(this.hints, function (hint) { return hint.getType() !== 0 /* Start */; }));\n    };\n    Puzzle.prototype.canApplySingleHint = function () {\n        var tmpPuzzle = _.cloneDeep(this);\n        return tmpPuzzle.applySingleHint();\n    };\n    Puzzle.generate = function (options) {\n        return PuzzleGenerator_1.mainPuzzleGenerator.generate(options); // TODO: remove because usages should check supports before\n    };\n    return Puzzle;\n}());\nexports.Puzzle = Puzzle;\n\n\n/***/ }),\n\n/***/ \"iXl1\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/small/small-d4.465fbcbda569f002956eff6dbc525fba.png\";\n\n/***/ }),\n\n/***/ \"kCQN\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"./rain.0d05874e0f2cdd3a51985dd895f01fd0.png\";\n\n/***/ }),\n\n/***/ \"kbZK\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/small/small-c1.857515213e12574db6ea3b7694015dd8.png\";\n\n/***/ }),\n\n/***/ \"lgdU\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/small/small-e6.f63290d00dca1fb50b97a7749bbc6fdc.png\";\n\n/***/ }),\n\n/***/ \"mGEC\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/large/large-c4.83eef6ef77656276b988cffc6dd1b2dd.png\";\n\n/***/ }),\n\n/***/ \"mPGt\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/large/large-b6.29228909139aed0e29c1e0d248fdc8b1.png\";\n\n/***/ }),\n\n/***/ \"mcFw\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/small/small-c3.8ecb4d1c7b95cff1b3f7a4e3e0342ad0.png\";\n\n/***/ }),\n\n/***/ \"n1vv\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = __webpack_require__(\"TToO\");\nvar HintsGenerator_1 = __webpack_require__(\"S+P+\");\nvar NonApplyHintsGenerator = (function (_super) {\n    tslib_1.__extends(NonApplyHintsGenerator, _super);\n    function NonApplyHintsGenerator() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    NonApplyHintsGenerator.prototype.supports = function (options) {\n        return options.cols > 2 && _super.prototype.supports.call(this, options);\n    };\n    NonApplyHintsGenerator.prototype.generate = function (options, board) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var hints, i;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        i = 0;\n                        _a.label = 1;\n                    case 1: return [4 /*yield*/, this.delegate.generate(options, board)];\n                    case 2:\n                        hints = _a.sent();\n                        i++;\n                        _a.label = 3;\n                    case 3:\n                        if (board.isSolvable(hints)) return [3 /*break*/, 1];\n                        _a.label = 4;\n                    case 4:\n                        console.log(i + \" tries to non-apply\");\n                        return [2 /*return*/, hints];\n                }\n            });\n        });\n    };\n    return NonApplyHintsGenerator;\n}(HintsGenerator_1.DelegateHintsGenerator));\nexports.NonApplyHintsGenerator = NonApplyHintsGenerator;\n\n\n/***/ }),\n\n/***/ \"nVYH\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/small/small-a2.e58c4d7d4ca282f01f1842de56fcc204.png\";\n\n/***/ }),\n\n/***/ \"oD70\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/large/large-d2.9a9e2546ef2de2aed7b9cafca1e574a4.png\";\n\n/***/ }),\n\n/***/ \"oJmq\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/large/large-c6.b70b863014dd77f1444a4f5dcfaf937d.png\";\n\n/***/ }),\n\n/***/ \"oXIE\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/large/large-c2.c8ea002cb52b8a2bb2391a8a599a1be2.png\";\n\n/***/ }),\n\n/***/ \"ouBu\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = __webpack_require__(\"TToO\");\nvar preact_1 = __webpack_require__(\"rMlB\");\n__webpack_require__(\"xToJ\");\nvar BirthdayComponent = (function (_super) {\n    tslib_1.__extends(BirthdayComponent, _super);\n    function BirthdayComponent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    BirthdayComponent.prototype.render = function (props) {\n        var now = new Date();\n        if (now.getMonth() + 1 == props.month && now.getDate() == props.day) {\n            return (preact_1.h(\"div\", { class: \"birthday\" },\n                preact_1.h(\"p\", null,\n                    \"Happy birthday, \",\n                    props.name,\n                    \"!\")));\n        }\n        else\n            return null;\n    };\n    return BirthdayComponent;\n}(preact_1.Component));\nexports.BirthdayComponent = BirthdayComponent;\n\n\n/***/ }),\n\n/***/ \"pJA7\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"pqg3\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/small/small-a6.b74ac4a06b9b99cdebadc188e6f2eba7.png\";\n\n/***/ }),\n\n/***/ \"q9gS\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/large/large-d6.3707649a76849867b0067b33cee2f45a.png\";\n\n/***/ }),\n\n/***/ \"qMEF\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar preact_1 = __webpack_require__(\"rMlB\");\nvar AppComponent_1 = __webpack_require__(\"SLpm\");\nvar OfflinePluginRuntime = __webpack_require__(\"t8iB\");\nconsole.log(\"-------\");\nOfflinePluginRuntime.install();\n// import \"preact/devtools\";\npreact_1.render(preact_1.h(AppComponent_1.AppComponent, null), document.body);\n/*var width = (window.innerWidth > 0) ? window.innerWidth : screen.width;\nalert(width);*/\n/*\nlet listener = new VisibilityChangeListener(visible => console.log(`Visibility ${visible} ${document.visibilityState}`));\nlistener.add();*/\n\n\n/***/ }),\n\n/***/ \"qpPT\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/small/small-a1.7ec6461d1c92b8cd2af53465e9b35cfc.png\";\n\n/***/ }),\n\n/***/ \"qwlA\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/hint-tile.fef2ac154678271b433d05cac0e1e766.png\";\n\n/***/ }),\n\n/***/ \"romA\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/small/small-b4.5539a0f576453510700b7e1ac8ac62c2.png\";\n\n/***/ }),\n\n/***/ \"rxGk\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/large/large-c5.649a708fdfe3823d8ad66395bf760461.png\";\n\n/***/ }),\n\n/***/ \"t+UZ\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/large/large-f5.23ad85abc671b650c4fab087327177b8.png\";\n\n/***/ }),\n\n/***/ \"uLm8\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/small/small-e2.2a6f0dc9158e2248beb5da27abf58387.png\";\n\n/***/ }),\n\n/***/ \"uVvn\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/small/small-a5.a7e023b76efb421fce243698ec5c1172.png\";\n\n/***/ }),\n\n/***/ \"uyRy\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"vO/K\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = __webpack_require__(\"TToO\");\nvar _ = __webpack_require__(\"M4fF\");\nvar db_1 = __webpack_require__(\"ATbC\");\nvar Times;\n(function (Times) {\n    function addItem(timesItem) {\n        return db_1.db.times.add(timesItem);\n    }\n    Times.addItem = addItem;\n    function add(options, time, name) {\n        var timesItem = tslib_1.__assign({}, options, { time: time, date: new Date(), name: name });\n        return addItem(timesItem);\n    }\n    Times.add = add;\n    function getSortedTimes(options) {\n        return db_1.db.times.where(tslib_1.__assign({}, options)).sortBy(\"time\");\n    }\n    Times.getSortedTimes = getSortedTimes;\n    function getTop10(options) {\n        return getSortedTimes(options).then(function (timesItems) {\n            return _.take(timesItems, 10);\n        });\n    }\n    Times.getTop10 = getTop10;\n    function isInTop10(options, time) {\n        return getSortedTimes(options).then(function (timesItems) {\n            if (timesItems.length < 10 || time < timesItems[10 - 1].time)\n                return _.sortedIndexBy(timesItems.slice(0, 10), { time: time }, function (timesItem) { return timesItem.time; });\n            else\n                return false;\n        });\n    }\n    Times.isInTop10 = isInTop10;\n    function hasTimes(options) {\n        return db_1.db.times.where(tslib_1.__assign({}, options)).count(function (count) { return count > 0; });\n    }\n    Times.hasTimes = hasTimes;\n})(Times = exports.Times || (exports.Times = {}));\n\n\n/***/ }),\n\n/***/ \"voAe\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/small/small-f1.cf4eb2f72546034b67c7e387426aab1f.png\";\n\n/***/ }),\n\n/***/ \"w35o\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/large/large-b2.f088bd5349ae94f3aecf2256a2a41f9a.png\";\n\n/***/ }),\n\n/***/ \"x5BK\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/small/small-a3.b5693ec5ce8e44c2ab79da7d22e419c0.png\";\n\n/***/ }),\n\n/***/ \"xDob\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/small/small-d2.f554d768eed7fb9c2ac1361d80a08e82.png\";\n\n/***/ }),\n\n/***/ \"xFS2\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/small/small-f2.1214cc29cc865a50e028b884cf34173d.png\";\n\n/***/ }),\n\n/***/ \"xToJ\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"yFfv\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/large/large-f4.43276b459501e836f1928103bcbdc92c.png\";\n\n/***/ }),\n\n/***/ \"yFiT\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar VisibilityChangeListener = (function () {\n    function VisibilityChangeListener(callback) {\n        var _this = this;\n        this.callback = callback;\n        this.visible = true;\n        this.focused = function () {\n            // console.debug(`focused ${document.visibilityState}`);\n            if (!_this.visible)\n                _this.callback(_this.visible = true);\n        };\n        this.unfocused = function () {\n            // console.debug(`unfocused ${document.visibilityState}`);\n            if (_this.visible)\n                _this.callback(_this.visible = false);\n        };\n    }\n    VisibilityChangeListener.prototype.add = function () {\n        // https://stackoverflow.com/a/38710376\n        var _this = this;\n        // Standards:\n        if ('hidden' in document) {\n            document.addEventListener('visibilitychange', function () { (document.hidden ? _this.unfocused : _this.focused)(); });\n        }\n        if ('mozHidden' in document) {\n            document.addEventListener('mozvisibilitychange', function () { (document.mozHidden ? _this.unfocused : _this.focused)(); });\n        }\n        if ('webkitHidden' in document) {\n            document.addEventListener('webkitvisibilitychange', function () { (document.webkitHidden ? _this.unfocused : _this.focused)(); });\n        }\n        if ('msHidden' in document) {\n            document.addEventListener('msvisibilitychange', function () { (document.msHidden ? _this.unfocused : _this.focused)(); });\n        }\n        // IE 9 and lower:\n        if ('onfocusin' in document) {\n            document.onfocusin = this.focused;\n            document.onfocusout = this.unfocused;\n        }\n        // All others:\n        window.onpageshow = window.onfocus = this.focused;\n        window.onpagehide = window.onblur = this.unfocused;\n        // TODO: initial visibility check like https://stackoverflow.com/a/1060034\n    };\n    VisibilityChangeListener.prototype.remove = function () {\n        // TODO: remove listeners\n    };\n    return VisibilityChangeListener;\n}());\nexports.VisibilityChangeListener = VisibilityChangeListener;\n\n\n/***/ }),\n\n/***/ \"yNUn\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/small/small-f4.fa8fa0e7c09873297312ed5082eac413.png\";\n\n/***/ }),\n\n/***/ \"ytF8\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/large/large-a4.30bcbdd3b26849030d9f7756c19d6a98.png\";\n\n/***/ }),\n\n/***/ \"zU+P\":\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"icons/original/large/large-f2.ebac4e572194ab532410773494ed9c4e.png\";\n\n/***/ }),\n\n/***/ \"ziB5\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = __webpack_require__(\"TToO\");\nvar classNames = __webpack_require__(\"HW6M\");\nvar _ = __webpack_require__(\"M4fF\");\nvar preact_1 = __webpack_require__(\"rMlB\");\nvar LongTouchContextMenuHandler_1 = __webpack_require__(\"euc6\");\nvar IconComponents_1 = __webpack_require__(\"NsAh\");\n__webpack_require__(\"pJA7\");\nvar SingleCellComponent = (function (_super) {\n    tslib_1.__extends(SingleCellComponent, _super);\n    function SingleCellComponent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SingleCellComponent.prototype.render = function (props) {\n        return (preact_1.h(\"div\", { class: \"cell-single\" },\n            preact_1.h(IconComponents_1.LargeVariantIconComponent, { row: props.row, variant: props.variant })));\n    };\n    return SingleCellComponent;\n}(preact_1.Component));\nvar VariantVariantMultiCellComponent = (function (_super) {\n    tslib_1.__extends(VariantVariantMultiCellComponent, _super);\n    function VariantVariantMultiCellComponent() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.contextMenuHandler = new LongTouchContextMenuHandler_1.LongTouchContextMenuHandler(function () { return _this.remove(); });\n        _this.onClick = function (e) {\n            _this.set();\n        };\n        return _this;\n    }\n    VariantVariantMultiCellComponent.prototype.set = function () {\n        this.props.board.set(this.props.row, this.props.col, this.props.variant);\n        this.props.refresh();\n    };\n    VariantVariantMultiCellComponent.prototype.remove = function () {\n        this.props.board.remove(this.props.row, this.props.col, this.props.variant);\n        this.props.refresh();\n    };\n    VariantVariantMultiCellComponent.prototype.render = function (props) {\n        return (preact_1.h(\"div\", tslib_1.__assign({ class: \"cell-multi-variant\", onClick: this.onClick }, this.contextMenuHandler),\n            preact_1.h(IconComponents_1.SmallVariantIconComponent, { row: props.row, variant: props.variant })));\n    };\n    return VariantVariantMultiCellComponent;\n}(preact_1.Component));\nvar EmptyVariantMultiCellComponent = (function (_super) {\n    tslib_1.__extends(EmptyVariantMultiCellComponent, _super);\n    function EmptyVariantMultiCellComponent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EmptyVariantMultiCellComponent.prototype.render = function (props) {\n        return (preact_1.h(\"div\", { class: \"cell-multi-empty\" }));\n    };\n    return EmptyVariantMultiCellComponent;\n}(preact_1.Component));\nvar VariantMultiCellComponent = (function (_super) {\n    tslib_1.__extends(VariantMultiCellComponent, _super);\n    function VariantMultiCellComponent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    VariantMultiCellComponent.prototype.render = function (props) {\n        if (props.variant < props.board.variants &&\n            props.board.isPossible(props.row, props.col, props.variant))\n            return preact_1.h(VariantVariantMultiCellComponent, tslib_1.__assign({}, props));\n        else\n            return preact_1.h(EmptyVariantMultiCellComponent, tslib_1.__assign({}, props));\n    };\n    return VariantMultiCellComponent;\n}(preact_1.Component));\nvar MultiCellComponent = (function (_super) {\n    tslib_1.__extends(MultiCellComponent, _super);\n    function MultiCellComponent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    MultiCellComponent.prototype.render = function (props) {\n        var variantCols = Math.ceil(Math.sqrt(props.board.variants));\n        var variantRows = Math.ceil(props.board.variants / variantCols);\n        return (preact_1.h(\"table\", { class: \"cell-multi\" }, _.times(variantRows, function (variantRow) {\n            return preact_1.h(\"tr\", null, _.times(variantCols, function (variantCol) {\n                return preact_1.h(\"td\", null,\n                    preact_1.h(VariantMultiCellComponent, tslib_1.__assign({}, props, { variant: variantRow * variantCols + variantCol })));\n            }));\n        })));\n    };\n    return MultiCellComponent;\n}(preact_1.Component));\nvar CellComponent = (function (_super) {\n    tslib_1.__extends(CellComponent, _super);\n    function CellComponent() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.onContextMenu = function (e) {\n            e.preventDefault();\n        };\n        return _this;\n    }\n    CellComponent.prototype.render = function (props) {\n        if (props.showBoard) {\n            var correct = props.board.isSingle(props.row, props.col) && props.board.getSingle(props.row, props.col) == props.showBoard.get(props.row, props.col);\n            return (preact_1.h(\"td\", { class: classNames({\n                    \"cell-correct\": correct,\n                    \"cell-incorrect\": !correct\n                }) },\n                preact_1.h(\"div\", { class: \"cell\", onContextMenu: this.onContextMenu },\n                    preact_1.h(SingleCellComponent, tslib_1.__assign({}, props, { variant: props.showBoard.get(props.row, props.col) })))));\n        }\n        else {\n            return (preact_1.h(\"td\", null,\n                preact_1.h(\"div\", { class: \"cell\", onContextMenu: this.onContextMenu }, props.board.isSingle(props.row, props.col) ?\n                    preact_1.h(SingleCellComponent, tslib_1.__assign({}, props, { variant: props.board.getSingle(props.row, props.col) })) :\n                    preact_1.h(MultiCellComponent, tslib_1.__assign({}, props)))));\n        }\n    };\n    return CellComponent;\n}(preact_1.Component));\nvar RowComponent = (function (_super) {\n    tslib_1.__extends(RowComponent, _super);\n    function RowComponent() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.refresh = function () {\n            _this.forceUpdate();\n            _this.props.refresh();\n        };\n        return _this;\n    }\n    RowComponent.prototype.render = function (props) {\n        var _this = this;\n        return (preact_1.h(\"tr\", null, _.times(props.board.cols, function (col) {\n            return preact_1.h(CellComponent, tslib_1.__assign({}, props, { col: col, refresh: _this.refresh }));\n        })));\n    };\n    return RowComponent;\n}(preact_1.Component));\nvar MultiBoardComponent = (function (_super) {\n    tslib_1.__extends(MultiBoardComponent, _super);\n    function MultiBoardComponent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    MultiBoardComponent.prototype.render = function (props) {\n        var board = props.board;\n        var data = {\n            \"data-rows\": board.rows,\n            \"data-cols\": board.cols\n        };\n        return (preact_1.h(\"div\", tslib_1.__assign({ class: \"multiboard-outer\" }, data),\n            preact_1.h(\"table\", tslib_1.__assign({ class: \"multiboard\" }, data), _.times(board.rows, function (row) {\n                return preact_1.h(RowComponent, tslib_1.__assign({}, props, { row: row }));\n            }))));\n    };\n    return MultiBoardComponent;\n}(preact_1.Component));\nexports.MultiBoardComponent = MultiBoardComponent;\n\n\n/***/ })\n\n},[\"qMEF\"]);\n\n\n// WEBPACK FOOTER //\n// app.2e770df424b74b5ac71cf84208f834e6.js","module.exports = __webpack_public_path__ + \"icons/original/large/large-c1.cf85c5eb9acce5553a85122616f8f7f3.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/large/large-c1.png\n// module id = +bsQ\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/large/large-b3.f56ee08f09215c9501370c94a97d5da1.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/large/large-b3.png\n// module id = /BPU\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/large/large-d5.93f0c9556e78c0b2b5ab5a7bb293e22c.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/large/large-d5.png\n// module id = 1Tjk\n// module chunks = app","import * as _ from \"lodash\";\nimport {BoardOptions} from \"../board/Board\";\nimport {MultiBoard} from \"../board/MultiBoard\";\nimport {SingleBoard} from \"../board/SingleBoard\";\nimport {Hint, HintFactory, HintType} from \"./Hint\";\n\nexport class AdjacentHint implements Hint {\n    constructor(public row1: number, public variant1: number, public row2: number, public variant2: number) {\n\n    }\n\n    applyTo(board: MultiBoard): boolean {\n        let changed = false;\n\n        let applyToCol = (col: number, thisRow: number, thisVariant: number, adjRow: number, adjVariant: number) => {\n            const hasLeft = col >= 1 ? board.isPossible(adjRow, col - 1, adjVariant) : false;\n            const hasRight = col < board.cols - 1 ? board.isPossible(adjRow, col + 1, adjVariant) : false;\n\n            if (!hasLeft && !hasRight && board.isPossible(thisRow, col, thisVariant)) {\n                board.remove(thisRow, col, thisVariant);\n                changed = true;\n            }\n        };\n\n        for (let col = 0; col < board.cols; col++) {\n            applyToCol(col, this.row1, this.variant1, this.row2, this.variant2);\n            applyToCol(col, this.row2, this.variant2, this.row1, this.variant1);\n        }\n\n        if (changed)\n            this.applyTo(board);\n\n        return changed;\n    }\n\n    getType(): HintType {\n        return HintType.Horizontal;\n    }\n}\n\nexport class AdjacentHintFactory implements HintFactory {\n    supports(options: BoardOptions): boolean {\n        return options.rows >= 1 && options.cols >= 2;\n    }\n\n    random(board: SingleBoard): AdjacentHint {\n        let row1 = _.random(0, board.rows - 1);\n        let col1 = _.random(0, board.cols - 1);\n        let row2 = _.random(0, board.rows - 1);\n        let colDelta;\n        if (col1 == 0)\n            colDelta = 1;\n        else if (col1 == board.cols - 1)\n            colDelta = -1;\n        else\n            colDelta = _.random(0, 1) == 1 ? 1 : -1;\n        let col2 = col1 + colDelta;\n        return new AdjacentHint(row1, board.get(row1, col1), row2, board.get(row2, col2));\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/puzzle/hint/AdjacentHint.ts","module.exports = __webpack_public_path__ + \"icons/original/small/small-c6.3a75bba0385dcc7f6e7074d7873ff81e.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/small/small-c6.png\n// module id = 20Ho\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/small/small-b1.376d5df50dd14a86919d705382c89060.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/small/small-b1.png\n// module id = 27d+\n// module chunks = app","import * as _ from \"lodash\";\n\nexport class Timer {\n    private totalTime: number;\n    private startTime: number | null;\n\n    constructor() {\n        this.reset();\n    }\n\n    start(): void {\n        if (this.startTime === null)\n            this.startTime = _.now();\n    }\n\n    pause(): void {\n        let runningTime = this.getRunningTime();\n        if (runningTime !== null) {\n            this.totalTime += runningTime;\n            this.startTime = null;\n        }\n    }\n\n    getRunningTime(): number | null {\n        return this.startTime !== null ? _.now() - this.startTime : null;\n    }\n\n    getTotalTime(): number {\n        return this.totalTime + (this.getRunningTime() || 0);\n    }\n\n    reset(): void {\n        this.totalTime = 0;\n        this.startTime = null;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/Timer.ts","module.exports = __webpack_public_path__ + \"icons/original/large/large-a3.2f39989763b3636f69b02ba2b53fbe44.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/large/large-a3.png\n// module id = 4I4A\n// module chunks = app","import {db} from \"./db\";\n\nexport interface WasmItem {\n    url: string;\n    module: WebAssembly.Module;\n}\n\nexport namespace Wasm {\n    export function getCached(url): Promise<WebAssembly.Module | undefined> {\n        return db.wasm.get(url, wasmItem => {\n            console.log(\"wasm from db:\");\n            console.debug(wasmItem);\n            return wasmItem !== undefined ? wasmItem.module : undefined;\n        });\n    }\n\n    export function cache(url: string, module: WebAssembly.Module) {\n        let wasmItem = {\n            url: url,\n            module: module\n        };\n        console.log(\"wasm to db:\");\n        console.debug(wasmItem);\n        db.transaction(\"rw\", db.wasm, () =>\n            db.wasm.clear().then(() =>\n                db.wasm.put(wasmItem)\n            )\n        ).then(() => console.log(\"wasm cached\"));\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/storage/Wasm.ts","import * as _ from \"lodash\";\n\nexport function formatDuration(diffMs: number) {\n    let diffSec = diffMs / 1000;\n    let sec = Math.floor(diffSec) % 60;\n    let min = Math.floor(diffSec / 60) % 60;\n    let hr = Math.floor(diffSec / 60 / 60);\n\n    return `${_.padStart(hr.toString(), 2, \"0\")}:${_.padStart(min.toString(), 2, \"0\")}:${_.padStart(sec.toString(), 2, \"0\")}`;\n\n    /*let ms = Math.floor(diffMs % 1000);\n    return `${_.padStart(hr.toString(), 2, \"0\")}:${_.padStart(min.toString(), 2, \"0\")}:${_.padStart(sec.toString(), 2, \"0\")}.${_.padStart(ms.toString(), 3, \"0\")}`;*/\n}\n\n\n// WEBPACK FOOTER //\n// ./src/time.ts","import * as _ from \"lodash\";\nimport {SingleBoard} from \"../board/SingleBoard\";\nimport {Hint, HintFactory} from \"../hint/Hint\";\nimport {PuzzleOptions} from \"../Puzzle\";\nimport {RandomHintFactory} from \"../RandomHint\";\nimport {DelegateHintsGenerator} from \"./HintsGenerator\";\n\nexport class ExtraHintsGenerator extends DelegateHintsGenerator {\n\n    private static hintFactory: HintFactory = new RandomHintFactory();\n\n    supports(options: PuzzleOptions): boolean {\n        return super.supports(options) && ExtraHintsGenerator.hintFactory.supports(options);\n    }\n\n    async generate(options: PuzzleOptions, board: SingleBoard): Promise<Hint[]> {\n        let hints = await this.delegate.generate(options, board);\n        return ExtraHintsGenerator.generateExtraHints(options, board, hints);\n    }\n\n    private static generateExtraHints(options: PuzzleOptions, board: SingleBoard, hints: Hint[]): Hint[] {\n        hints = _.clone(hints);\n        let extraHints = Math.round((options.extraHintsPercent / 100) * hints.length);\n        console.debug(`Adding extra hints: ${extraHints}`);\n        for (let i = 0; i < extraHints; i++) {\n            let hint = ExtraHintsGenerator.hintFactory.random(board);\n            hints.push(hint);\n        }\n        return hints;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/puzzle/generate/ExtraHintsGenerator.ts","module.exports = __webpack_public_path__ + \"icons/original/small/small-b2.1e0362bc91fe36a746482f52eea6cd78.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/small/small-b2.png\n// module id = 6b+j\n// module chunks = app","var map = {\n\t\"./icons/original/hint-adjacent.png\": \"Qj03\",\n\t\"./icons/original/hint-between.png\": \"IJZH\",\n\t\"./icons/original/hint-direction.png\": \"Op0r\",\n\t\"./icons/original/hint-tile.png\": \"qwlA\",\n\t\"./icons/original/large/large-a1.png\": \"QP0S\",\n\t\"./icons/original/large/large-a2.png\": \"NhLW\",\n\t\"./icons/original/large/large-a3.png\": \"4I4A\",\n\t\"./icons/original/large/large-a4.png\": \"ytF8\",\n\t\"./icons/original/large/large-a5.png\": \"TeOI\",\n\t\"./icons/original/large/large-a6.png\": \"N7YA\",\n\t\"./icons/original/large/large-b1.png\": \"UBU4\",\n\t\"./icons/original/large/large-b2.png\": \"w35o\",\n\t\"./icons/original/large/large-b3.png\": \"/BPU\",\n\t\"./icons/original/large/large-b4.png\": \"BRDO\",\n\t\"./icons/original/large/large-b5.png\": \"YKaq\",\n\t\"./icons/original/large/large-b6.png\": \"mPGt\",\n\t\"./icons/original/large/large-c1.png\": \"+bsQ\",\n\t\"./icons/original/large/large-c2.png\": \"oXIE\",\n\t\"./icons/original/large/large-c3.png\": \"XjqR\",\n\t\"./icons/original/large/large-c4.png\": \"mGEC\",\n\t\"./icons/original/large/large-c5.png\": \"rxGk\",\n\t\"./icons/original/large/large-c6.png\": \"oJmq\",\n\t\"./icons/original/large/large-d1.png\": \"cgSM\",\n\t\"./icons/original/large/large-d2.png\": \"oD70\",\n\t\"./icons/original/large/large-d3.png\": \"PWPq\",\n\t\"./icons/original/large/large-d4.png\": \"D3DT\",\n\t\"./icons/original/large/large-d5.png\": \"1Tjk\",\n\t\"./icons/original/large/large-d6.png\": \"q9gS\",\n\t\"./icons/original/large/large-e1.png\": \"ZvN9\",\n\t\"./icons/original/large/large-e2.png\": \"dcOB\",\n\t\"./icons/original/large/large-e3.png\": \"91Mv\",\n\t\"./icons/original/large/large-e4.png\": \"SAo3\",\n\t\"./icons/original/large/large-e5.png\": \"hli+\",\n\t\"./icons/original/large/large-e6.png\": \"YFuY\",\n\t\"./icons/original/large/large-f1.png\": \"ZNit\",\n\t\"./icons/original/large/large-f2.png\": \"zU+P\",\n\t\"./icons/original/large/large-f3.png\": \"gVWB\",\n\t\"./icons/original/large/large-f4.png\": \"yFfv\",\n\t\"./icons/original/large/large-f5.png\": \"t+UZ\",\n\t\"./icons/original/large/large-f6.png\": \"dSmd\",\n\t\"./icons/original/small/small-a1.png\": \"qpPT\",\n\t\"./icons/original/small/small-a2.png\": \"nVYH\",\n\t\"./icons/original/small/small-a3.png\": \"x5BK\",\n\t\"./icons/original/small/small-a4.png\": \"Htyr\",\n\t\"./icons/original/small/small-a5.png\": \"uVvn\",\n\t\"./icons/original/small/small-a6.png\": \"pqg3\",\n\t\"./icons/original/small/small-b1.png\": \"27d+\",\n\t\"./icons/original/small/small-b2.png\": \"6b+j\",\n\t\"./icons/original/small/small-b3.png\": \"RUP8\",\n\t\"./icons/original/small/small-b4.png\": \"romA\",\n\t\"./icons/original/small/small-b5.png\": \"fZOX\",\n\t\"./icons/original/small/small-b6.png\": \"Z31m\",\n\t\"./icons/original/small/small-c1.png\": \"kbZK\",\n\t\"./icons/original/small/small-c2.png\": \"gBE2\",\n\t\"./icons/original/small/small-c3.png\": \"mcFw\",\n\t\"./icons/original/small/small-c4.png\": \"90E6\",\n\t\"./icons/original/small/small-c5.png\": \"AQov\",\n\t\"./icons/original/small/small-c6.png\": \"20Ho\",\n\t\"./icons/original/small/small-d1.png\": \"C7Cf\",\n\t\"./icons/original/small/small-d2.png\": \"xDob\",\n\t\"./icons/original/small/small-d3.png\": \"Dvz/\",\n\t\"./icons/original/small/small-d4.png\": \"iXl1\",\n\t\"./icons/original/small/small-d5.png\": \"d6hy\",\n\t\"./icons/original/small/small-d6.png\": \"hFVX\",\n\t\"./icons/original/small/small-e1.png\": \"SCQN\",\n\t\"./icons/original/small/small-e2.png\": \"uLm8\",\n\t\"./icons/original/small/small-e3.png\": \"E9CV\",\n\t\"./icons/original/small/small-e4.png\": \"XnXw\",\n\t\"./icons/original/small/small-e5.png\": \"P2+R\",\n\t\"./icons/original/small/small-e6.png\": \"lgdU\",\n\t\"./icons/original/small/small-f1.png\": \"voAe\",\n\t\"./icons/original/small/small-f2.png\": \"xFS2\",\n\t\"./icons/original/small/small-f3.png\": \"Hoba\",\n\t\"./icons/original/small/small-f4.png\": \"yNUn\",\n\t\"./icons/original/small/small-f5.png\": \"MjYr\",\n\t\"./icons/original/small/small-f6.png\": \"QfaF\",\n\t\"./icons/original/tile.png\": \"FslU\",\n\t\"./rain-light.png\": \"8OvN\",\n\t\"./rain.png\": \"kCQN\"\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"7PiI\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web \\.png$\n// module id = 7PiI\n// module chunks = app","import Dexie from \"dexie\";\nimport {PuzzleOptions} from \"../puzzle/Puzzle\";\nimport {ConfigItem} from \"./Config\";\nimport {CountsItem} from \"./Counts\";\nimport {TimesItem} from \"./Times\";\nimport {WasmItem} from \"./Wasm\";\n\nexport class EinsteinDatabase extends Dexie {\n    times: Dexie.Table<TimesItem, any>;\n    config: Dexie.Table<ConfigItem, string>;\n    counts: Dexie.Table<CountsItem, number>;\n    wasm: Dexie.Table<WasmItem, string>;\n\n    constructor() {\n        super(\"EinsteinDatabase\");\n\n        this.version(1).stores({\n            times: \"++, [rows+cols+extraHintsPercent]\"\n        });\n\n        this.version(2).stores({\n            config: \"key\"\n        });\n\n        this.version(3).stores({\n            counts: \"[rows+cols+extraHintsPercent]\"\n        });\n\n        /*\n        counts has puzzle options as primary key.\n        Dexie can't upgrade primary key changes automatically: https://github.com/dfahlander/Dexie.js/issues/88#issuecomment-285384576\n        Must use temporary table to recreate with additional auto-increment primary key.\n        Must use separate versions for deletion for some reason: https://github.com/dfahlander/Dexie.js/issues/105#issuecomment-405670992\n         */\n\n        this.version(4).stores({\n            countsTmp: \"[rows+cols+extraHintsPercent]\"\n        }).upgrade(async tx => {\n            let countsItems = await tx.table(\"counts\").toArray();\n            await tx.table(\"countsTmp\").bulkAdd(countsItems);\n        });\n\n        this.version(5).stores({\n            counts: null\n        });\n\n        this.version(6).stores({\n            counts: \"++id, [rows+cols+extraHintsPercent]\"\n        }).upgrade(async tx => {\n            let countsItemsTmp = await tx.table(\"countsTmp\").toArray();\n            await tx.table(\"counts\").bulkAdd(countsItemsTmp);\n        });\n\n        this.version(7).stores({\n            countsTmp: null\n        });\n\n        this.version(8).stores({\n            times: \"++, [rows+cols+extraHintsPercent+difficulty]\",\n            counts: \"++id, [rows+cols+extraHintsPercent+difficulty]\"\n        }).upgrade(tx =>\n            Dexie.Promise.all([\n                tx.table<TimesItem>(\"times\").toCollection().modify({\n                    difficulty: \"normal\"\n                }),\n                tx.table<ConfigItem, string>(\"config\").update(\"options\", {\n                    \"value.difficulty\": \"normal\" // actual object is in value\n                }),\n                tx.table<CountsItem>(\"counts\").toCollection().modify({\n                    difficulty: \"normal\"\n                }),\n            ])\n        );\n\n        this.version(9).stores({\n            wasm: \"url\"\n        });\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/storage/EinsteinDatabase.ts","import * as _ from \"lodash\";\nimport {PuzzleOptions} from \"../puzzle/Puzzle\";\nimport {db} from \"./db\";\n\nexport interface Counts {\n    solved: number;\n    solvedCheated: number;\n    over: number;\n}\n\nexport interface CountsItem extends PuzzleOptions, Counts {\n    id?: number;\n}\n\nexport namespace Counts {\n    export function get(options: PuzzleOptions): Promise<CountsItem> {\n        return db.counts.get({...options}, countsItem => { // TODO: why spread?\n            if (countsItem === undefined) {\n                let defaultItem: CountsItem = {\n                    ...options,\n                    solved: 0,\n                    solvedCheated: 0,\n                    over: 0\n                }; // extracted to have explicit type annotation\n                return defaultItem;\n            }\n            else\n                return countsItem;\n        });\n    }\n\n    export function getTopCounts(): Promise<CountsItem[]> {\n        return db.counts.toArray().then(countsItems =>\n            _.orderBy(countsItems, countsItem =>\n                countsItem.solved + countsItem.solvedCheated + countsItem.over,\n                [\"desc\"])\n        );\n    }\n\n    export function increase(options: PuzzleOptions, count: keyof Counts): Promise<number> {\n        return db.transaction(\"rw\", db.counts, () =>\n            get(options).then(countsItem => {\n                let newCountsItem: CountsItem = _.merge(countsItem, {\n                    [count]: countsItem[count] + 1\n                });\n                return db.counts.put(newCountsItem);\n            })\n        );\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/storage/Counts.ts","module.exports = {\"name\":\"einstein\",\"version\":\"2.0.0\",\"description\":\"Einstein Puzzle 2.0 by Flowix Games ported to the web\",\"author\":\"Simmo Saan\",\"keywords\":[\"typescript\",\"webpack\",\"preact\",\"lodash\",\"game\",\"puzzle-game\",\"web\"],\"repository\":{\"type\":\"git\",\"url\":\"git+https://github.com/sim642/einstein-js.git\"},\"bugs\":{\"url\":\"https://github.com/sim642/einstein-js/issues\"},\"homepage\":\"http://einstein.sim642.eu\",\"scripts\":{\"build:dev\":\"webpack --env=dev --progress --profile --colors\",\"build:prod\":\"webpack --env=prod --progress --profile --colors\",\"coverage\":\"nyc --reporter=lcov --reporter=text npm test\",\"deploy\":\"git push -f origin `git subtree split --prefix dist 2> /dev/null`:gh-pages\",\"test\":\"mocha-webpack\",\"watch:dev\":\"webpack --env=dev --progress --profile --colors --watch\",\"watch:test\":\"mocha-webpack --watch\"},\"dependencies\":{\"classnames\":\"^2.2.5\",\"dexie\":\"^3.0.0-alpha.3\",\"lodash\":\"^4.17.10\",\"preact\":\"^8.2.1\",\"tslib\":\"^1.9.3\",\"z3em\":\"^0.0.5\"},\"devDependencies\":{\"@types/chai\":\"^4.1.4\",\"@types/lodash\":\"^4.14.112\",\"@types/mocha\":\"^5.2.5\",\"@types/webassembly-js-api\":\"0.0.1\",\"@types/webpack-env\":\"^1.13.0\",\"autoprefixer\":\"^7.1.2\",\"chai\":\"^4.1.2\",\"chi-squared\":\"^1.1.0\",\"chunk-manifest-webpack-plugin\":\"1.1.0\",\"clean-webpack-plugin\":\"^0.1.16\",\"copy-webpack-plugin\":\"^4.0.1\",\"css-loader\":\"^0.28.4\",\"css-mqpacker\":\"^6.0.1\",\"extract-text-webpack-plugin\":\"^3.0.0\",\"file-loader\":\"^0.11.2\",\"html-webpack-plugin\":\"^2.29.0\",\"istanbul-instrumenter-loader\":\"^3.0.0\",\"less\":\"^2.7.2\",\"less-loader\":\"^4.0.4\",\"mocha\":\"^5.2.0\",\"mocha-webpack\":\"^1.1.0\",\"nyc\":\"^12.0.2\",\"offline-plugin\":\"^4.8.1\",\"postcss-loader\":\"^2.0.6\",\"style-loader\":\"^0.18.2\",\"ts-loader\":\"^2.2.0\",\"typescript\":\"^2.4.2\",\"webpack\":\"^3.0.0\",\"webpack-chunk-hash\":\"^0.4.0\",\"webpack-merge\":\"^4.1.0\",\"webpack-node-externals\":\"^1.6.0\"},\"nyc\":{\"extension\":[\".tsx\",\".ts\",\".jsx\"],\"instrument\":false,\"sourceMap\":false}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./package.json\n// module id = 7YgM\n// module chunks = app","module.exports = __webpack_public_path__ + \"./rain-light.272fb79b7c99a89b9891f2d596aabecc.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/rain-light.png\n// module id = 8OvN\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/small/small-c4.bc367c0d574d1037f7983b61b94776bf.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/small/small-c4.png\n// module id = 90E6\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/large/large-e3.24b0bdf46ccfa5fae6d324e4b08c9a31.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/large/large-e3.png\n// module id = 91Mv\n// module chunks = app","import * as _ from \"lodash\";\n\nexport function mean(arr: number[]): number {\n    return _.sum(arr) / arr.length;\n}\n\nexport function variance(arr: number[], knownMean: number = mean(arr)): number {\n    return _.sumBy(arr, x => Math.pow(x - knownMean, 2)) / arr.length;\n}\n\nexport function stdDev(arr: number[], knownMean: number = mean(arr)): number {\n    return Math.sqrt(variance(arr, knownMean));\n}\n\n\n// WEBPACK FOOTER //\n// ./src/math/statistics.ts","module.exports = __webpack_public_path__ + \"icons/original/small/small-c5.9254afe6e7940800db50da758cb752df.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/small/small-c5.png\n// module id = AQov\n// module chunks = app","import {EinsteinDatabase} from \"./EinsteinDatabase\";\n\nexport let db = new EinsteinDatabase();\n\n\n// WEBPACK FOOTER //\n// ./src/storage/db.ts","import {Listener} from \"./Listener\";\n\nexport class MessageUnloadListener implements Listener {\n    constructor(public callback: () => string | null) {\n\n    }\n\n    private onBeforeUnload = (e) => {\n        let message = this.callback();\n        if (message !== null)\n            return e.returnValue = message;\n        else\n            return undefined;\n    };\n\n    add(): void {\n        window.addEventListener(\"beforeunload\", this.onBeforeUnload);\n    }\n\n    remove(): void {\n        window.removeEventListener(\"beforeunload\", this.onBeforeUnload);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/web/helper/MessageUnloadListener.ts","module.exports = __webpack_public_path__ + \"icons/original/large/large-b4.cde289fd73095da992ec76470fcaf001.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/large/large-b4.png\n// module id = BRDO\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/small/small-d1.4623124355805891864ed2e7f2bec09a.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/small/small-d1.png\n// module id = C7Cf\n// module chunks = app","import * as _ from \"lodash\";\nimport {Hint} from \"../hint/Hint\";\nimport {Board, BoardOptions} from \"./Board\";\nimport {SingleBoard} from \"./SingleBoard\";\n\ntype Variants = boolean[];\ntype NumberVariants = number[];\n\nexport class MultiBoard extends Board<Variants> {\n    static full(options: BoardOptions): MultiBoard {\n        return new MultiBoard(_.times(options.rows, row => _.times(options.cols, col => _.times(options.cols, _.constant(true)))), options);\n    }\n\n    static numberVariants(table: NumberVariants[][], options?: BoardOptions): MultiBoard {\n        return new MultiBoard(_.map(table, rowCells => _.map(rowCells, cell => {\n            let variants = _.times(rowCells.length, _.constant(false));\n            for (let numberVariant of cell)\n                variants[numberVariant] = true;\n            return variants;\n        })), options);\n    }\n\n    remove(row: number, col: number, variant: number): void {\n        if (this.get(row, col)[variant]) {\n            this.get(row, col)[variant] = false;\n            this.pruneSingles(row);\n        }\n    }\n\n    set(row: number, col: number, variant: number): void {\n        for (let variant = 0; variant < this.variants; variant++)\n            this.get(row, col)[variant] = false;\n        for (let col = 0; col < this.cols; col++)\n            this.get(row, col)[variant] = false;\n        this.get(row, col)[variant] = true;\n        this.pruneSingles(row);\n    }\n\n    isPossible(row: number, col: number, variant: number): boolean {\n        return this.get(row, col)[variant];\n    }\n\n    count(row: number, col: number): number {\n        return _.sumBy(this.get(row, col), variant => variant ? 1 : 0);\n    }\n\n    isSingle(row: number, col: number): boolean {\n        return this.count(row, col) == 1;\n    }\n\n    getSingle(row: number, col: number): number {\n        return _.findIndex(this.get(row, col));\n    }\n\n    private pruneSingles(row: number): void {\n        let colCnt = _.times(this.cols, _.constant(0));\n        let variantCnt = _.times(this.variants, _.constant(0));\n        let colVariant = _.times(this.cols, _.constant(0));\n        let variantCol = _.times(this.variants, _.constant(0));\n\n        for (let col = 0; col < this.cols; col++) {\n            for (let variant = 0; variant < this.variants; variant++) {\n                if (this.get(row, col)[variant]) {\n                    colCnt[col]++;\n                    variantCnt[variant]++;\n                    colVariant[col] = variant;\n                    variantCol[variant] = col;\n                }\n            }\n        }\n\n        let changed = false;\n\n        for (let col = 0; col < this.cols; col++) {\n            if (colCnt[col] == 1 && variantCnt[colVariant[col]] != 1) {\n                const variant = colVariant[col];\n                for (let col2 = 0; col2 < this.cols; col2++) {\n                    if (col2 != col)\n                        this.get(row, col2)[variant] = false;\n                }\n                changed = true;\n            }\n        }\n\n        for (let variant = 0; variant < this.variants; variant++) {\n            if (variantCnt[variant] == 1 && colCnt[variantCol[variant]] != 1) {\n                const col = variantCol[variant];\n                for (let variant2 = 0; variant2 < this.variants; variant2++) {\n                    if (variant2 != variant)\n                        this.get(row, col)[variant2] = false;\n                }\n                changed = true;\n            }\n        }\n\n        if (changed)\n            this.pruneSingles(row);\n    }\n\n    applyHint(hint: Hint): boolean {\n        return hint.applyTo(this);\n    }\n\n    applyHints(hints: Hint[]): boolean {\n        let changed = false;\n        let changed2: boolean;\n        do {\n            changed2 = false;\n            for (let hint of hints) {\n                if (this.applyHint(hint))\n                    changed = changed2 = true;\n            }\n        } while (changed2);\n        return changed;\n    }\n\n    applySingleHint(hints: Hint[]): boolean {\n        for (let hint of hints) {\n            if (this.applyHint(hint))\n                return true;\n        }\n        return false;\n    }\n\n    isSolved(singleBoard: SingleBoard): boolean {\n        return this.isSingleBoard() && this.contains(singleBoard);\n    }\n\n    isSingleBoard(): boolean {\n        for (let row = 0; row < this.rows; row++) {\n            for (let col = 0; col < this.cols; col++) {\n                if (!this.isSingle(row, col))\n                    return false;\n            }\n        }\n        return true;\n    }\n\n    contains(singleBoard: SingleBoard): boolean {\n        for (let row = 0; row < this.rows; row++) {\n            for (let col = 0; col < this.cols; col++) {\n                if (!this.isPossible(row, col, singleBoard.get(row, col)))\n                    return false;\n            }\n        }\n        return true;\n    }\n\n    applySingleBoard(singleBoard: SingleBoard): boolean {\n        if (this.isSolved(singleBoard))\n            return false;\n        else {\n            for (let row = 0; row < this.rows; row++) {\n                for (let col = 0; col < this.cols; col++) {\n                    let singleVariant = singleBoard.get(row, col);\n                    for (let variant = 0; variant < this.variants; variant++)\n                        this.get(row, col)[variant] = variant == singleVariant;\n                }\n            }\n            return true;\n        }\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/puzzle/board/MultiBoard.ts","module.exports = __webpack_public_path__ + \"icons/original/large/large-d4.08e21c2cf4f787a7913cc84db58777ec.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/large/large-d4.png\n// module id = D3DT\n// module chunks = app","import * as _ from \"lodash\";\nimport {BoardOptions} from \"../board/Board\";\nimport {MultiBoard} from \"../board/MultiBoard\";\nimport {SingleBoard} from \"../board/SingleBoard\";\nimport {Hint, HintFactory, HintType} from \"./Hint\";\n\nexport class BetweenHint implements Hint {\n    constructor(public row1: number, public variant1: number, public rowMiddle: number, public variantMiddle: number, public row2: number, public variant2: number) {\n\n    }\n\n    applyTo(board: MultiBoard): boolean {\n        let changed = false;\n\n        if (board.isPossible(this.rowMiddle, 0, this.variantMiddle)) {\n            board.remove(this.rowMiddle, 0, this.variantMiddle);\n            changed = true;\n        }\n\n        if (board.isPossible(this.rowMiddle, board.cols - 1, this.variantMiddle)) {\n            board.remove(this.rowMiddle, board.cols - 1, this.variantMiddle);\n            changed = true;\n        }\n\n        let changed2;\n        do {\n            changed2 = false;\n\n            for (let col = 1; col < board.cols - 1; col++) {\n                if (board.isPossible(this.rowMiddle, col, this.variantMiddle) &&\n                    !(board.isPossible(this.row1, col - 1, this.variant1) && board.isPossible(this.row2, col + 1, this.variant2) ||\n                      board.isPossible(this.row2, col - 1, this.variant2) && board.isPossible(this.row1, col + 1, this.variant1))) {\n                    board.remove(this.rowMiddle, col, this.variantMiddle);\n                    changed2 = true;\n                }\n            }\n\n            for (let col = 0; col < board.cols; col++) {\n                if (board.isPossible(this.row1, col, this.variant1)) {\n                    const leftPossible = col >= 2 ? board.isPossible(this.rowMiddle, col - 1, this.variantMiddle) && board.isPossible(this.row2, col - 2, this.variant2) : false;\n                    const rightPossible = col < board.cols - 2 ? board.isPossible(this.rowMiddle, col + 1, this.variantMiddle) && board.isPossible(this.row2, col + 2, this.variant2) : false;\n                    if (!leftPossible && !rightPossible) {\n                        board.remove(this.row1, col, this.variant1);\n                        changed2 = true;\n                    }\n                }\n\n                if (board.isPossible(this.row2, col, this.variant2)) {\n                    const leftPossible = col >= 2 ? board.isPossible(this.rowMiddle, col - 1, this.variantMiddle) && board.isPossible(this.row1, col - 2, this.variant1) : false;\n                    const rightPossible = col < board.cols - 2 ? board.isPossible(this.rowMiddle, col + 1, this.variantMiddle) && board.isPossible(this.row1, col + 2, this.variant1) : false;\n                    if (!leftPossible && !rightPossible) {\n                        board.remove(this.row2, col, this.variant2);\n                        changed2 = true;\n                    }\n                }\n            }\n\n            if (changed2)\n                changed = true;\n        } while (changed2);\n\n        return changed;\n    }\n\n    getType(): HintType {\n        return HintType.Horizontal;\n    }\n}\n\nexport class BetweenHintFactory implements HintFactory {\n    supports(options: BoardOptions): boolean {\n        return options.rows >= 1 && options.cols >= 3;\n    }\n\n    random(board: SingleBoard): BetweenHint {\n        let row1 = _.random(0, board.rows - 1);\n        let rowMiddle = _.random(0, board.rows - 1);\n        let colMiddle = _.random(1, board.cols - 2);\n        let row2 = _.random(0, board.rows - 1);\n        let colDelta = _.random(0, 1) == 1 ? 1 : -1;\n        let col1 = colMiddle + colDelta;\n        let col2 = colMiddle - colDelta;\n        return new BetweenHint(row1, board.get(row1, col1), rowMiddle, board.get(rowMiddle, colMiddle), row2, board.get(row2, col2));\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/puzzle/hint/BetweenHint.ts","module.exports = __webpack_public_path__ + \"icons/original/small/small-d3.402ab38c15f0b6e6d5bf8c21c1966cac.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/small/small-d3.png\n// module id = Dvz/\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/small/small-e3.158bc24007fc557a4756dcaaf638f81c.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/small/small-e3.png\n// module id = E9CV\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/tile.3631d1df5b147c00992f293ab1246a12.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/tile.png\n// module id = FslU\n// module chunks = app","import {SingleBoard} from \"../board/SingleBoard\";\nimport {Hint} from \"../hint/Hint\";\nimport {Difficulty, PuzzleOptions} from \"../Puzzle\";\nimport {HintsGenerator} from \"./HintsGenerator\";\n\nexport class DifficultyHintsGenerator implements HintsGenerator {\n    constructor(private generators: Record<Difficulty, HintsGenerator>) {\n\n    }\n\n    supports(options: PuzzleOptions): boolean {\n        return this.generators[options.difficulty].supports(options);\n    }\n\n    generate(options: PuzzleOptions, board: SingleBoard): Promise<Hint[]> {\n        return this.generators[options.difficulty].generate(options, board);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/puzzle/generate/DifficultyHintsGenerator.ts","import * as _ from \"lodash\";\nimport {PuzzleOptions} from \"../puzzle/Puzzle\";\nimport {db} from \"./db\";\n\nexport interface ConfigItem {\n    key: string;\n    value: any;\n}\n\nexport interface Config {\n    options?: PuzzleOptions;\n    name?: string;\n}\n\nexport namespace Config {\n    export function getKey<K extends keyof Config>(key: K): Promise<Config[K] | undefined> {\n        return db.config.get(key, configItem => configItem !== undefined ? configItem.value : undefined);\n    }\n\n    export function get(): Promise<Config> {\n        return db.config.toArray(configItems =>\n            _.fromPairs(_.map(configItems, configItem => [configItem.key, configItem.value]))\n        );\n    }\n\n    export function setKey<K extends keyof Config>(key: K, value: Config[K]): Promise<string> {\n        return db.config.put({\n            key: key,\n            value: value\n        });\n    }\n\n    export function set(newConfig: Partial<Config>): Promise<string> {\n        return db.config.bulkPut(_.map(_.toPairs(newConfig), pair => ({key: pair[0], value: pair[1]})));\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/storage/Config.ts","module.exports = __webpack_public_path__ + \"icons/original/small/small-f3.5b7ae0c2d05c4e28148dc866a5094d67.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/small/small-f3.png\n// module id = Hoba\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/small/small-a4.0ef2cddeeac6822a557e42295feb1e3c.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/small/small-a4.png\n// module id = Htyr\n// module chunks = app","import * as _ from \"lodash\";\nimport {BoardOptions} from \"../board/Board\";\nimport {MultiBoard} from \"../board/MultiBoard\";\nimport {SingleBoard} from \"../board/SingleBoard\";\nimport {Hint, HintFactory, HintType} from \"./Hint\";\n\nexport class OpenHint implements Hint {\n    constructor(public row: number, public col: number, public variant: number) {\n\n    }\n\n    applyTo(board: MultiBoard): boolean {\n        if (!board.isSingle(this.row, this.col)) {\n            board.set(this.row, this.col, this.variant);\n            return true;\n        }\n        else\n            return false;\n    }\n\n    getType(): HintType {\n        return HintType.Start;\n    }\n}\n\nexport class OpenHintFactory implements HintFactory {\n    supports(options: BoardOptions): boolean {\n        return options.rows >= 1 && options.cols >= 1;\n    }\n\n    random(board: SingleBoard): OpenHint {\n        let row = _.random(0, board.rows - 1);\n        let col = _.random(0, board.cols - 1);\n        return new OpenHint(row, col, board.get(row, col));\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/puzzle/hint/OpenHint.ts","export function median(arr: number[]): number {\n    let n = arr.length;\n    if (n % 2 === 0)\n        return (arr[n / 2 - 1] + arr[n / 2]) / 2;\n    else\n        return arr[(n - 1) / 2];\n}\n\n// Tukey's hinges (include median) - https://en.wikipedia.org/wiki/Quartile#Method_2\nexport function lowerQuartile(arr: number[]): number {\n    let n = arr.length;\n    let end = n % 2 === 0 ? n / 2 : (n + 1) / 2;\n    return median(arr.slice(0, end));\n}\n\nexport function upperQuartile(arr: number[]): number {\n    let n = arr.length;\n    let start = n % 2 === 0 ? n / 2 : (n - 1) / 2;\n    return median(arr.slice(start));\n}\n\n\n// WEBPACK FOOTER //\n// ./src/math/sortedStatistics.ts","module.exports = __webpack_public_path__ + \"icons/original/hint-between.4800cdbe6818a1ee91adb4003d1dc435.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/hint-between.png\n// module id = IJZH\n// module chunks = app","import * as _ from \"lodash\";\nimport {Component, h} from \"preact\";\nimport \"./highscore.less\";\nimport \"./spinner.less\";\nimport {Counts} from \"../storage/Counts\";\nimport {Times, TimesItem} from \"../storage/Times\";\nimport {PuzzleOptions} from \"../puzzle/Puzzle\";\nimport {formatDuration} from \"../time\";\nimport {formatOptions} from \"./PuzzleOptionsUtils\";\nimport * as statistics from \"../math/statistics\";\nimport * as sortedStatistics from \"../math/sortedStatistics\";\n\ninterface HighscoreItemProps {\n    i: number;\n    item: TimesItem;\n}\n\nclass HighscoreItemComponent extends Component<HighscoreItemProps, {}> {\n    render(props: HighscoreItemProps) {\n        return (\n            <tr>\n                <td class=\"highscore-i\">{`${props.i + 1}.`}</td>\n                <td class=\"highscore-name\" title={props.item.date.toString()}>{props.item.name}</td>\n                <td class=\"highscore-time\">{formatDuration(props.item.time)}</td>\n            </tr>\n        )\n    }\n}\n\n\ninterface HighscoreTableProps {\n    top10?: TimesItem[];\n}\n\nclass HighscoreTableComponent extends Component<HighscoreTableProps, {}> {\n    render(props: HighscoreTableProps) {\n        return (\n            <table class=\"highscore\">\n                <thead>\n                <tr>\n                    <th class=\"highscore-i\">#&nbsp;</th>\n                    <th class=\"highscore-name\">Name</th>\n                    <th class=\"highscore-time\">Time</th>\n                </tr>\n                </thead>\n\n                <tbody>\n                {\n                    props.top10 !== undefined && props.top10.length > 0 ?\n                        _.map(props.top10, (timesItem, i) =>\n                            <HighscoreItemComponent i={i} item={timesItem}/>\n                        ) :\n                        <tr class=\"highscore-text\">\n                            <td colSpan={3}>\n                                {\n                                    props.top10 !== undefined ?\n                                        \"No times\" :\n                                        \"Loading...\"\n                                }\n                            </td>\n                        </tr>\n                }\n                </tbody>\n            </table>\n        );\n    }\n}\n\n\ninterface Stats {\n    count: number;\n    mean: number;\n    stdDev: number;\n    lowerQuartile: number;\n    median: number;\n    upperQuartile: number;\n    max: number;\n}\n\ninterface StatsProps {\n    options: PuzzleOptions;\n    stats?: Stats;\n}\n\ninterface StatsState {\n    counts?: Counts;\n}\n\nclass StatsComponent extends Component<StatsProps, StatsState> {\n    constructor(props: StatsProps) {\n        super();\n        this.state = {\n            counts: undefined\n        };\n        this.fetchCounts(props);\n    }\n\n    componentWillReceiveProps(nextProps: StatsProps) {\n        if (this.props.options !== nextProps.options) {\n            this.fetchCounts(nextProps);\n        }\n    }\n\n    private fetchCounts(props: StatsProps) {\n        Counts.get(props.options).then(countsItem => {\n            this.setState({\n                counts: countsItem\n            });\n        });\n    }\n\n    render(props: StatsProps, state: StatsState) {\n        const stats = props.stats;\n        const counts = state.counts;\n\n        if (stats !== undefined && counts !== undefined) {\n            let total = counts.solved + counts.solvedCheated + counts.over;\n\n            let countWithPercentage = (count) => {\n                let percentage = count / total * 100;\n                return (\n                    <dd>{count} <small class=\"small-number\">({percentage.toFixed(0)}%)</small></dd>\n                );\n            };\n\n            return (\n                <div class=\"stats\">\n                    <dl>\n                        <div>\n                            <dt>Games played</dt>\n                            <dd>{total}</dd>\n                        </div>\n                        <dl>\n                            <div>\n                                <dt>Solved</dt>\n                                {countWithPercentage(counts.solved)}\n                            </div>\n                            <div>\n                                <dt>Solved <small>w/</small> cheats</dt>\n                                {countWithPercentage(counts.solvedCheated)}\n                            </div>\n                            <div>\n                                <dt>Over</dt>\n                                {countWithPercentage(counts.over)}\n                            </div>\n                        </dl>\n\n                        <div>\n                            <dt>Time average</dt>\n                            <dd>{formatDuration(stats.mean)}</dd>\n                        </div>\n                        <dl>\n                            <div>\n                                <dt>Std. dev.</dt>\n                                <dd>{formatDuration(stats.stdDev)}</dd>\n                            </div>\n                        </dl>\n\n                        <div>\n                            <dt>Time quartiles</dt>\n                        </div>\n                        <dl>\n                            <div>\n                                <dt>Lower <small>(25%)</small></dt>\n                                <dd>{formatDuration(stats.lowerQuartile)}</dd>\n                            </div>\n                            <div>\n                                <dt>Median <small>(50%)</small></dt>\n                                <dd>{formatDuration(stats.median)}</dd>\n                            </div>\n                            <div>\n                                <dt>Upper <small>(75%)</small></dt>\n                                <dd>{formatDuration(stats.upperQuartile)}</dd>\n                            </div>\n                            <div>\n                                <dt>Max</dt>\n                                <dd>{formatDuration(stats.max)}</dd>\n                            </div>\n                        </dl>\n                    </dl>\n                </div>\n            );\n        } else\n            return null;\n    }\n}\n\n\nexport interface HighscoreProps {\n    options: PuzzleOptions;\n}\n\ninterface HighscoreState {\n    top10?: TimesItem[];\n    stats?: Stats;\n}\n\nexport class HighscoreComponent extends Component<HighscoreProps, HighscoreState> {\n    constructor(props: HighscoreProps) {\n        super();\n        this.state = {\n            top10: undefined,\n            stats: undefined\n        };\n        this.fetchTimes(props);\n    }\n\n    componentWillReceiveProps(nextProps: HighscoreProps) {\n        if (this.props.options !== nextProps.options) {\n            this.fetchTimes(nextProps);\n        }\n    }\n\n    private static calculateStats(timesItems: TimesItem[]): Stats {\n        let sortedTimes: number[] = _.map(timesItems, \"time\");\n        let mean = statistics.mean(sortedTimes);\n        return {\n            count: sortedTimes.length,\n            mean: mean,\n            stdDev: statistics.stdDev(sortedTimes, mean),\n            lowerQuartile: sortedStatistics.lowerQuartile(sortedTimes),\n            median: sortedStatistics.median(sortedTimes),\n            upperQuartile: sortedStatistics.upperQuartile(sortedTimes),\n            max: _.max(sortedTimes) as number // never undefined because always has times\n        };\n    }\n\n    private fetchTimes(props: HighscoreProps) {\n        Times.getSortedTimes(props.options).then(timesItems => {\n            this.setState({\n                top10: _.take(timesItems, 10),\n                stats: HighscoreComponent.calculateStats(timesItems)\n            });\n        });\n    }\n\n    render(props: HighscoreProps, state: HighscoreState) {\n        return (\n            <div class=\"highscore-outer\">\n                <div class=\"highscore-title\">\n                    {formatOptions(props.options)}\n                </div>\n\n                <HighscoreTableComponent top10={state.top10}/>\n                <hr/>\n                <StatsComponent options={props.options} stats={state.stats}/>\n            </div>\n        );\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/web/HighscoreComponent.tsx","import * as _ from \"lodash\";\nimport {BoardOptions} from \"../board/Board\";\nimport {MultiBoard} from \"../board/MultiBoard\";\nimport {SingleBoard} from \"../board/SingleBoard\";\nimport {Hint, HintFactory, HintType} from \"./Hint\";\n\nexport class SameColumnHint implements Hint {\n    constructor(public row1: number, public variant1: number, public row2: number, public variant2: number) {\n\n    }\n\n    applyTo(board: MultiBoard): boolean {\n        let changed = false;\n\n        for (let col = 0; col < board.cols; col++) {\n            const possible1 = board.isPossible(this.row1, col, this.variant1);\n            const possible2 = board.isPossible(this.row2, col, this.variant2);\n\n            if (!possible1 && possible2) {\n                board.remove(this.row2, col, this.variant2);\n                changed = true;\n            }\n            else if (possible1 && !possible2) {\n                board.remove(this.row1, col, this.variant1);\n                changed = true;\n            }\n        }\n\n        return changed;\n    }\n\n    getType(): HintType {\n        return HintType.Vertical;\n    }\n}\n\nexport class SameColumnHintFactory implements HintFactory {\n    supports(options: BoardOptions): boolean {\n        return options.rows >= 2 && options.cols >= 1;\n    }\n\n    random(board: SingleBoard): SameColumnHint {\n        let col = _.random(0, board.cols - 1);\n        let row1 = _.random(0, board.rows - 1);\n        let row2;\n        do {\n            row2 = _.random(0, board.rows - 1);\n        } while (row2 == row1);\n        return new SameColumnHint(row1, board.get(row1, col), row2, board.get(row2, col));\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/puzzle/hint/SameColumnHint.ts","import * as _ from \"lodash\";\nimport {Hint} from \"../hint/Hint\";\nimport {Board, BoardOptions} from \"./Board\";\nimport {MultiBoard} from \"./MultiBoard\";\n\nexport class SingleBoard extends Board<number> {\n    static random(options: BoardOptions): SingleBoard {\n        return new SingleBoard(_.times(options.rows, row => _.shuffle(_.range(options.cols))), options);\n    }\n\n    getCol(row: number, variant: number): number {\n        for (let col = 0; col < this.cols; col++) {\n            if (this.get(row, col) === variant)\n                return col;\n        }\n        return -1;\n    }\n\n    isSolvable(hints: Hint[]) {\n        let multiBoard = MultiBoard.full(this.options);\n        multiBoard.applyHints(hints);\n        return multiBoard.isSolved(this);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/puzzle/board/SingleBoard.ts","import * as classNames from \"classnames\";\nimport * as _ from \"lodash\";\nimport {Component, h} from \"preact\";\nimport {AdjacentHint} from \"../puzzle/hint/AdjacentHint\";\nimport {BetweenHint} from \"../puzzle/hint/BetweenHint\";\nimport {DirectionHint} from \"../puzzle/hint/DirectionHint\";\nimport {Hint, HintType} from \"../puzzle/hint/Hint\";\nimport {SameColumnHint} from \"../puzzle/hint/SameColumnHint\";\nimport {LongTouchContextMenuHandler} from \"./helper/LongTouchContextMenuHandler\";\nimport \"./hints.less\";\nimport {IconComponent, LargeVariantIconComponent} from \"./IconComponents\";\n\ninterface VisibilityState {\n    visible: boolean;\n}\n\ninterface HintProps {\n    hint: Hint;\n}\n\nclass HintComponent extends Component<HintProps, VisibilityState> {\n    private contextMenuHandler = new LongTouchContextMenuHandler(() => this.onToggle());\n\n    constructor() {\n        super();\n        this.state = {\n            visible: true\n        };\n    }\n\n    componentWillReceiveProps(nextProps: HintProps) {\n        if (this.props.hint !== nextProps.hint) {\n            this.setState({\n                visible: true\n            });\n        }\n    }\n\n    private onToggle = () => {\n        this.setState(state => {\n            return {\n                visible: !state.visible\n            };\n        });\n    };\n\n    private renderTbody(props: HintProps) {\n        let hint = props.hint;\n        if (hint instanceof AdjacentHint) {\n            return (\n                <tbody>\n                    <tr>\n                        <td>\n                            <LargeVariantIconComponent row={hint.row1} variant={hint.variant1}/>\n                        </td>\n                        <td>\n                            <IconComponent name=\"hint-adjacent\"/>\n                        </td>\n                        <td>\n                            <LargeVariantIconComponent row={hint.row2} variant={hint.variant2}/>\n                        </td>\n                    </tr>\n                </tbody>\n            );\n        }\n        else if (hint instanceof BetweenHint) {\n            return (\n                <tbody>\n                    <tr>\n                        <td>\n                            <LargeVariantIconComponent row={hint.row1} variant={hint.variant1}/>\n                        </td>\n                        <td>\n                            <LargeVariantIconComponent row={hint.rowMiddle} variant={hint.variantMiddle}/>\n                            <div class=\"hint-between\">\n                                <IconComponent name=\"hint-between\"/>\n                            </div>\n                        </td>\n                        <td>\n                            <LargeVariantIconComponent row={hint.row2} variant={hint.variant2}/>\n                        </td>\n                    </tr>\n                </tbody>\n            );\n        }\n        else if (hint instanceof DirectionHint) {\n            return (\n                <tbody>\n                    <tr>\n                        <td>\n                            <LargeVariantIconComponent row={hint.rowLeft} variant={hint.variantLeft}/>\n                        </td>\n                        <td>\n                            <IconComponent name=\"hint-direction\"/>\n                        </td>\n                        <td>\n                            <LargeVariantIconComponent row={hint.rowRight} variant={hint.variantRight}/>\n                        </td>\n                    </tr>\n                </tbody>\n            );\n        }\n        else if (hint instanceof SameColumnHint) {\n            return (\n                <tbody>\n                    <tr>\n                        <td>\n                            <LargeVariantIconComponent row={hint.row1} variant={hint.variant1}/>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td>\n                            <LargeVariantIconComponent row={hint.row2} variant={hint.variant2}/>\n                        </td>\n                    </tr>\n                </tbody>\n            );\n        }\n        else\n            throw new Error(\"Unsupported hint type\");\n    }\n\n    render(props: HintProps, state: VisibilityState) {\n        return (\n            <div class={classNames({\n                \"hint-outer\": true,\n                \"hint-visible\": state.visible,\n                \"hint-hidden\": !state.visible\n            })} {...this.contextMenuHandler}>\n                <table class=\"hint\">\n                    {this.renderTbody(props)}\n                </table>\n            </div>\n        );\n    }\n}\n\nexport interface HintsProps {\n    hints: Hint[];\n}\n\nexport class HintsComponent extends Component<HintsProps, VisibilityState> {\n    constructor() {\n        super();\n        this.state = {\n            visible: true\n        };\n    }\n\n    componentWillReceiveProps(nextProps: HintsProps) {\n        if (this.props.hints !== nextProps.hints) {\n            this.setState({\n                visible: true\n            });\n        }\n    }\n\n    private onToggle = (e) => {\n        this.setState(state => {\n            return {\n                visible: !state.visible\n            };\n        });\n    };\n\n    render(props: HintsProps, state: VisibilityState) {\n        return (\n            <div class=\"hints\">\n                <button class=\"button-toggle\" onClick={this.onToggle}>Toggle</button>\n                <div class={classNames({\n                    \"hints-horizontal\": true,\n                    \"hints-visible\": state.visible,\n                    \"hints-hidden\": !state.visible\n                })}>\n                    {_.map(_.filter(props.hints, hint => hint.getType() === HintType.Horizontal), hint =>\n                        <HintComponent hint={hint}/>\n                    )}\n                    {/*<div class=\"hints-vertical\">*/}\n                        {_.map(_.filter(props.hints, hint => hint.getType() === HintType.Vertical), hint =>\n                            <HintComponent hint={hint}/>\n                        )}\n                    {/*</div>*/}\n                </div>\n            </div>\n        );\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/web/HintsComponent.tsx","export function isWasmSupported(): boolean {\n    // https://stackoverflow.com/a/47880734/854540\n    // TODO more thorough check\n    return typeof WebAssembly === \"object\";\n}\n\n\n// WEBPACK FOOTER //\n// ./src/wasm.ts","module.exports = __webpack_public_path__ + \"icons/original/small/small-f5.72cc42d0d642b89a43f7d5dae38777d0.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/small/small-f5.png\n// module id = MjYr\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/large/large-a6.4ac50d73cecffe7683129cb537280e02.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/large/large-a6.png\n// module id = N7YA\n// module chunks = app","import * as _ from \"lodash\";\nimport {getZ3, Z3} from \"../../z3/Z3\";\nimport {SingleBoard} from \"../board/SingleBoard\";\nimport {AdjacentHint} from \"../hint/AdjacentHint\";\nimport {BetweenHint} from \"../hint/BetweenHint\";\nimport {DirectionHint} from \"../hint/DirectionHint\";\nimport {Hint, HintFactory} from \"../hint/Hint\";\nimport {OpenHint} from \"../hint/OpenHint\";\nimport {SameColumnHint} from \"../hint/SameColumnHint\";\nimport {PuzzleOptions} from \"../Puzzle\";\nimport {RandomHintFactory} from \"../RandomHint\";\nimport {HintsGenerator} from \"./HintsGenerator\";\n\nexport class Z3HintsGenerator implements HintsGenerator {\n\n    private static hintFactory: HintFactory = new RandomHintFactory();\n\n    private z3: Z3;\n    private ctx;\n\n    supports(options: PuzzleOptions): boolean {\n        return Z3HintsGenerator.hintFactory.supports(options);\n    }\n\n    async generate(options: PuzzleOptions, board: SingleBoard): Promise<Hint[]> {\n        console.debug(\"getZ3\");\n        this.z3 = await getZ3();\n\n        this.makeContext();\n        // this.ask(\"(set-option :produce-unsat-cores true)\"); // TODO: why parser error?\n        this.assertBoard(board);\n\n        let hints = this.generateHints(board);\n        hints = this.pruneHints(board, hints);\n\n        this.deleteContext();\n        return hints;\n    }\n\n    private makeContext() {\n        console.debug(\"makeContext\");\n        this.z3.global_param_set(\"unsat_core\", \"true\");\n        this.z3.global_param_set(\"smt.core.minimize\", \"true\");\n\n        let cfg = this.z3.mk_config();\n        this.ctx = this.z3.mk_context(cfg);\n        this.z3.set_error_handler(this.ctx, this.z3.errorHandler);\n        this.z3.del_config(cfg);\n    }\n\n    private ask(smtlib2: string): string {\n        // console.debug(smtlib2);\n        return this.z3.eval_smtlib2_string(this.ctx, smtlib2).trim();\n    }\n\n    private deleteContext() {\n        console.debug(\"deleteContext\");\n        this.z3.del_context(this.ctx);\n    }\n\n    protected generateHints(board: SingleBoard): Hint[] {\n        let hints: Hint[] = [];\n        while (!this.isUniqueSolvable()) {\n            let hint = Z3HintsGenerator.hintFactory.random(board);\n            hints.push(hint);\n\n            let i = hints.length - 1;\n            let constraint = Z3HintsGenerator.getHintConstraint(hint);\n            this.ask(`(assert (! ${constraint} :named h${i}))`);\n        }\n        return hints;\n    }\n\n    protected pruneHints(board: SingleBoard, hints: Hint[]): Hint[] {\n        console.debug(`Before pruneHints: ${hints.length}`);\n\n        let getUnsatCore = this.ask(\"(get-unsat-core)\");\n        console.debug(getUnsatCore);\n        let coreIs = _.map(getUnsatCore.match(/\\d+/g), i => parseInt(i));\n        hints = _.filter(hints, (hint, i) => _.includes(coreIs, i));\n\n        console.debug(`After pruneHints: ${hints.length}`);\n        return hints;\n    }\n\n    private isUniqueSolvable() {\n        let checkSat = this.ask(\"(check-sat)\");\n        let unique = checkSat == \"unsat\";\n        return unique;\n    }\n\n    private assertBoard(board: SingleBoard) {\n        console.debug(\"assertBoard\");\n        for (let row = 0; row < board.rows; row++) {\n            let xs = \"\";\n            for (let variant = 0; variant < board.variants; variant++) {\n                let x = `x${row}${variant}`;\n                this.ask(`(declare-const ${x} Int)`);\n                this.ask(`(assert (and (<= 0 ${x}) (< ${x} ${board.cols})))`);\n                xs += \" \" + x;\n            }\n\n            this.ask(`(assert (distinct${xs}))`);\n        }\n\n        let ds = \"\";\n        for (let row = 0; row < board.rows; row++) {\n            for (let col = 0; col < board.cols; col++) {\n                let variant = board.get(row, col);\n                let x = `x${row}${variant}`;\n                ds += ` (distinct ${x} ${col})`;\n            }\n        }\n        this.ask(`(assert (or${ds}))`);\n    }\n\n    private static getHintConstraint(hint: Hint): string {\n        if (hint instanceof AdjacentHint) {\n            let x1 = `x${hint.row1}${hint.variant1}`;\n            let x2 = `x${hint.row2}${hint.variant2}`;\n            return `(or (= ${x1} (+ ${x2} 1)) (= ${x1} (- ${x2} 1)))`;\n        }\n        else if (hint instanceof BetweenHint) {\n            let x1 = `x${hint.row1}${hint.variant1}`;\n            let xMiddle = `x${hint.rowMiddle}${hint.variantMiddle}`;\n            let x2 = `x${hint.row2}${hint.variant2}`;\n            return `(or (and (= ${xMiddle} (+ ${x1} 1)) (= ${xMiddle} (- ${x2} 1))) (and (= ${xMiddle} (+ ${x2} 1)) (= ${xMiddle} (- ${x1} 1))))`;\n        }\n        else if (hint instanceof DirectionHint) {\n            let xLeft = `x${hint.rowLeft}${hint.variantLeft}`;\n            let xRight = `x${hint.rowRight}${hint.variantRight}`;\n            return `(< ${xLeft} ${xRight})`;\n        }\n        else if (hint instanceof OpenHint) {\n            let x = `x${hint.row}${hint.variant}`;\n            return `(= ${x} ${hint.col})`;\n        }\n        else if (hint instanceof SameColumnHint) {\n            let x1 = `x${hint.row1}${hint.variant1}`;\n            let x2 = `x${hint.row2}${hint.variant2}`;\n            return `(= ${x1} ${x2})`;\n        }\n        else\n            throw new Error(\"Unsupported hint type\");\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/puzzle/generate/Z3HintsGenerator.ts","module.exports = __webpack_public_path__ + \"icons/original/large/large-a2.b09094efecdd9eb43f5c9d816a1fe4e3.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/large/large-a2.png\n// module id = NhLW\n// module chunks = app","import {Component, h} from \"preact\";\nimport \"./icons.less\";\n\n// https://webpack.js.org/guides/dependency-management/#context-module-api\nlet cache = {};\n\nfunction importAll (r) {\n    r.keys().forEach(key => cache[key] = r(key));\n}\n\nimportAll(require.context('./', true, /\\.png$/));\n\n\nexport interface IconProps {\n    name: string;\n}\n\nexport class IconComponent extends Component<IconProps, any> {\n    render(props: IconProps) {\n        return (\n            <img class=\"icon\" src={cache[`./icons/original/${props.name}.png`]}/>\n        );\n    }\n}\n\nexport interface VariantIconProps {\n    row: number;\n    variant: number;\n}\n\nexport class LargeVariantIconComponent extends Component<VariantIconProps, any> {\n    render(props: VariantIconProps) {\n        return (\n            <IconComponent name={`large/large-${(props.row + 10).toString(16)}${props.variant + 1}`}/>\n        );\n    }\n}\n\nexport class SmallVariantIconComponent extends Component<VariantIconProps, any> {\n    render(props: VariantIconProps) {\n        return (\n            <IconComponent name={`small/small-${(props.row + 10).toString(16)}${props.variant + 1}`}/>\n        );\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/web/IconComponents.tsx","export type Supplier<T> = () => T;\n\nexport function memoizeSupplier<T>(supplier: Supplier<T>): Supplier<T> {\n    let p: T | null = null;\n\n    return () => p === null ? (p = supplier()) : p;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/function.ts","module.exports = __webpack_public_path__ + \"icons/original/hint-direction.2a6b9db9707be05efc146cbd8e571e2b.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/hint-direction.png\n// module id = Op0r\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/small/small-e5.46811d66ca231366ab2e44b4de32bee7.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/small/small-e5.png\n// module id = P2+R\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/large/large-d3.87d7030770383023603c79700050ee58.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/large/large-d3.png\n// module id = PWPq\n// module chunks = app","import {SingleBoard} from \"../board/SingleBoard\";\nimport {Hint} from \"../hint/Hint\";\nimport {SolvableHintsGenerator} from \"./HintsGenerator\";\n\nexport class ApplyHintsGenerator extends SolvableHintsGenerator {\n    isSolvable(board: SingleBoard, hints: Hint[]): boolean {\n        return board.isSolvable(hints);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/puzzle/generate/ApplyHintsGenerator.ts","module.exports = __webpack_public_path__ + \"icons/original/large/large-a1.d73d5dfe6e49493fa72128c7d36eca4e.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/large/large-a1.png\n// module id = QP0S\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/small/small-f6.2f7d8a98586b23b3f348bef4350bf4f7.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/small/small-f6.png\n// module id = QfaF\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/hint-adjacent.7b5864dbf0656526063d96f271c1e5fc.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/hint-adjacent.png\n// module id = Qj03\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/small/small-b3.65f5bcb765e8dc6f37ec5174e112cea4.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/small/small-b3.png\n// module id = RUP8\n// module chunks = app","import * as _ from \"lodash\";\nimport {SingleBoard} from \"../board/SingleBoard\";\nimport {Hint, HintFactory} from \"../hint/Hint\";\nimport {PuzzleOptions} from \"../Puzzle\";\nimport {RandomHintFactory} from \"../RandomHint\";\n\nexport interface HintsGenerator {\n    supports(options: PuzzleOptions): boolean;\n    generate(options: PuzzleOptions, board: SingleBoard): Promise<Hint[]>;\n}\n\nexport abstract class DelegateHintsGenerator implements HintsGenerator {\n    constructor(protected delegate: HintsGenerator) {\n\n    }\n\n    supports(options: PuzzleOptions): boolean {\n        return this.delegate.supports(options);\n    }\n\n    abstract generate(options: PuzzleOptions, board: SingleBoard): Promise<Hint[]>;\n}\n\nexport abstract class SolvableHintsGenerator implements HintsGenerator {\n\n    protected static hintFactory: HintFactory = new RandomHintFactory();\n\n    supports(options: PuzzleOptions): boolean {\n        return SolvableHintsGenerator.hintFactory.supports(options);\n    }\n\n    async generate(options: PuzzleOptions, board: SingleBoard): Promise<Hint[]> {\n        let hints = this.generateHints(board);\n        return this.pruneHints(board, hints);\n    }\n\n    abstract isSolvable(board: SingleBoard, hints: Hint[]): boolean;\n\n    protected generateHints(board: SingleBoard): Hint[] {\n        let hints: Hint[] = [];\n        while (!this.isSolvable(board, hints)) {\n            let hint = SolvableHintsGenerator.hintFactory.random(board);\n            hints.push(hint);\n        }\n        return hints;\n    }\n\n    protected pruneHints(board: SingleBoard, hints: Hint[]): Hint[] {\n        hints = _.clone(hints);\n        console.debug(`Before pruneHints: ${hints.length}`);\n        for (let i = 0; i < hints.length;) { // no i++\n            let hint = hints.splice(i, 1)[0];\n            if (this.isSolvable(board, hints)) {\n                // keep i which now points to next hint\n            }\n            else {\n                hints.splice(i, 0, hint);\n                i++;\n            }\n        }\n        console.debug(`After pruneHints: ${hints.length}`);\n        return hints;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/puzzle/generate/HintsGenerator.ts","module.exports = __webpack_public_path__ + \"icons/original/large/large-e4.07420566e5a63e3313fa48704100c22f.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/large/large-e4.png\n// module id = SAo3\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/small/small-e1.abbe71866b879431f7d1ec2f736260f3.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/small/small-e1.png\n// module id = SCQN\n// module chunks = app","import * as classNames from \"classnames\";\nimport Dexie from \"dexie\";\nimport * as _ from \"lodash\";\nimport * as Package from \"package.json\";\nimport {Component, h} from \"preact\";\nimport {Puzzle, PuzzleOptions} from \"../puzzle/Puzzle\";\nimport {mainPuzzleGenerator, PuzzleGenerator} from \"../puzzle/PuzzleGenerator\";\nimport {Config} from \"../storage/Config\";\nimport {Counts} from \"../storage/Counts\";\nimport {db} from \"../storage/db\";\nimport {Times} from \"../storage/Times\";\nimport {formatDuration} from \"../time\";\nimport {Timer} from \"../Timer\";\nimport \"./app.less\";\nimport {HighscoreComponent} from \"./HighscoreComponent\";\nimport {HintsComponent} from \"./HintsComponent\";\nimport {MultiBoardComponent} from \"./MultiBoardComponent\";\nimport {formatOptions} from \"./PuzzleOptionsUtils\";\nimport {TimerComponent} from \"./TimerComponent\";\nimport {VisibilityChangeListener} from \"./helper/VisibilityChangeListener\";\nimport {MessageUnloadListener} from \"./helper/MessageUnloadListener\";\nimport {BirthdayComponent} from \"./BirthdayComponent\";\nimport {OptionsComponent} from \"./OptionsComponent\";\n\nexport enum GameState {\n    Options,\n    Highscore,\n    Generating,\n    Playing,\n    ManualPaused,\n    AutoPaused,\n    Solved,\n    Over,\n}\n\ninterface AppState {\n    options: PuzzleOptions;\n    puzzle?: Puzzle;\n    gameState: GameState;\n    cheated: number;\n    canCheat?: boolean;\n}\n\nexport class AppComponent extends Component<{}, AppState> {\n    private timer = new Timer();\n    private visibilityChange: VisibilityChangeListener;\n    private messageUnload: MessageUnloadListener;\n    private puzzleGenerator: PuzzleGenerator = mainPuzzleGenerator;\n\n    private static readonly defaultOptions: PuzzleOptions = {\n        rows: 6,\n        cols: 6,\n        extraHintsPercent: 0,\n        difficulty: \"normal\"\n    };\n\n    constructor() {\n        super();\n        this.state = {\n            options: AppComponent.defaultOptions,\n            puzzle: undefined,\n            gameState: GameState.Options,\n            cheated: 0,\n            canCheat: undefined\n        };\n        this.visibilityChange = new VisibilityChangeListener(this.onVisibilityChange);\n        this.messageUnload = new MessageUnloadListener(this.onMessageUnload);\n\n        Config.getKey(\"options\").then(options => {\n            if (options !== undefined) {\n                this.setState({\n                    options: options\n                });\n            }\n        });\n    }\n\n    componentDidMount() {\n        this.visibilityChange.add();\n        this.messageUnload.add();\n    }\n\n    componentWillUnmount() {\n        this.visibilityChange.remove();\n        this.messageUnload.remove();\n    }\n\n    private onClickNewGame = (e) => {\n        this.setState({\n            gameState: GameState.Options,\n            cheated: 0\n        });\n        this.timer.reset();\n    };\n\n    private onClickPause = (e) => {\n        if (this.state.gameState === GameState.Playing) {\n            this.timer.pause();\n            this.setState(state => _.merge(state, {\n                gameState: GameState.ManualPaused\n            }));\n        }\n    };\n\n    private onClickResume = (e) => {\n        if (this.state.gameState === GameState.ManualPaused || this.state.gameState === GameState.AutoPaused) {\n            this.timer.start();\n            this.setState(state => _.merge(state, {\n                gameState: GameState.Playing\n            }));\n        }\n    };\n\n    private onClickCheat = (e) => {\n        if (this.state.gameState === GameState.Playing) {\n            this.setState((state: AppState) => {\n                let changed = state.puzzle!.applySingleHint();\n                return _.merge(state, {\n                    cheated: state.cheated + (changed ? 1 : 0)\n                });\n            }, this.refresh);\n        }\n    };\n\n    private onVisibilityChange = visible => {\n        if (visible && this.state.gameState === GameState.AutoPaused) {\n            this.timer.start();\n            this.setState(state => _.merge(state, {\n                gameState: GameState.Playing\n            }));\n        }\n        else if (!visible && this.state.gameState === GameState.Playing) {\n            this.timer.pause();\n            this.setState(state => _.merge(state, {\n                gameState: GameState.AutoPaused\n            }));\n        }\n    };\n\n    private onMessageUnload = () => {\n        switch (this.state.gameState) {\n            case GameState.Playing:\n            case GameState.ManualPaused:\n            case GameState.AutoPaused:\n                return \"Are you sure you want to leave while the game is in progress?\";\n\n            default:\n                return null;\n        }\n    };\n\n    private submitOptions = (options: PuzzleOptions) => {\n        this.configOptions(options);\n        this.setState({\n            gameState: GameState.Generating\n        }, () => {\n            // this.forceUpdate(); // seems to make no difference\n\n            requestAnimationFrame(time => { // request repaint, callback runs BEFORE\n                setTimeout(async () => {\n                    try {\n                        let puzzle = await this.puzzleGenerator.generate(options);\n                        this.setState({\n                            puzzle: puzzle,\n                            gameState: GameState.Playing,\n                            cheated: 0,\n                            canCheat: true\n                        }, () => {\n                            this.timer.start();\n                            this.refresh(); // check win in case everything opened on start\n                        });\n                    }\n                    catch (e) {\n                        alert(e);\n                        this.setState({\n                            puzzle: undefined,\n                            gameState: GameState.Options,\n                            cheated: 0,\n                            canCheat: undefined\n                        });\n                    }\n                }, 0); // timeout to start generation AFTER repaint (hopefully)\n            });\n        });\n    };\n\n    private highscoreOptions = (options: PuzzleOptions) => {\n        this.configOptions(options);\n        this.setState({\n            gameState: GameState.Highscore\n        });\n    };\n\n    private configOptions(options: PuzzleOptions) {\n        this.setState({\n            options: options\n        });\n        Config.set({\n            options: options\n        });\n    }\n\n    private refresh = () => {\n        if (this.state.gameState === GameState.Playing) {\n            let puzzle = this.state.puzzle!;\n            if (puzzle.isSolved()) {\n                this.timer.pause();\n                let time = this.timer.getTotalTime();\n                this.setState(state => _.merge(state, {\n                    gameState: GameState.Solved\n                }), () => {\n                    let options = puzzle.options;\n                    let cheated = this.state.cheated;\n                    Counts.increase(options, cheated ? \"solvedCheated\" : \"solved\");\n\n                    let cheatedText = cheated > 0 ? ` by cheating ${cheated} times` : \"\";\n                    alert(`Solved ${formatOptions(options)} in ${formatDuration(time)}${cheatedText}!`);\n\n                    if (!cheated) {\n                        db.transaction(\"rw\", db.times, db.config, () =>\n                            Times.isInTop10(options, time).then<string | undefined>(isInTop10 => {\n                                return Config.getKey(\"name\").then(defaultName => { // TODO: get name only when in top 10\n                                    let name;\n                                    if (isInTop10 !== false &&\n                                        (name = prompt(`Enter name for ${isInTop10 + 1}. place in high scores:`, defaultName)) !== null)\n                                        return name;\n                                    else\n                                        return undefined;\n                                })\n                            }).then(name => {\n                                return Dexie.Promise.all([\n                                    Times.add(options, time, name),\n                                    Config.setKey(\"name\", name)\n                                ]);\n                            })\n                        );\n                    }\n                });\n            }\n            else if (puzzle.isOver()) {\n                this.timer.pause();\n                this.setState(state => _.merge(state, {\n                    gameState: GameState.Over\n                }), () => {\n                    Counts.increase(puzzle.options, \"over\");\n\n                    alert(\"Over!\");\n                });\n            }\n            else {\n                this.setState({\n                    canCheat: puzzle.canApplySingleHint()\n                });\n            }\n        }\n    };\n\n    render(props, state: AppState) {\n        let solvedOrOver = state.gameState === GameState.Solved || state.gameState === GameState.Over;\n        let showBoard = solvedOrOver ? state.puzzle!.singleBoard : undefined;\n        return (\n            <div class={classNames({\n                \"app\": true,\n                \"paused\": state.gameState === GameState.ManualPaused || state.gameState === GameState.AutoPaused,\n                \"solved\": state.gameState === GameState.Solved,\n                \"over\": state.gameState === GameState.Over,\n                \"cheated\": state.cheated > 0\n            })}>\n                <div class=\"app-top\">\n                    <div class=\"header\">\n                        <div class=\"brand\">\n                            <a href=\"http://einstein.sim642.eu\" title={`einstein-js ${Package.version}`}>einstein-js</a> <small>by <a href=\"https://github.com/sim642/einstein-js\">sim642</a></small>\n                        </div>\n\n                        <div class=\"buttons buttons-responsive\">\n                            <button class={classNames({\n                                \"button-highlight\": solvedOrOver || state.gameState === GameState.Highscore\n                            })} disabled={state.gameState === GameState.Generating} onClick={this.onClickNewGame}>New game</button>\n                            <button disabled={!(state.gameState === GameState.Playing && state.canCheat)} onClick={this.onClickCheat}>\n                                Cheat {\n                                    state.cheated > 0 ?\n                                        <span class=\"badge\">{state.cheated}</span> :\n                                        null\n                                }\n                            </button>\n                            {\n                                state.gameState === GameState.ManualPaused || state.gameState === GameState.AutoPaused ?\n                                    <button class=\"button-highlight\" onClick={this.onClickResume}>Resume</button> :\n                                    <button disabled={state.gameState !== GameState.Playing} onClick={this.onClickPause}>Pause</button>\n                            }\n                        </div>\n\n                        <TimerComponent timer={this.timer}/>\n                    </div>\n                    <BirthdayComponent month={10} day={22} name=\"Elisabeth\"/>\n                    {\n                        state.gameState === GameState.Options || state.gameState === GameState.Generating ?\n                            <OptionsComponent options={state.options} submit={this.submitOptions} highscore={this.highscoreOptions} defaultOptions={AppComponent.defaultOptions} puzzleGenerator={this.puzzleGenerator} generating={state.gameState === GameState.Generating}/> :\n                            state.gameState === GameState.Highscore ?\n                                <HighscoreComponent options={state.options}/> :\n                                <MultiBoardComponent board={state.puzzle!.multiBoard} refresh={this.refresh} showBoard={showBoard}/>\n                    }\n                </div>\n                {\n                    state.gameState !== GameState.Options && state.gameState !== GameState.Highscore && state.gameState !== GameState.Generating ?\n                        <HintsComponent hints={state.puzzle!.hints}/> :\n                        null\n                }\n            </div>\n        );\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/web/AppComponent.tsx","import * as _ from \"lodash\";\nimport {AbstractDistribution} from \"./AbstractDistribution\";\n\nexport type NumericPair<T> = [T, number];\nexport type NumericPairs<T> = NumericPair<T>[];\n\nexport class PairsDistribution<T> extends AbstractDistribution<T> {\n    constructor(private readonly pairs: NumericPairs<T>) {\n        super();\n    }\n\n    private find(value: T): NumericPair<T> | undefined {\n        return PairsDistribution.find(this.pairs, value);\n    }\n\n    get(value: T): number | undefined {\n        const pair = this.find(value);\n        return pair !== undefined ? pair[1] : undefined;\n    }\n\n    get n(): number {\n        return _.sumBy(this.pairs, pair => pair[1]);\n    }\n\n    get classes(): number {\n        return this.pairs.length;\n    }\n\n    mapFreqs(f: (freq: number, value: T) => number): PairsDistribution<T> {\n        return new PairsDistribution(this.map((freq, value) => [value, f(freq, value)]) as NumericPairs<T>);\n    }\n\n    map<U>(f: (freq: number, value: T) => U): U[] {\n        return _.map(this.pairs, ([value, freq]) => f(freq, value));\n    }\n\n    filter(p: (freq: number, value: T) => boolean): PairsDistribution<T> {\n        return new PairsDistribution<T>(_.filter(this.pairs, ([value, freq]) => p(freq, value)));\n    }\n\n    private static find<T>(pairs: NumericPairs<T>, value: T): NumericPair<T> | undefined {\n        return _.find(pairs, pair => pair[0] === value);\n    }\n\n    static monteCarlo<T>(n: number, generator: () => T): PairsDistribution<T> {\n        let observed: NumericPairs<T> = [];\n        for (let i = 0; i < n; i++) {\n            let value = generator();\n            let pair = PairsDistribution.find(observed, value);\n            if (pair === undefined) {\n                pair = [value, 0];\n                observed.push(pair);\n            }\n            pair[1]++;\n        }\n        return new PairsDistribution<T>(observed);\n    }\n\n    protected toPairs(): NumericPairs<T> {\n        return this.pairs;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/math/PairsDistribution.ts","module.exports = __webpack_public_path__ + \"icons/original/large/large-a5.e5df7839ecedea6b66da59aa3ece9ba8.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/large/large-a5.png\n// module id = TeOI\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/large/large-b1.67391202fba98a1797a9c666a9f2d723.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/large/large-b1.png\n// module id = UBU4\n// module chunks = app","import * as _ from \"lodash\";\nimport {BoardOptions} from \"../board/Board\";\nimport {MultiBoard} from \"../board/MultiBoard\";\nimport {SingleBoard} from \"../board/SingleBoard\";\nimport {Hint, HintFactory, HintType} from \"./Hint\";\n\nexport class DirectionHint implements Hint {\n    constructor(public rowLeft: number, public variantLeft: number, public rowRight: number, public variantRight: number) {\n\n    }\n\n    applyTo(board: MultiBoard): boolean {\n        let changed = false;\n\n        for (let col = 0; col < board.cols; col++) {\n            if (board.isPossible(this.rowRight, col, this.variantRight)) {\n                board.remove(this.rowRight, col, this.variantRight);\n                changed = true;\n            }\n            if (board.isPossible(this.rowLeft, col, this.variantLeft))\n                break;\n        }\n\n        for (let col = board.cols - 1; col >= 0; col--) {\n            if (board.isPossible(this.rowLeft, col, this.variantLeft)) {\n                board.remove(this.rowLeft, col, this.variantLeft);\n                changed = true;\n            }\n            if (board.isPossible(this.rowRight, col, this.variantRight))\n                break;\n        }\n\n        return changed;\n    }\n\n    getType(): HintType {\n        return HintType.Horizontal;\n    }\n}\n\nexport class DirectionHintFactory implements HintFactory {\n    supports(options: BoardOptions): boolean {\n        return options.rows >= 1 && options.cols >= 2;\n    }\n\n    random(board: SingleBoard): DirectionHint {\n        let rowLeft = _.random(0, board.rows - 1);\n        let colLeft = _.random(0, board.cols - 2);\n        let rowRight = _.random(0, board.rows - 1);\n        let colRight = _.random(colLeft + 1, board.cols - 1);\n        return new DirectionHint(rowLeft, board.get(rowLeft, colLeft), rowRight, board.get(rowRight, colRight));\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/puzzle/hint/DirectionHint.ts","module.exports = __webpack_public_path__ + \"icons/original/large/large-c3.82043ba3661fa5a9afc87cf0c1d9f917.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/large/large-c3.png\n// module id = XjqR\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/small/small-e4.967aa445a182fda8b3261d4612d3a3fc.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/small/small-e4.png\n// module id = XnXw\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/large/large-e6.60a05543c24485dc78b1cb4f47c306be.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/large/large-e6.png\n// module id = YFuY\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/large/large-b5.746416be364e3c33aacd6055c476fbc5.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/large/large-b5.png\n// module id = YKaq\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/small/small-b6.0b3f448c498b70903671a4bc69efde0d.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/small/small-b6.png\n// module id = Z31m\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/large/large-f1.2d3e9386d0328114e71184f6946f14b6.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/large/large-f1.png\n// module id = ZNit\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/large/large-e1.b1cd43842afa4b29b592e9ac499769ca.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/large/large-e1.png\n// module id = ZvN9\n// module chunks = app","import * as Z3Em from \"z3em\";\nimport * as z3emWasm from \"z3em/z3em.wasm\";\nimport {memoizeSupplier} from \"../function\";\nimport {Wasm} from \"../storage/Wasm\";\nimport {isWasmSupported} from \"../wasm\";\n\nclass ResolveWrapper<T> {\n    constructor(public value: T) {\n\n    }\n}\n\nfunction createZ3Em(z3emOptions): Promise<ResolveWrapper<Z3Em>> {\n    return new Promise((resolve, reject) => {\n        const z3em = Z3Em({\n            ...z3emOptions,\n            onRuntimeInitialized: () => {\n                resolve(new ResolveWrapper(z3em)); // TODO: unwrapped return freezes browser, WTF?\n            }\n            // TODO: handle failed\n        });\n    });\n}\n\n// for caching WASM in Chrome: chrome://flags/#enable-webassembly\n\nexport const getZ3 = memoizeSupplier(() => {\n    if (isWasmSupported()) {\n        return Wasm.getCached(z3emWasm).then(module => {\n            let z3emOptions;\n            if (module !== undefined) {\n                z3emOptions = {\n                    instantiateWasm: (importObject, receiveInstance) => {\n                        console.debug(\"instantiateWasm\");\n                        WebAssembly.instantiate(module, importObject).then(instance =>\n                            receiveInstance(instance, module)\n                        );\n                        return {}; // instantiateWasm is async\n                    }\n                };\n            }\n            else {\n                z3emOptions = {\n                    locateFile: () => z3emWasm,\n                    onReceiveInstance: (instance, module) => {\n                        console.debug(\"onReceiveInstance\");\n                        Wasm.cache(z3emWasm, module);\n                    }\n                };\n            }\n\n            console.debug(\"Z3 arming...\");\n            return createZ3Em(z3emOptions).then(resolveWrapper => {\n                let z3em = resolveWrapper.value;\n\n                const z3 = new Z3(z3em);\n                console.log(\"Z3 armed\");\n                return z3;\n            });\n        });\n    }\n    else {\n        return Promise.reject(new Error(\"WebAssembly not supported\"));\n    }\n});\n\nexport class Z3 {\n    constructor(private z3em) {\n\n    }\n\n    errorHandler = this.z3em.addFunction(function (ctx, e) {\n        console.error(`Z3 (${ctx}): ${e}`);\n    }, \"vii\");\n\n    mk_config = this.z3em.cwrap(\"Z3_mk_config\", \"number\", []);\n    mk_context = this.z3em.cwrap(\"Z3_mk_context\", \"number\", [\"number\"]);\n    del_config = this.z3em.cwrap(\"Z3_del_config\", null, [\"number\"]);\n    del_context = this.z3em.cwrap(\"Z3_del_context\", null, [\"number\"]);\n    eval_smtlib2_string = this.z3em.cwrap(\"Z3_eval_smtlib2_string\", \"string\", [\"number\", \"string\"]);\n    global_param_set = this.z3em.cwrap(\"Z3_global_param_set\", null, [\"string\", \"string\"]);\n    set_error_handler = this.z3em.cwrap(\"Z3_set_error_handler\", null, [\"number\", \"number\"]);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/z3/Z3.ts","import * as _ from \"lodash\";\nimport {Component, h} from \"preact\";\nimport \"./options.less\";\nimport {PuzzleOptions} from \"../puzzle/Puzzle\";\nimport {PuzzleGenerator} from \"../puzzle/PuzzleGenerator\";\nimport {Config} from \"../storage/Config\";\nimport {Counts, CountsItem} from \"../storage/Counts\";\nimport {Times} from \"../storage/Times\";\nimport {formatOptions} from \"./PuzzleOptionsUtils\";\n\ninterface RangeProps {\n    value: number;\n    min: number;\n    max: number;\n    step?: number;\n    onChange: (value: number) => void;\n    id?: string;\n    unit?: string;\n}\n\nclass InputRangeComponent extends Component<RangeProps, {}> {\n    private onChange = (e) => {\n        e.preventDefault();\n\n        let value = parseInt(e.target.value);\n        this.props.onChange(value);\n    };\n\n    render(props: RangeProps) {\n        let listId = `${props.id}-list`;\n        return (\n            <span class=\"input input-range\">\n                <input type=\"range\" {...props} value={props.value.toString()} list={listId} onChange={this.onChange} onInput={this.onChange}/>\n                <output for={props.id}>{props.value}{props.unit}</output>\n\n                <datalist id={listId}>\n                    {_.map(_.range(props.min, props.max + 1, props.step), value =>\n                        <option value={value.toString()}/>\n                    )}\n                </datalist>\n            </span>\n        );\n    }\n}\n\ninterface ChoiceProps {\n    choices: [string, string][];\n    value: string;\n    onChange: (value: string) => void;\n    id?: string;\n}\n\nclass RadioChoiceComponent extends Component<ChoiceProps, {}> {\n    private onChange(value: string) {\n        return (e) => {\n            e.preventDefault();\n\n            this.props.onChange(value);\n        };\n    }\n\n    render(props: ChoiceProps) {\n        return (\n            // Chrome fieldsets don't flex: https://stackoverflow.com/q/28078681\n            <div class=\"input input-choice\">\n                {_.map(props.choices, ([value, label]) =>\n                    <span>\n                        <input type=\"radio\" id={`${props.id}-${value}`} name={props.id} checked={value === props.value} onChange={this.onChange(value)}/>\n                        <label for={`${props.id}-${value}`}>{label}</label>\n                    </span>\n                )}\n            </div>\n        );\n    }\n}\n\ninterface TopOptionsProps {\n    set: (PuzzleOptions) => void;\n}\n\ninterface TopOptionsState {\n    topCounts?: CountsItem[];\n}\n\nclass TopOptionsComponent extends Component<TopOptionsProps, TopOptionsState> {\n    constructor() {\n        super();\n        this.state = {\n            topCounts: undefined\n        };\n        this.fetchTopCounts();\n    }\n\n    private fetchTopCounts() {\n        Counts.getTopCounts().then(topCounts => {\n            this.setState({\n                topCounts: topCounts\n            });\n        });\n    }\n\n    private onClick(countsItem: CountsItem) {\n        let options: PuzzleOptions = {\n            rows: countsItem.rows,\n            cols: countsItem.cols,\n            extraHintsPercent: countsItem.extraHintsPercent,\n            difficulty: countsItem.difficulty\n        }; // options shouldn't contain Counts fields, breaks IndexedDB query\n\n        return (e) => {\n            e.preventDefault();\n            this.props.set(options);\n        };\n    }\n\n    render(props: TopOptionsProps, state: TopOptionsState) {\n        if (state.topCounts !== undefined && state.topCounts.length > 0) {\n            return (\n                <div class=\"top-options\">\n                    <hr/>\n\n                    <span class=\"options-title\">Most played:</span>\n                    <ol>\n                        {\n                            _.map(_.take(state.topCounts, 5), countsItem =>\n                                <li>\n                                    <a class=\"button\" onClick={this.onClick(countsItem)}>\n                                        {formatOptions(countsItem)} <small className=\"small-number\">({countsItem.solved + countsItem.solvedCheated + countsItem.over})</small>\n                                    </a>\n                                </li>\n                            )\n                        }\n                    </ol>\n                </div>\n            );\n        }\n        else\n            return null;\n    }\n}\n\nexport interface OptionsProps {\n    options: PuzzleOptions;\n    submit: (PuzzleOptions) => void;\n    highscore: (PuzzleOptions) => void;\n    defaultOptions: PuzzleOptions;\n    puzzleGenerator: PuzzleGenerator;\n    generating: boolean;\n}\n\ninterface OptionsState {\n    options: PuzzleOptions;\n    hasTimes: boolean;\n}\n\nexport class OptionsComponent extends Component<OptionsProps, OptionsState> {\n    constructor(props: OptionsProps) {\n        super();\n        this.state = {\n            options: _.clone(props.options),\n            hasTimes: false\n        };\n        this.fetchHasTimes(props.options);\n    }\n\n    componentWillReceiveProps(nextProps: OptionsProps) {\n        if (!_.eq(this.props, nextProps)) {\n            this.setState({\n                options: _.clone(nextProps.options),\n                hasTimes: false\n            });\n            this.fetchHasTimes(nextProps.options);\n        }\n    }\n\n    private onChange<K extends keyof PuzzleOptions>(field: K) {\n        return (value: PuzzleOptions[K]) => {\n            this.setState(state => _.merge(state, {\n                options: {\n                    [field as string]: value // TODO: typecheck this,\n                },\n                hasTimes: false\n            }));\n            this.fetchHasTimes(this.state.options);\n            Config.set({\n                options: this.state.options\n            });\n        };\n    }\n\n    private fetchHasTimes(options: PuzzleOptions) {\n        Times.hasTimes(options).then(hasTimes => {\n            this.setState({\n                hasTimes: hasTimes\n            });\n        })\n    }\n\n    private onSubmit = (e) => {\n        e.preventDefault();\n        this.props.submit(this.state.options);\n    };\n\n    // No onReset on <form>\n    private onReset = (e) => {\n        e.preventDefault();\n        this.setState({\n            options: _.clone(this.props.defaultOptions),\n            hasTimes: false\n        });\n        this.fetchHasTimes(this.state.options);\n        Config.set({\n            options: this.state.options\n        });\n    };\n\n    private onHighscore = (e) => {\n        this.props.highscore(this.state.options);\n    };\n\n    private setOptions = (options: PuzzleOptions) => {\n        this.setState({\n            options: _.clone(options),\n            hasTimes: false\n        });\n        this.fetchHasTimes(this.state.options);\n        Config.set({\n            options: this.state.options\n        });\n    };\n\n    render(props: OptionsProps, state: OptionsState) {\n        return (\n            <form class=\"options\" onSubmit={this.onSubmit}>\n                <fieldset disabled={props.generating}>\n                    <div class=\"form-group\">\n                        <label for=\"option-rows\">Rows</label>\n                        <InputRangeComponent id=\"option-rows\" min={2} max={6} value={state.options.rows} onChange={this.onChange(\"rows\")}/>\n                    </div>\n                    <div class=\"form-group\">\n                        <label for=\"option-cols\">Columns</label>\n                        <InputRangeComponent id=\"option-cols\" min={2} max={6} value={state.options.cols} onChange={this.onChange(\"cols\")}/>\n                    </div>\n                    <div class=\"form-group\">\n                        <label for=\"option-extra-hints\">Extra hints</label>\n                        <InputRangeComponent id=\"option-extra-hints\" min={0} max={100} step={20} value={state.options.extraHintsPercent} onChange={this.onChange(\"extraHintsPercent\")} unit=\"%\"/>\n                    </div>\n                    <div class=\"form-group\">\n                        <label for=\"option-difficulty\">Difficulty</label>\n                        <RadioChoiceComponent id=\"option-difficulty\" choices={[[\"normal\", \"Normal\"], [\"hard\", \"Hard\"]]} value={state.options.difficulty} onChange={this.onChange(\"difficulty\")}/>\n                    </div>\n                    <div class=\"form-group buttons\">\n                        <button type=\"reset\" onClick={this.onReset}>Reset</button>\n                        <button type=\"button\" disabled={!state.hasTimes} onClick={this.onHighscore}>High scores</button>\n                        <button class=\"button-highlight button-wide\" type=\"submit\" disabled={!props.puzzleGenerator.supports(state.options)}>Play</button>\n                    </div>\n\n                    <TopOptionsComponent set={this.setOptions}/>\n                </fieldset>\n\n                {\n                    props.generating ?\n                        <div class=\"loading-overlay\"><div class=\"lds-dual-ring\"></div></div> :\n                        null\n                }\n            </form>\n        );\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/web/OptionsComponent.tsx","export interface BoardOptions {\n    readonly rows: number;\n    readonly cols: number;\n}\n\nexport abstract class Board<T> {\n    constructor(private table: T[][], public readonly options: BoardOptions = {\n        rows: table.length,\n        cols: table[0].length\n    }) {\n\n    }\n\n    readonly rows: number = this.options.rows;\n    readonly cols: number = this.options.cols;\n    readonly variants: number = this.options.cols;\n\n    get(row: number, col: number): T {\n        return this.table[row][col];\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/puzzle/board/Board.ts","import {Distribution} from \"./Distribution\";\nimport {NumericPairs} from \"./PairsDistribution\";\n\nexport abstract class AbstractDistribution<T> implements Distribution<T> {\n    abstract get(value: T): number | undefined;\n\n    abstract readonly n: number;\n    abstract readonly classes: number;\n\n    abstract mapFreqs(f: (freq: number, value: T) => number): Distribution<T>;\n    abstract map<U>(f: (freq: number, value: T) => U): U[];\n    abstract filter(p: (freq: number, value: T) => boolean): Distribution<T>;\n\n    scale(targetN: number): Distribution<T> {\n        let sourceN = this.n;\n        return this.mapFreqs(freq => freq / sourceN * targetN);\n    }\n\n    scaleTo<U>(targetDist: Distribution<U>): Distribution<T> {\n        return this.scale(targetDist.n);\n    }\n\n    protected toPairs(): NumericPairs<T> {\n        return this.map((freq, value) => [value, freq]) as NumericPairs<T>;\n    }\n\n    random(): T {\n        // https://en.wikipedia.org/wiki/Fitness_proportionate_selection\n        // http://www.keithschwarz.com/darts-dice-coins/ - Roulette Wheel Selection (linear)\n        let pairs = this.toPairs();\n        let cumFreq = Math.random() * this.n;\n        for (let i = 0; i < pairs.length; i++) {\n            let [value, freq] = pairs[i];\n            if (cumFreq < freq) // value has range [0, freq)\n                return value;\n            else\n                cumFreq -= freq;\n        }\n        return pairs[pairs.length - 1][0]; // must return in case of bad rounding\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/math/AbstractDistribution.ts","module.exports = __webpack_public_path__ + \"icons/original/large/large-d1.4c6fc5e018efe828eb0a0a8136a8cc76.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/large/large-d1.png\n// module id = cgSM\n// module chunks = app","import * as _ from \"lodash\";\nimport {SingleBoard} from \"./board/SingleBoard\";\nimport {ApplyHintsGenerator} from \"./generate/ApplyHintsGenerator\";\nimport {DifficultyHintsGenerator} from \"./generate/DifficultyHintsGenerator\";\nimport {ExtraHintsGenerator} from \"./generate/ExtraHintsGenerator\";\nimport {HintsGenerator} from \"./generate/HintsGenerator\";\nimport {NonApplyHintsGenerator} from \"./generate/NonApplyHintsGenerator\";\nimport {Z3HintsGenerator} from \"./generate/Z3HintsGenerator\";\nimport {Puzzle, PuzzleOptions} from \"./Puzzle\";\n\nexport interface PuzzleGenerator {\n    supports(options: PuzzleOptions): boolean;\n    generate(options: PuzzleOptions): Promise<Puzzle>;\n}\n\nexport class HintsPuzzleGenerator implements PuzzleGenerator {\n    constructor(private hintsGenerator: HintsGenerator) {\n\n    }\n\n    supports(options: PuzzleOptions): boolean {\n        return this.hintsGenerator.supports(options);\n    }\n\n    async generate(options: PuzzleOptions): Promise<Puzzle> {\n        let board = SingleBoard.random(options);\n        let start = _.now();\n        let hints = await this.hintsGenerator.generate(options, board);\n        let end = _.now();\n        console.log(`${end - start}`);\n        return new Puzzle(board, hints, options);\n    }\n}\n\nexport let mainPuzzleGenerator: PuzzleGenerator = new HintsPuzzleGenerator(\n    new ExtraHintsGenerator(new DifficultyHintsGenerator({\n        normal: new ApplyHintsGenerator(),\n        hard: new NonApplyHintsGenerator(new Z3HintsGenerator())\n    }))\n);\n\n\n// WEBPACK FOOTER //\n// ./src/puzzle/PuzzleGenerator.ts","module.exports = __webpack_public_path__ + \"icons/original/small/small-d5.ae2144db1de56afe0541c89db7a31463.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/small/small-d5.png\n// module id = d6hy\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/large/large-f6.d614ae0c9d5efd565ca308cd3435188e.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/large/large-f6.png\n// module id = dSmd\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/large/large-e2.bba1807b4ac83d4a610aa663676e1204.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/large/large-e2.png\n// module id = dcOB\n// module chunks = app","import {Component, h} from \"preact\";\nimport {formatDuration} from \"../time\";\nimport {Timer} from \"../Timer\";\n\nexport interface TimerProps {\n    timer: Timer;\n}\n\ninterface TimerState {\n    time: number;\n}\n\nexport class TimerComponent extends Component<TimerProps, TimerState> {\n    private interval: number | null = null;\n\n    constructor(props: TimerProps) {\n        super();\n        this.state = {\n            time: props.timer.getTotalTime()\n        };\n    }\n\n    componentWillReceiveProps(nextProps: TimerProps) {\n        this.setState({\n            time: nextProps.timer.getTotalTime()\n        });\n        this.setTimer();\n    }\n\n    componentDidMount() {\n        this.setTimer();\n    }\n\n    componentWillUnmount() {\n        this.clearTimer();\n    }\n\n    private clearTimer() {\n        if (this.interval !== null)\n            clearInterval(this.interval);\n    }\n\n    private setTimer() {\n        this.clearTimer();\n\n        setTimeout(() => {\n            this.interval = setInterval(() => {\n                this.setState({\n                    time: this.props.timer.getTotalTime()\n                });\n            }, 1000);\n        }, 0); // HACK: give enough delay to make interval fall between seconds and avoid second skipping\n    }\n\n    render(props: TimerProps, state: TimerState) {\n        return (\n            <div class=\"timer\">\n                {formatDuration(state.time)}\n            </div>\n        )\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/web/TimerComponent.tsx","import {TouchContextMenuHandler} from \"./Handler\";\n\nexport class LongTouchContextMenuHandler implements TouchContextMenuHandler {\n    private timeout: number;\n\n    private static touching: boolean = false;\n    private static readonly longTouchTime = 500;\n\n    constructor(public callback: () => void) {\n\n    }\n\n    // iOS long touch workaround\n    // https://stackoverflow.com/a/33778163\n    // https://jsfiddle.net/gianlucaguarini/56Szw/\n    // https://stackoverflow.com/a/33303261\n\n    onTouchStart = (e) => {\n        // console.debug(\"touchstart\");\n        LongTouchContextMenuHandler.touching = true;\n        this.timeout = setTimeout(() => {\n            console.log(\"longtouch\");\n            this.callback();\n        }, LongTouchContextMenuHandler.longTouchTime);\n    };\n\n    onTouchMove = (e) => {\n        // console.debug(\"touchmove\");\n        clearTimeout(this.timeout);\n    };\n\n    onTouchEnd = (e) => {\n        // console.debug(\"touchend\");\n        LongTouchContextMenuHandler.touching = false;\n        clearTimeout(this.timeout);\n    };\n\n    onTouchCancel = (e) => {\n        // console.debug(\"touchcancel\");\n        LongTouchContextMenuHandler.touching = false;\n        clearTimeout(this.timeout);\n    };\n\n    onContextMenu = (e) => {\n        e.preventDefault();\n        if (!LongTouchContextMenuHandler.touching) // prevent double-triggering if context menu opens after long touch\n            this.callback();\n    };\n}\n\n\n// WEBPACK FOOTER //\n// ./src/web/helper/LongTouchContextMenuHandler.ts","module.exports = __webpack_public_path__ + \"icons/original/small/small-b5.39e97e63457f6a5ef329ce7a1f329d47.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/small/small-b5.png\n// module id = fZOX\n// module chunks = app","import {PuzzleOptions} from \"../puzzle/Puzzle\";\n\nexport function formatOptions(options: PuzzleOptions): string {\n    let difficultyText = options.difficulty === \"hard\" ? \"hard \" : \"\";\n    let extraHintsText = options.extraHintsPercent > 0 ? ` with ${options.extraHintsPercent}% extra hints` : \"\";\n    return `${options.rows}×${options.cols} ${difficultyText}puzzle${extraHintsText}`;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/web/PuzzleOptionsUtils.ts","module.exports = __webpack_public_path__ + \"icons/original/small/small-c2.488e286fbc404fc350cc0e4def122c83.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/small/small-c2.png\n// module id = gBE2\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/large/large-f3.0070d3861e60350f291165d89028d7d1.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/large/large-f3.png\n// module id = gVWB\n// module chunks = app","import * as _ from \"lodash\";\nimport {Distribution} from \"../math/Distribution\";\nimport {PairsDistribution} from \"../math/PairsDistribution\";\nimport {BoardOptions} from \"./board/Board\";\nimport {SingleBoard} from \"./board/SingleBoard\";\nimport {AdjacentHintFactory} from \"./hint/AdjacentHint\";\nimport {BetweenHintFactory} from \"./hint/BetweenHint\";\nimport {DirectionHintFactory} from \"./hint/DirectionHint\";\nimport {Hint, HintFactory} from \"./hint/Hint\";\nimport {OpenHintFactory} from \"./hint/OpenHint\";\nimport {SameColumnHintFactory} from \"./hint/SameColumnHint\";\n\nexport class RandomHintFactory implements HintFactory {\n    // hint frequency distribution from original einstein 2.0\n    private defaultDist: Distribution<HintFactory> = new PairsDistribution<HintFactory>([\n        [new AdjacentHintFactory(), 4],\n        [new OpenHintFactory(), 1],\n        [new SameColumnHintFactory(), 2],\n        [new DirectionHintFactory(), 4],\n        [new BetweenHintFactory(), 3]\n    ]);\n\n    supports(options: BoardOptions): boolean {\n        return this.defaultDist.filter((freq, value) => value.supports(options)).classes > 0;\n    }\n\n    random(board: SingleBoard): Hint {\n        let dist = this.defaultDist.filter((freq, value) => value.supports(board.options));\n        let hintFactory: HintFactory = dist.random();\n        return hintFactory.random(board);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/puzzle/RandomHint.ts","module.exports = __webpack_public_path__ + \"icons/original/small/small-d6.83aaeda6a3e029931af97f484755879f.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/small/small-d6.png\n// module id = hFVX\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/large/large-e5.b1fdec84ea77accaea3f9a52908d69f3.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/large/large-e5.png\n// module id = hli+\n// module chunks = app","import * as _ from \"lodash\";\nimport {BoardOptions} from \"./board/Board\";\nimport {MultiBoard} from \"./board/MultiBoard\";\nimport {SingleBoard} from \"./board/SingleBoard\";\nimport {Hint, HintType} from \"./hint/Hint\";\nimport {mainPuzzleGenerator} from \"./PuzzleGenerator\";\n\nexport type Difficulty = \"normal\" | \"hard\";\n\nexport interface PuzzleOptions extends BoardOptions {\n    readonly extraHintsPercent: number;\n    readonly difficulty: Difficulty;\n}\n\nexport class Puzzle {\n    public multiBoard: MultiBoard;\n\n    constructor(public singleBoard: SingleBoard, public hints: Hint[], public readonly options: PuzzleOptions) {\n        this.multiBoard = MultiBoard.full(options);\n        this.multiBoard.applyHints(_.filter(hints, hint => hint.getType() === HintType.Start));\n    }\n\n    isSolved(): boolean {\n        return this.multiBoard.isSolved(this.singleBoard);\n    }\n\n    isOver(): boolean {\n        return !this.multiBoard.contains(this.singleBoard);\n    }\n\n    applySingleHint(): boolean {\n        return this.multiBoard.applySingleHint(_.filter(this.hints, hint => hint.getType() !== HintType.Start));\n    }\n\n    canApplySingleHint(): boolean {\n        let tmpPuzzle: Puzzle = _.cloneDeep(this);\n        return tmpPuzzle.applySingleHint();\n    }\n\n    static generate(options: PuzzleOptions): Promise<Puzzle> {\n        return mainPuzzleGenerator.generate(options); // TODO: remove because usages should check supports before\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/puzzle/Puzzle.ts","module.exports = __webpack_public_path__ + \"icons/original/small/small-d4.465fbcbda569f002956eff6dbc525fba.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/small/small-d4.png\n// module id = iXl1\n// module chunks = app","module.exports = __webpack_public_path__ + \"./rain.0d05874e0f2cdd3a51985dd895f01fd0.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/rain.png\n// module id = kCQN\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/small/small-c1.857515213e12574db6ea3b7694015dd8.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/small/small-c1.png\n// module id = kbZK\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/small/small-e6.f63290d00dca1fb50b97a7749bbc6fdc.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/small/small-e6.png\n// module id = lgdU\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/large/large-c4.83eef6ef77656276b988cffc6dd1b2dd.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/large/large-c4.png\n// module id = mGEC\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/large/large-b6.29228909139aed0e29c1e0d248fdc8b1.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/large/large-b6.png\n// module id = mPGt\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/small/small-c3.8ecb4d1c7b95cff1b3f7a4e3e0342ad0.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/small/small-c3.png\n// module id = mcFw\n// module chunks = app","import {SingleBoard} from \"../board/SingleBoard\";\nimport {Hint} from \"../hint/Hint\";\nimport {PuzzleOptions} from \"../Puzzle\";\nimport {DelegateHintsGenerator} from \"./HintsGenerator\";\n\nexport class NonApplyHintsGenerator extends DelegateHintsGenerator {\n    supports(options: PuzzleOptions): boolean {\n        return options.cols > 2 && super.supports(options);\n    }\n\n    async generate(options: PuzzleOptions, board: SingleBoard): Promise<Hint[]> {\n        let hints: Hint[];\n\n        let i = 0;\n        do {\n            hints = await this.delegate.generate(options, board);\n            i++;\n        } while (board.isSolvable(hints));\n        console.log(`${i} tries to non-apply`);\n\n        return hints;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/puzzle/generate/NonApplyHintsGenerator.ts","module.exports = __webpack_public_path__ + \"icons/original/small/small-a2.e58c4d7d4ca282f01f1842de56fcc204.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/small/small-a2.png\n// module id = nVYH\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/large/large-d2.9a9e2546ef2de2aed7b9cafca1e574a4.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/large/large-d2.png\n// module id = oD70\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/large/large-c6.b70b863014dd77f1444a4f5dcfaf937d.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/large/large-c6.png\n// module id = oJmq\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/large/large-c2.c8ea002cb52b8a2bb2391a8a599a1be2.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/large/large-c2.png\n// module id = oXIE\n// module chunks = app","import {Component, h} from \"preact\";\nimport \"./birthday.less\";\n\nexport interface BirthdayProps {\n    month: number;\n    day: number;\n    name: string;\n}\n\nexport class BirthdayComponent extends Component<BirthdayProps, any> {\n    render(props: BirthdayProps) {\n        let now = new Date();\n        if (now.getMonth() + 1 == props.month && now.getDate() == props.day) { // JS month is 0-indexed, date is 1-indexed\n            return (\n                <div class=\"birthday\">\n                    <p>\n                        Happy birthday, {props.name}!\n                    </p>\n                </div>\n            );\n        }\n        else\n            return null;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/web/BirthdayComponent.tsx","module.exports = __webpack_public_path__ + \"icons/original/small/small-a6.b74ac4a06b9b99cdebadc188e6f2eba7.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/small/small-a6.png\n// module id = pqg3\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/large/large-d6.3707649a76849867b0067b33cee2f45a.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/large/large-d6.png\n// module id = q9gS\n// module chunks = app","import {Component, h, render} from \"preact\";\nimport {AppComponent} from \"./web/AppComponent\";\n\nimport * as OfflinePluginRuntime from 'offline-plugin/runtime';\nimport {VisibilityChangeListener} from \"./web/helper/VisibilityChangeListener\";\n\nconsole.log(\"-------\");\n\nOfflinePluginRuntime.install();\n\n// import \"preact/devtools\";\n\nrender(<AppComponent/>, document.body);\n\n/*var width = (window.innerWidth > 0) ? window.innerWidth : screen.width;\nalert(width);*/\n\n\n/*\nlet listener = new VisibilityChangeListener(visible => console.log(`Visibility ${visible} ${document.visibilityState}`));\nlistener.add();*/\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.tsx","module.exports = __webpack_public_path__ + \"icons/original/small/small-a1.7ec6461d1c92b8cd2af53465e9b35cfc.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/small/small-a1.png\n// module id = qpPT\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/hint-tile.fef2ac154678271b433d05cac0e1e766.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/hint-tile.png\n// module id = qwlA\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/small/small-b4.5539a0f576453510700b7e1ac8ac62c2.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/small/small-b4.png\n// module id = romA\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/large/large-c5.649a708fdfe3823d8ad66395bf760461.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/large/large-c5.png\n// module id = rxGk\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/large/large-f5.23ad85abc671b650c4fab087327177b8.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/large/large-f5.png\n// module id = t+UZ\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/small/small-e2.2a6f0dc9158e2248beb5da27abf58387.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/small/small-e2.png\n// module id = uLm8\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/small/small-a5.a7e023b76efb421fce243698ec5c1172.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/small/small-a5.png\n// module id = uVvn\n// module chunks = app","import * as _ from \"lodash\";\nimport {PuzzleOptions} from \"../puzzle/Puzzle\";\nimport {db} from \"./db\";\n\nexport interface TimesItem extends PuzzleOptions {\n    time: number;\n    date: Date;\n    name?: string;\n}\n\nexport namespace Times {\n    export function addItem(timesItem: TimesItem) {\n        return db.times.add(timesItem);\n    }\n\n    export function add(options: PuzzleOptions, time: number, name?: string) {\n        let timesItem = {\n            ...options,\n            time: time,\n            date: new Date(),\n            name: name\n        };\n        return addItem(timesItem);\n    }\n\n    export function getSortedTimes(options: PuzzleOptions): Promise<TimesItem[]> {\n        return db.times.where({...options}).sortBy(\"time\");\n    }\n\n    export function getTop10(options: PuzzleOptions): Promise<TimesItem[]> {\n        return getSortedTimes(options).then(timesItems =>\n            _.take(timesItems, 10)\n        );\n    }\n\n    export function isInTop10(options: PuzzleOptions, time: number): Promise<false | number> {\n        return getSortedTimes(options).then(timesItems => {\n            if (timesItems.length < 10 || time < timesItems[10 - 1].time)\n                return _.sortedIndexBy(timesItems.slice(0, 10), {time: time}, timesItem => timesItem.time);\n            else\n                return false;\n        });\n    }\n\n    export function hasTimes(options: PuzzleOptions): Promise<boolean> {\n        return db.times.where({...options}).count(count => count > 0);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/storage/Times.ts","module.exports = __webpack_public_path__ + \"icons/original/small/small-f1.cf4eb2f72546034b67c7e387426aab1f.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/small/small-f1.png\n// module id = voAe\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/large/large-b2.f088bd5349ae94f3aecf2256a2a41f9a.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/large/large-b2.png\n// module id = w35o\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/small/small-a3.b5693ec5ce8e44c2ab79da7d22e419c0.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/small/small-a3.png\n// module id = x5BK\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/small/small-d2.f554d768eed7fb9c2ac1361d80a08e82.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/small/small-d2.png\n// module id = xDob\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/small/small-f2.1214cc29cc865a50e028b884cf34173d.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/small/small-f2.png\n// module id = xFS2\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/large/large-f4.43276b459501e836f1928103bcbdc92c.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/large/large-f4.png\n// module id = yFfv\n// module chunks = app","import {Listener} from \"./Listener\";\n\ndeclare global {\n    interface Document {\n        readonly mozHidden: boolean;\n        readonly webkitHidden: boolean;\n        readonly msHidden: boolean;\n        onfocusin;\n        onfocusout;\n    }\n}\n\nexport class VisibilityChangeListener implements Listener {\n    private visible: boolean = true;\n\n    constructor(public callback: (visible: boolean) => void) {\n\n    }\n\n    private focused = () => {\n        // console.debug(`focused ${document.visibilityState}`);\n        if (!this.visible)\n            this.callback(this.visible = true);\n    };\n\n    private unfocused = () => {\n        // console.debug(`unfocused ${document.visibilityState}`);\n        if (this.visible)\n            this.callback(this.visible = false);\n    };\n\n    add(): void {\n        // https://stackoverflow.com/a/38710376\n\n        // Standards:\n        if ('hidden' in document) {\n            document.addEventListener('visibilitychange',\n                () => {(document.hidden ? this.unfocused : this.focused)()});\n        }\n        if ('mozHidden' in document) {\n            document.addEventListener('mozvisibilitychange',\n                () => {(document.mozHidden ? this.unfocused : this.focused)()});\n        }\n        if ('webkitHidden' in document) {\n            document.addEventListener('webkitvisibilitychange',\n                () => {(document.webkitHidden ? this.unfocused : this.focused)()});\n        }\n        if ('msHidden' in document) {\n            document.addEventListener('msvisibilitychange',\n                () => {(document.msHidden ? this.unfocused : this.focused)()});\n        }\n        // IE 9 and lower:\n        if ('onfocusin' in document) {\n            document.onfocusin = this.focused;\n            document.onfocusout = this.unfocused;\n        }\n        // All others:\n        window.onpageshow = window.onfocus = this.focused;\n        window.onpagehide = window.onblur = this.unfocused;\n\n        // TODO: initial visibility check like https://stackoverflow.com/a/1060034\n    }\n\n    remove(): void {\n        // TODO: remove listeners\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/web/helper/VisibilityChangeListener.ts","module.exports = __webpack_public_path__ + \"icons/original/small/small-f4.fa8fa0e7c09873297312ed5082eac413.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/small/small-f4.png\n// module id = yNUn\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/large/large-a4.30bcbdd3b26849030d9f7756c19d6a98.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/large/large-a4.png\n// module id = ytF8\n// module chunks = app","module.exports = __webpack_public_path__ + \"icons/original/large/large-f2.ebac4e572194ab532410773494ed9c4e.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/web/icons/original/large/large-f2.png\n// module id = zU+P\n// module chunks = app","import * as classNames from \"classnames\";\nimport * as _ from \"lodash\";\nimport {Component, h} from \"preact\";\nimport {MultiBoard} from \"../puzzle/board/MultiBoard\";\nimport {Puzzle} from \"../puzzle/Puzzle\";\nimport {LongTouchContextMenuHandler} from \"./helper/LongTouchContextMenuHandler\";\nimport {LargeVariantIconComponent, SmallVariantIconComponent} from \"./IconComponents\";\nimport \"./multiboard.less\";\nimport {SingleBoard} from \"../puzzle/board/SingleBoard\";\n\ntype Refresh = () => void;\n\nclass SingleCellComponent extends Component<VariantProps, any> {\n    render(props: VariantProps) {\n        return (\n            <div class=\"cell-single\">\n                <LargeVariantIconComponent row={props.row} variant={props.variant}/>\n            </div>\n        );\n    }\n}\n\nclass VariantVariantMultiCellComponent extends Component<VariantProps, any> {\n    private contextMenuHandler = new LongTouchContextMenuHandler(() => this.remove());\n\n    private set() {\n        this.props.board.set(this.props.row, this.props.col, this.props.variant);\n        this.props.refresh();\n    }\n\n    private remove() {\n        this.props.board.remove(this.props.row, this.props.col, this.props.variant);\n        this.props.refresh();\n    }\n\n    private onClick = (e) => {\n        this.set();\n    };\n\n    render(props: VariantProps) {\n        return (\n            <div class=\"cell-multi-variant\" onClick={this.onClick} {...this.contextMenuHandler}>\n                <SmallVariantIconComponent row={props.row} variant={props.variant}/>\n            </div>\n        );\n    }\n}\n\nclass EmptyVariantMultiCellComponent extends Component<VariantProps, any> {\n    render(props: VariantProps) {\n        return (\n            <div class=\"cell-multi-empty\"/>\n        );\n    }\n}\n\ninterface VariantProps extends CellProps {\n    variant: number;\n}\n\nclass VariantMultiCellComponent extends Component<VariantProps, any> {\n    render(props: VariantProps) {\n        if (props.variant < props.board.variants &&\n            props.board.isPossible(props.row, props.col, props.variant))\n            return <VariantVariantMultiCellComponent {...props}/>;\n        else\n            return <EmptyVariantMultiCellComponent {...props}/>;\n    }\n}\n\nclass MultiCellComponent extends Component<CellProps, any> {\n    render(props: CellProps) {\n        let variantCols = Math.ceil(Math.sqrt(props.board.variants));\n        let variantRows = Math.ceil(props.board.variants / variantCols);\n        return (\n            <table class=\"cell-multi\">\n                {_.times(variantRows, variantRow =>\n                    <tr>\n                        {_.times(variantCols, variantCol =>\n                            <td>\n                                <VariantMultiCellComponent {...props} variant={variantRow * variantCols + variantCol}/>\n                            </td>\n                        )}\n                    </tr>\n                )}\n            </table>\n        )\n    }\n}\n\ninterface CellProps extends RowProps {\n    col: number;\n}\n\nclass CellComponent extends Component<CellProps, any> {\n    private onContextMenu = (e) => {\n        e.preventDefault();\n    };\n\n    render(props: CellProps) {\n        if (props.showBoard) {\n            let correct = props.board.isSingle(props.row, props.col) && props.board.getSingle(props.row, props.col) == props.showBoard.get(props.row, props.col);\n            return (\n                <td class={classNames({\n                    \"cell-correct\": correct,\n                    \"cell-incorrect\": !correct\n                })}>\n                    <div class=\"cell\" onContextMenu={this.onContextMenu}>\n                        <SingleCellComponent {...props} variant={props.showBoard.get(props.row, props.col)}/>\n                    </div>\n                </td>\n            )\n        }\n        else {\n            return (\n                <td>\n                    <div class=\"cell\" onContextMenu={this.onContextMenu}>\n                        {\n                            props.board.isSingle(props.row, props.col) ?\n                                <SingleCellComponent {...props} variant={props.board.getSingle(props.row, props.col)}/> :\n                                <MultiCellComponent {...props}/>\n                        }\n                    </div>\n                </td>\n            )\n        }\n    }\n}\n\ninterface RowProps extends MultiBoardProps {\n    row: number;\n}\n\nclass RowComponent extends Component<RowProps, any> {\n    private refresh: Refresh = () => {\n        this.forceUpdate();\n        this.props.refresh();\n    };\n\n    render(props: RowProps) {\n        return (\n            <tr>\n                {_.times(props.board.cols, col =>\n                    <CellComponent {...props} col={col} refresh={this.refresh}/>\n                )}\n            </tr>\n        );\n    }\n}\n\nexport interface MultiBoardProps {\n    board: MultiBoard;\n    refresh: Refresh;\n    showBoard?: SingleBoard;\n}\n\nexport class MultiBoardComponent extends Component<MultiBoardProps, any> {\n    render(props: MultiBoardProps) {\n        let board = props.board;\n\n        let data = {\n            \"data-rows\": board.rows,\n            \"data-cols\": board.cols\n        };\n\n        return (\n            <div class=\"multiboard-outer\" {...data}>\n                <table class=\"multiboard\" {...data}>\n                    {_.times(board.rows, row =>\n                        <RowComponent {...props} row={row}/>\n                    )}\n                </table>\n            </div>\n        );\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/web/MultiBoardComponent.tsx"],"sourceRoot":""}